(function () {
    'use strict';

    //Inspired from https://github.com/d3/d3-hexbin/blob/master/src/hexbin.js
    function Binner(){
        var thirdPi = Math.PI/3,
        angles = [0, thirdPi, 2*thirdPi, 3*thirdPi, 4*thirdPi, 5*thirdPi];

        function pointX(d){
            return d[0];
        }
        function pointY(d){
            return d[1];
        }
        var x0 = 0,
            y0 = 0,
            x1 = 1,
            y1 = 1,
            x = pointX,
            y = pointY,
            r,
            dx,
            dy;

        function hexbin(points){
            var binsById = {}, bins = [], i, n = points.length;

            for (i = 0; i < n; ++i) {
                if (isNaN(px = +x.call(null, point = points[i], i, points))
                    || isNaN(py = +y.call(null, point, i, points))) continue;

                var point,
                    px,
                    py,
                    pj = Math.round(py = py / dy),
                    pi = Math.round(px = px / dx - (pj & 1) / 2),
                    py1 = py - pj;

                if (Math.abs(py1) * 3 > 1) {
                    var px1 = px - pi,
                        pi2 = pi + (px < pi ? -1 : 1) / 2,
                        pj2 = pj + (py < pj ? -1 : 1),
                        px2 = px - pi2,
                        py2 = py - pj2;
                    if (px1 * px1 + py1 * py1 > px2 * px2 + py2 * py2) pi = pi2 + (pj & 1 ? 1 : -1) / 2, pj = pj2;
                }

                var id = pi + "-" + pj, bin = binsById[id];
                if (bin) bin.push(point);
                else {
                    bins.push(bin = binsById[id] = [point]);
                    bin.x = (pi + (pj & 1) / 2) * dx;
                    bin.y = pj * dy;
                }
            }

            return bins;
        }
        function hexagon(radius){
            var x0 = 0, y0 = 0;
            return angles.map(function(angle) {
                var x1 = Math.sin(angle) * radius,
                    y1 = -Math.cos(angle) * radius,
                    dx = x1 - x0,
                    dy = y1 - y0;
                x0 = x1, y0 = y1;
                return [dx, dy];
            });
        }

        //Export it
        this.hexbin = hexbin;
        this.hexagon = function(radius){
            return "m" + hexagon(radius == null ? r : +radius).join("l") + "z";
        };
        this.centers = function(){
            var centers = [],
                j = Math.round(y0 / dy),
                i = Math.round(x0 / dx);
            for (var y = j * dy; y < y1 + r; y += dy, ++j) {
                for (var x = i * dx + (j & 1) * dx / 2; x < x1 + dx / 2; x += dx) {
                    centers.push([x, y]);
                }
            }
            return centers;
        };
        this.mesh = function(){
            var fragment = hexagon(r).slice(0, 4).join("l");
            return hexbin.centers().map(function(p) { return "M" + p + "m" + fragment; }).join("");
        };
        //Setters/getters
        this.x = function(_){
            return arguments.length ? (x = _, this) : x;
        };
        this.y = function(_){
            return arguments.length ? (y = _, this) : y;
        };
        this.radius = function(_){
            return arguments.length ? (r= +_, dx = r * 2 * Math.sin(thirdPi), dy = r*1.5, this): r;
        };
        this.size = function(_) {
            return arguments.length ? (x0 = y0 = 0, x1 = +_[0], y1 = +_[1], this) : [x1 - x0, y1 - y0];
        };
        this.extent = function(_){
            return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], this): [[x0, y0], [x1, y1]];
        };

        return this.radius(1);
    }

    //Adapted from: https://github.com/mapbox/delaunator/blob/master/index.js
    class Delaunator {

        static from(points, getX, getY) {
            if (!getX) getX = defaultGetX;
            if (!getY) getY = defaultGetY;

            const n = points.length;
            const coords = new Float64Array(n * 2);

            for (let i = 0; i < n; i++) {
                const p = points[i];
                coords[2 * i] = getX(p);
                coords[2 * i + 1] = getY(p);
            }

            return new Delaunator(coords, points);
        }
        triangleCoordinates(){
            let triangles = this.triangles;
            let triangleCoordinates = [];
            for (let i = 0; i < triangles.length; i += 3) {
                triangleCoordinates.push([
                    this.points[triangles[i]],
                    this.points[triangles[i + 1]],
                    this.points[triangles[i + 2]]
                ]);
            }
            return triangleCoordinates;
        }
        constructor(coords, points) {
            this.points = points;
            let minX = Infinity;
            let minY = Infinity;
            let maxX = -Infinity;
            let maxY = -Infinity;

            const n = coords.length >> 1;
            const ids = this.ids = new Uint32Array(n);

            if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');

            this.coords = coords;

            for (let i = 0; i < n; i++) {
                const x = coords[2 * i];
                const y = coords[2 * i + 1];
                if (x < minX) minX = x;
                if (y < minY) minY = y;
                if (x > maxX) maxX = x;
                if (y > maxY) maxY = y;
                ids[i] = i;
            }

            const cx = (minX + maxX) / 2;
            const cy = (minY + maxY) / 2;

            let minDist = Infinity;
            let i0, i1, i2;

            // pick a seed point close to the centroid
            for (let i = 0; i < n; i++) {
                const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);
                if (d < minDist) {
                    i0 = i;
                    minDist = d;
                }
            }

            minDist = Infinity;

            // find the point closest to the seed
            for (let i = 0; i < n; i++) {
                if (i === i0) continue;
                const d = dist(coords[2 * i0], coords[2 * i0 + 1], coords[2 * i], coords[2 * i + 1]);
                if (d < minDist && d > 0) {
                    i1 = i;
                    minDist = d;
                }
            }

            let minRadius = Infinity;

            // find the third point which forms the smallest circumcircle with the first two
            for (let i = 0; i < n; i++) {
                if (i === i0 || i === i1) continue;

                const r = circumradius(
                    coords[2 * i0], coords[2 * i0 + 1],
                    coords[2 * i1], coords[2 * i1 + 1],
                    coords[2 * i], coords[2 * i + 1]);

                if (r < minRadius) {
                    i2 = i;
                    minRadius = r;
                }
            }

            if (minRadius === Infinity) {
                throw new Error('No Delaunay triangulation exists for this input.');
            }

            // swap the order of the seed points for counter-clockwise orientation
            if (area(coords[2 * i0], coords[2 * i0 + 1],
                coords[2 * i1], coords[2 * i1 + 1],
                coords[2 * i2], coords[2 * i2 + 1]) < 0) {

                const tmp = i1;
                i1 = i2;
                i2 = tmp;
            }

            const i0x = coords[2 * i0];
            const i0y = coords[2 * i0 + 1];
            const i1x = coords[2 * i1];
            const i1y = coords[2 * i1 + 1];
            const i2x = coords[2 * i2];
            const i2y = coords[2 * i2 + 1];

            const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);
            this._cx = center.x;
            this._cy = center.y;

            // sort the points by distance from the seed triangle circumcenter
            quicksort(ids, coords, 0, ids.length - 1, center.x, center.y);

            // initialize a hash table for storing edges of the advancing convex hull
            this._hashSize = Math.ceil(Math.sqrt(n));
            this._hash = [];
            for (let i = 0; i < this._hashSize; i++) this._hash[i] = null;

            // initialize a circular doubly-linked list that will hold an advancing convex hull
            let e = this.hull = insertNode(coords, i0);
            this._hashEdge(e);
            e.t = 0;
            e = insertNode(coords, i1, e);
            this._hashEdge(e);
            e.t = 1;
            e = insertNode(coords, i2, e);
            this._hashEdge(e);
            e.t = 2;

            const maxTriangles = 2 * n - 5;
            const triangles = this.triangles = new Uint32Array(maxTriangles * 3);
            const halfedges = this.halfedges = new Int32Array(maxTriangles * 3);

            this.trianglesLen = 0;

            this._addTriangle(i0, i1, i2, -1, -1, -1);

            for (let k = 0, xp, yp; k < ids.length; k++) {
                const i = ids[k];
                const x = coords[2 * i];
                const y = coords[2 * i + 1];

                // skip duplicate points
                if (x === xp && y === yp) continue;
                xp = x;
                yp = y;

                // skip seed triangle points
                if ((x === i0x && y === i0y) ||
                    (x === i1x && y === i1y) ||
                    (x === i2x && y === i2y)) continue;

                // find a visible edge on the convex hull using edge hash
                const startKey = this._hashKey(x, y);
                let key = startKey;
                let start;
                do {
                    start = this._hash[key];
                    key = (key + 1) % this._hashSize;
                } while ((!start || start.removed) && key !== startKey);

                e = start;
                while (area(x, y, e.x, e.y, e.next.x, e.next.y) >= 0) {
                    e = e.next;
                    if (e === start) {
                        throw new Error('Something is wrong with the input points.');
                    }
                }

                const walkBack = e === start;

                // add the first triangle from the point
                let t = this._addTriangle(e.i, i, e.next.i, -1, -1, e.t);

                e.t = t; // keep track of boundary triangles on the hull
                e = insertNode(coords, i, e);

                // recursively flip triangles from the point until they satisfy the Delaunay condition
                e.t = this._legalize(t + 2);
                if (e.prev.prev.t === halfedges[t + 1]) {
                    e.prev.prev.t = t + 2;
                }

                // walk forward through the hull, adding more triangles and flipping recursively
                let q = e.next;
                while (area(x, y, q.x, q.y, q.next.x, q.next.y) < 0) {
                    t = this._addTriangle(q.i, i, q.next.i, q.prev.t, -1, q.t);
                    q.prev.t = this._legalize(t + 2);
                    this.hull = removeNode(q);
                    q = q.next;
                }

                if (walkBack) {
                    // walk backward from the other side, adding more triangles and flipping
                    q = e.prev;
                    while (area(x, y, q.prev.x, q.prev.y, q.x, q.y) < 0) {
                        t = this._addTriangle(q.prev.i, i, q.i, -1, q.t, q.prev.t);
                        this._legalize(t + 2);
                        q.prev.t = t;
                        this.hull = removeNode(q);
                        q = q.prev;
                    }
                }

                // save the two new edges in the hash table
                this._hashEdge(e);
                this._hashEdge(e.prev);
            }

            // trim typed triangle mesh arrays
            this.triangles = triangles.subarray(0, this.trianglesLen);
            this.halfedges = halfedges.subarray(0, this.trianglesLen);
        }

        _hashEdge(e) {
            this._hash[this._hashKey(e.x, e.y)] = e;
        }

        _hashKey(x, y) {
            const dx = x - this._cx;
            const dy = y - this._cy;
            // use pseudo-angle: a measure that monotonically increases
            // with real angle, but doesn't require expensive trigonometry
            const p = 1 - dx / (Math.abs(dx) + Math.abs(dy));
            return Math.floor((2 + (dy < 0 ? -p : p)) / 4 * this._hashSize);
        }

        _legalize(a) {
            const {triangles, coords, halfedges} = this;

            const b = halfedges[a];

            const a0 = a - a % 3;
            const b0 = b - b % 3;

            const al = a0 + (a + 1) % 3;
            const ar = a0 + (a + 2) % 3;
            const bl = b0 + (b + 2) % 3;

            const p0 = triangles[ar];
            const pr = triangles[a];
            const pl = triangles[al];
            const p1 = triangles[bl];

            const illegal = inCircle(
                coords[2 * p0], coords[2 * p0 + 1],
                coords[2 * pr], coords[2 * pr + 1],
                coords[2 * pl], coords[2 * pl + 1],
                coords[2 * p1], coords[2 * p1 + 1]);

            if (illegal) {
                triangles[a] = p1;
                triangles[b] = p0;

                this._link(a, halfedges[bl]);
                this._link(b, halfedges[ar]);
                this._link(ar, bl);

                const br = b0 + (b + 1) % 3;

                this._legalize(a);
                return this._legalize(br);
            }

            return ar;
        }

        _link(a, b) {
            this.halfedges[a] = b;
            if (b !== -1) this.halfedges[b] = a;
        }

        // add a new triangle given vertex indices and adjacent half-edge ids
        _addTriangle(i0, i1, i2, a, b, c) {
            const t = this.trianglesLen;

            this.triangles[t] = i0;
            this.triangles[t + 1] = i1;
            this.triangles[t + 2] = i2;

            this._link(t, a);
            this._link(t + 1, b);
            this._link(t + 2, c);

            this.trianglesLen += 3;

            return t;
        }
    }

    function dist(ax, ay, bx, by) {
        const dx = ax - bx;
        const dy = ay - by;
        return dx * dx + dy * dy;
    }

    function area(px, py, qx, qy, rx, ry) {
        return (qy - py) * (rx - qx) - (qx - px) * (ry - qy);
    }

    function inCircle(ax, ay, bx, by, cx, cy, px, py) {
        const dx = ax - px;
        const dy = ay - py;
        const ex = bx - px;
        const ey = by - py;
        const fx = cx - px;
        const fy = cy - py;

        const ap = dx * dx + dy * dy;
        const bp = ex * ex + ey * ey;
        const cp = fx * fx + fy * fy;

        return dx * (ey * cp - bp * fy) -
               dy * (ex * cp - bp * fx) +
               ap * (ex * fy - ey * fx) < 0;
    }

    function circumradius(ax, ay, bx, by, cx, cy) {
        const dx = bx - ax;
        const dy = by - ay;
        const ex = cx - ax;
        const ey = cy - ay;

        const bl = dx * dx + dy * dy;
        const cl = ex * ex + ey * ey;
        const d = dx * ey - dy * ex;

        const x = (ey * bl - dy * cl) * 0.5 / d;
        const y = (dx * cl - ex * bl) * 0.5 / d;

        return bl && cl && d && (x * x + y * y) || Infinity;
    }

    function circumcenter(ax, ay, bx, by, cx, cy) {
        const dx = bx - ax;
        const dy = by - ay;
        const ex = cx - ax;
        const ey = cy - ay;

        const bl = dx * dx + dy * dy;
        const cl = ex * ex + ey * ey;
        const d = dx * ey - dy * ex;

        const x = ax + (ey * bl - dy * cl) * 0.5 / d;
        const y = ay + (dx * cl - ex * bl) * 0.5 / d;

        return {x, y};
    }

    // create a new node in a doubly linked list
    function insertNode(coords, i, prev) {
        const node = {
            i: i,
            x: coords[2 * i],
            y: coords[2 * i + 1],
            t: 0,
            prev: null,
            next: null,
            removed: false
        };

        if (!prev) {
            node.prev = node;
            node.next = node;

        } else {
            node.next = prev.next;
            node.prev = prev;
            prev.next.prev = node;
            prev.next = node;
        }
        return node;
    }

    function removeNode(node) {
        node.prev.next = node.next;
        node.next.prev = node.prev;
        node.removed = true;
        return node.prev;
    }

    function quicksort(ids, coords, left, right, cx, cy) {
        let i, j, temp;

        if (right - left <= 20) {
            for (i = left + 1; i <= right; i++) {
                temp = ids[i];
                j = i - 1;
                while (j >= left && compare(coords, ids[j], temp, cx, cy) > 0) ids[j + 1] = ids[j--];
                ids[j + 1] = temp;
            }
        } else {
            const median = (left + right) >> 1;
            i = left + 1;
            j = right;
            swap(ids, median, i);
            if (compare(coords, ids[left], ids[right], cx, cy) > 0) swap(ids, left, right);
            if (compare(coords, ids[i], ids[right], cx, cy) > 0) swap(ids, i, right);
            if (compare(coords, ids[left], ids[i], cx, cy) > 0) swap(ids, left, i);

            temp = ids[i];
            while (true) {
                do i++; while (compare(coords, ids[i], temp, cx, cy) < 0);
                do j--; while (compare(coords, ids[j], temp, cx, cy) > 0);
                if (j < i) break;
                swap(ids, i, j);
            }
            ids[left + 1] = ids[j];
            ids[j] = temp;

            if (right - i + 1 >= j - left) {
                quicksort(ids, coords, i, right, cx, cy);
                quicksort(ids, coords, left, j - 1, cx, cy);
            } else {
                quicksort(ids, coords, left, j - 1, cx, cy);
                quicksort(ids, coords, i, right, cx, cy);
            }
        }
    }

    function compare(coords, i, j, cx, cy) {
        const d1 = dist(coords[2 * i], coords[2 * i + 1], cx, cy);
        const d2 = dist(coords[2 * j], coords[2 * j + 1], cx, cy);
        return (d1 - d2) || (coords[2 * i] - coords[2 * j]) || (coords[2 * i + 1] - coords[2 * j + 1]);
    }

    function swap(arr, i, j) {
        const tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }

    function defaultGetX(p) {
        return p[0];
    }
    function defaultGetY(p) {
        return p[1];
    }

    var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

    function createCommonjsModule(fn, module) {
    	return module = { exports: {} }, fn(module, module.exports), module.exports;
    }

    var underscore = createCommonjsModule(function (module, exports) {
    //     Underscore.js 1.9.1
    //     http://underscorejs.org
    //     (c) 2009-2018 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
    //     Underscore may be freely distributed under the MIT license.

    (function() {

      // Baseline setup
      // --------------

      // Establish the root object, `window` (`self`) in the browser, `global`
      // on the server, or `this` in some virtual machines. We use `self`
      // instead of `window` for `WebWorker` support.
      var root = typeof self == 'object' && self.self === self && self ||
                typeof commonjsGlobal == 'object' && commonjsGlobal.global === commonjsGlobal && commonjsGlobal ||
                this ||
                {};

      // Save the previous value of the `_` variable.
      var previousUnderscore = root._;

      // Save bytes in the minified (but not gzipped) version:
      var ArrayProto = Array.prototype, ObjProto = Object.prototype;
      var SymbolProto = typeof Symbol !== 'undefined' ? Symbol.prototype : null;

      // Create quick reference variables for speed access to core prototypes.
      var push = ArrayProto.push,
          slice = ArrayProto.slice,
          toString = ObjProto.toString,
          hasOwnProperty = ObjProto.hasOwnProperty;

      // All **ECMAScript 5** native function implementations that we hope to use
      // are declared here.
      var nativeIsArray = Array.isArray,
          nativeKeys = Object.keys,
          nativeCreate = Object.create;

      // Naked function reference for surrogate-prototype-swapping.
      var Ctor = function(){};

      // Create a safe reference to the Underscore object for use below.
      var _ = function(obj) {
        if (obj instanceof _) return obj;
        if (!(this instanceof _)) return new _(obj);
        this._wrapped = obj;
      };

      // Export the Underscore object for **Node.js**, with
      // backwards-compatibility for their old module API. If we're in
      // the browser, add `_` as a global object.
      // (`nodeType` is checked to ensure that `module`
      // and `exports` are not HTML elements.)
      if (!exports.nodeType) {
        if (!module.nodeType && module.exports) {
          exports = module.exports = _;
        }
        exports._ = _;
      } else {
        root._ = _;
      }

      // Current version.
      _.VERSION = '1.9.1';

      // Internal function that returns an efficient (for current engines) version
      // of the passed-in callback, to be repeatedly applied in other Underscore
      // functions.
      var optimizeCb = function(func, context, argCount) {
        if (context === void 0) return func;
        switch (argCount == null ? 3 : argCount) {
          case 1: return function(value) {
            return func.call(context, value);
          };
          // The 2-argument case is omitted because we’re not using it.
          case 3: return function(value, index, collection) {
            return func.call(context, value, index, collection);
          };
          case 4: return function(accumulator, value, index, collection) {
            return func.call(context, accumulator, value, index, collection);
          };
        }
        return function() {
          return func.apply(context, arguments);
        };
      };

      var builtinIteratee;

      // An internal function to generate callbacks that can be applied to each
      // element in a collection, returning the desired result — either `identity`,
      // an arbitrary callback, a property matcher, or a property accessor.
      var cb = function(value, context, argCount) {
        if (_.iteratee !== builtinIteratee) return _.iteratee(value, context);
        if (value == null) return _.identity;
        if (_.isFunction(value)) return optimizeCb(value, context, argCount);
        if (_.isObject(value) && !_.isArray(value)) return _.matcher(value);
        return _.property(value);
      };

      // External wrapper for our callback generator. Users may customize
      // `_.iteratee` if they want additional predicate/iteratee shorthand styles.
      // This abstraction hides the internal-only argCount argument.
      _.iteratee = builtinIteratee = function(value, context) {
        return cb(value, context, Infinity);
      };

      // Some functions take a variable number of arguments, or a few expected
      // arguments at the beginning and then a variable number of values to operate
      // on. This helper accumulates all remaining arguments past the function’s
      // argument length (or an explicit `startIndex`), into an array that becomes
      // the last argument. Similar to ES6’s "rest parameter".
      var restArguments = function(func, startIndex) {
        startIndex = startIndex == null ? func.length - 1 : +startIndex;
        return function() {
          var length = Math.max(arguments.length - startIndex, 0),
              rest = Array(length),
              index = 0;
          for (; index < length; index++) {
            rest[index] = arguments[index + startIndex];
          }
          switch (startIndex) {
            case 0: return func.call(this, rest);
            case 1: return func.call(this, arguments[0], rest);
            case 2: return func.call(this, arguments[0], arguments[1], rest);
          }
          var args = Array(startIndex + 1);
          for (index = 0; index < startIndex; index++) {
            args[index] = arguments[index];
          }
          args[startIndex] = rest;
          return func.apply(this, args);
        };
      };

      // An internal function for creating a new object that inherits from another.
      var baseCreate = function(prototype) {
        if (!_.isObject(prototype)) return {};
        if (nativeCreate) return nativeCreate(prototype);
        Ctor.prototype = prototype;
        var result = new Ctor;
        Ctor.prototype = null;
        return result;
      };

      var shallowProperty = function(key) {
        return function(obj) {
          return obj == null ? void 0 : obj[key];
        };
      };

      var has = function(obj, path) {
        return obj != null && hasOwnProperty.call(obj, path);
      };

      var deepGet = function(obj, path) {
        var length = path.length;
        for (var i = 0; i < length; i++) {
          if (obj == null) return void 0;
          obj = obj[path[i]];
        }
        return length ? obj : void 0;
      };

      // Helper for collection methods to determine whether a collection
      // should be iterated as an array or as an object.
      // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
      // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
      var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
      var getLength = shallowProperty('length');
      var isArrayLike = function(collection) {
        var length = getLength(collection);
        return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
      };

      // Collection Functions
      // --------------------

      // The cornerstone, an `each` implementation, aka `forEach`.
      // Handles raw objects in addition to array-likes. Treats all
      // sparse array-likes as if they were dense.
      _.each = _.forEach = function(obj, iteratee, context) {
        iteratee = optimizeCb(iteratee, context);
        var i, length;
        if (isArrayLike(obj)) {
          for (i = 0, length = obj.length; i < length; i++) {
            iteratee(obj[i], i, obj);
          }
        } else {
          var keys = _.keys(obj);
          for (i = 0, length = keys.length; i < length; i++) {
            iteratee(obj[keys[i]], keys[i], obj);
          }
        }
        return obj;
      };

      // Return the results of applying the iteratee to each element.
      _.map = _.collect = function(obj, iteratee, context) {
        iteratee = cb(iteratee, context);
        var keys = !isArrayLike(obj) && _.keys(obj),
            length = (keys || obj).length,
            results = Array(length);
        for (var index = 0; index < length; index++) {
          var currentKey = keys ? keys[index] : index;
          results[index] = iteratee(obj[currentKey], currentKey, obj);
        }
        return results;
      };

      // Create a reducing function iterating left or right.
      var createReduce = function(dir) {
        // Wrap code that reassigns argument variables in a separate function than
        // the one that accesses `arguments.length` to avoid a perf hit. (#1991)
        var reducer = function(obj, iteratee, memo, initial) {
          var keys = !isArrayLike(obj) && _.keys(obj),
              length = (keys || obj).length,
              index = dir > 0 ? 0 : length - 1;
          if (!initial) {
            memo = obj[keys ? keys[index] : index];
            index += dir;
          }
          for (; index >= 0 && index < length; index += dir) {
            var currentKey = keys ? keys[index] : index;
            memo = iteratee(memo, obj[currentKey], currentKey, obj);
          }
          return memo;
        };

        return function(obj, iteratee, memo, context) {
          var initial = arguments.length >= 3;
          return reducer(obj, optimizeCb(iteratee, context, 4), memo, initial);
        };
      };

      // **Reduce** builds up a single result from a list of values, aka `inject`,
      // or `foldl`.
      _.reduce = _.foldl = _.inject = createReduce(1);

      // The right-associative version of reduce, also known as `foldr`.
      _.reduceRight = _.foldr = createReduce(-1);

      // Return the first value which passes a truth test. Aliased as `detect`.
      _.find = _.detect = function(obj, predicate, context) {
        var keyFinder = isArrayLike(obj) ? _.findIndex : _.findKey;
        var key = keyFinder(obj, predicate, context);
        if (key !== void 0 && key !== -1) return obj[key];
      };

      // Return all the elements that pass a truth test.
      // Aliased as `select`.
      _.filter = _.select = function(obj, predicate, context) {
        var results = [];
        predicate = cb(predicate, context);
        _.each(obj, function(value, index, list) {
          if (predicate(value, index, list)) results.push(value);
        });
        return results;
      };

      // Return all the elements for which a truth test fails.
      _.reject = function(obj, predicate, context) {
        return _.filter(obj, _.negate(cb(predicate)), context);
      };

      // Determine whether all of the elements match a truth test.
      // Aliased as `all`.
      _.every = _.all = function(obj, predicate, context) {
        predicate = cb(predicate, context);
        var keys = !isArrayLike(obj) && _.keys(obj),
            length = (keys || obj).length;
        for (var index = 0; index < length; index++) {
          var currentKey = keys ? keys[index] : index;
          if (!predicate(obj[currentKey], currentKey, obj)) return false;
        }
        return true;
      };

      // Determine if at least one element in the object matches a truth test.
      // Aliased as `any`.
      _.some = _.any = function(obj, predicate, context) {
        predicate = cb(predicate, context);
        var keys = !isArrayLike(obj) && _.keys(obj),
            length = (keys || obj).length;
        for (var index = 0; index < length; index++) {
          var currentKey = keys ? keys[index] : index;
          if (predicate(obj[currentKey], currentKey, obj)) return true;
        }
        return false;
      };

      // Determine if the array or object contains a given item (using `===`).
      // Aliased as `includes` and `include`.
      _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {
        if (!isArrayLike(obj)) obj = _.values(obj);
        if (typeof fromIndex != 'number' || guard) fromIndex = 0;
        return _.indexOf(obj, item, fromIndex) >= 0;
      };

      // Invoke a method (with arguments) on every item in a collection.
      _.invoke = restArguments(function(obj, path, args) {
        var contextPath, func;
        if (_.isFunction(path)) {
          func = path;
        } else if (_.isArray(path)) {
          contextPath = path.slice(0, -1);
          path = path[path.length - 1];
        }
        return _.map(obj, function(context) {
          var method = func;
          if (!method) {
            if (contextPath && contextPath.length) {
              context = deepGet(context, contextPath);
            }
            if (context == null) return void 0;
            method = context[path];
          }
          return method == null ? method : method.apply(context, args);
        });
      });

      // Convenience version of a common use case of `map`: fetching a property.
      _.pluck = function(obj, key) {
        return _.map(obj, _.property(key));
      };

      // Convenience version of a common use case of `filter`: selecting only objects
      // containing specific `key:value` pairs.
      _.where = function(obj, attrs) {
        return _.filter(obj, _.matcher(attrs));
      };

      // Convenience version of a common use case of `find`: getting the first object
      // containing specific `key:value` pairs.
      _.findWhere = function(obj, attrs) {
        return _.find(obj, _.matcher(attrs));
      };

      // Return the maximum element (or element-based computation).
      _.max = function(obj, iteratee, context) {
        var result = -Infinity, lastComputed = -Infinity,
            value, computed;
        if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {
          obj = isArrayLike(obj) ? obj : _.values(obj);
          for (var i = 0, length = obj.length; i < length; i++) {
            value = obj[i];
            if (value != null && value > result) {
              result = value;
            }
          }
        } else {
          iteratee = cb(iteratee, context);
          _.each(obj, function(v, index, list) {
            computed = iteratee(v, index, list);
            if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
              result = v;
              lastComputed = computed;
            }
          });
        }
        return result;
      };

      // Return the minimum element (or element-based computation).
      _.min = function(obj, iteratee, context) {
        var result = Infinity, lastComputed = Infinity,
            value, computed;
        if (iteratee == null || typeof iteratee == 'number' && typeof obj[0] != 'object' && obj != null) {
          obj = isArrayLike(obj) ? obj : _.values(obj);
          for (var i = 0, length = obj.length; i < length; i++) {
            value = obj[i];
            if (value != null && value < result) {
              result = value;
            }
          }
        } else {
          iteratee = cb(iteratee, context);
          _.each(obj, function(v, index, list) {
            computed = iteratee(v, index, list);
            if (computed < lastComputed || computed === Infinity && result === Infinity) {
              result = v;
              lastComputed = computed;
            }
          });
        }
        return result;
      };

      // Shuffle a collection.
      _.shuffle = function(obj) {
        return _.sample(obj, Infinity);
      };

      // Sample **n** random values from a collection using the modern version of the
      // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
      // If **n** is not specified, returns a single random element.
      // The internal `guard` argument allows it to work with `map`.
      _.sample = function(obj, n, guard) {
        if (n == null || guard) {
          if (!isArrayLike(obj)) obj = _.values(obj);
          return obj[_.random(obj.length - 1)];
        }
        var sample = isArrayLike(obj) ? _.clone(obj) : _.values(obj);
        var length = getLength(sample);
        n = Math.max(Math.min(n, length), 0);
        var last = length - 1;
        for (var index = 0; index < n; index++) {
          var rand = _.random(index, last);
          var temp = sample[index];
          sample[index] = sample[rand];
          sample[rand] = temp;
        }
        return sample.slice(0, n);
      };

      // Sort the object's values by a criterion produced by an iteratee.
      _.sortBy = function(obj, iteratee, context) {
        var index = 0;
        iteratee = cb(iteratee, context);
        return _.pluck(_.map(obj, function(value, key, list) {
          return {
            value: value,
            index: index++,
            criteria: iteratee(value, key, list)
          };
        }).sort(function(left, right) {
          var a = left.criteria;
          var b = right.criteria;
          if (a !== b) {
            if (a > b || a === void 0) return 1;
            if (a < b || b === void 0) return -1;
          }
          return left.index - right.index;
        }), 'value');
      };

      // An internal function used for aggregate "group by" operations.
      var group = function(behavior, partition) {
        return function(obj, iteratee, context) {
          var result = partition ? [[], []] : {};
          iteratee = cb(iteratee, context);
          _.each(obj, function(value, index) {
            var key = iteratee(value, index, obj);
            behavior(result, value, key);
          });
          return result;
        };
      };

      // Groups the object's values by a criterion. Pass either a string attribute
      // to group by, or a function that returns the criterion.
      _.groupBy = group(function(result, value, key) {
        if (has(result, key)) result[key].push(value); else result[key] = [value];
      });

      // Indexes the object's values by a criterion, similar to `groupBy`, but for
      // when you know that your index values will be unique.
      _.indexBy = group(function(result, value, key) {
        result[key] = value;
      });

      // Counts instances of an object that group by a certain criterion. Pass
      // either a string attribute to count by, or a function that returns the
      // criterion.
      _.countBy = group(function(result, value, key) {
        if (has(result, key)) result[key]++; else result[key] = 1;
      });

      var reStrSymbol = /[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;
      // Safely create a real, live array from anything iterable.
      _.toArray = function(obj) {
        if (!obj) return [];
        if (_.isArray(obj)) return slice.call(obj);
        if (_.isString(obj)) {
          // Keep surrogate pair characters together
          return obj.match(reStrSymbol);
        }
        if (isArrayLike(obj)) return _.map(obj, _.identity);
        return _.values(obj);
      };

      // Return the number of elements in an object.
      _.size = function(obj) {
        if (obj == null) return 0;
        return isArrayLike(obj) ? obj.length : _.keys(obj).length;
      };

      // Split a collection into two arrays: one whose elements all satisfy the given
      // predicate, and one whose elements all do not satisfy the predicate.
      _.partition = group(function(result, value, pass) {
        result[pass ? 0 : 1].push(value);
      }, true);

      // Array Functions
      // ---------------

      // Get the first element of an array. Passing **n** will return the first N
      // values in the array. Aliased as `head` and `take`. The **guard** check
      // allows it to work with `_.map`.
      _.first = _.head = _.take = function(array, n, guard) {
        if (array == null || array.length < 1) return n == null ? void 0 : [];
        if (n == null || guard) return array[0];
        return _.initial(array, array.length - n);
      };

      // Returns everything but the last entry of the array. Especially useful on
      // the arguments object. Passing **n** will return all the values in
      // the array, excluding the last N.
      _.initial = function(array, n, guard) {
        return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
      };

      // Get the last element of an array. Passing **n** will return the last N
      // values in the array.
      _.last = function(array, n, guard) {
        if (array == null || array.length < 1) return n == null ? void 0 : [];
        if (n == null || guard) return array[array.length - 1];
        return _.rest(array, Math.max(0, array.length - n));
      };

      // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
      // Especially useful on the arguments object. Passing an **n** will return
      // the rest N values in the array.
      _.rest = _.tail = _.drop = function(array, n, guard) {
        return slice.call(array, n == null || guard ? 1 : n);
      };

      // Trim out all falsy values from an array.
      _.compact = function(array) {
        return _.filter(array, Boolean);
      };

      // Internal implementation of a recursive `flatten` function.
      var flatten = function(input, shallow, strict, output) {
        output = output || [];
        var idx = output.length;
        for (var i = 0, length = getLength(input); i < length; i++) {
          var value = input[i];
          if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
            // Flatten current level of array or arguments object.
            if (shallow) {
              var j = 0, len = value.length;
              while (j < len) output[idx++] = value[j++];
            } else {
              flatten(value, shallow, strict, output);
              idx = output.length;
            }
          } else if (!strict) {
            output[idx++] = value;
          }
        }
        return output;
      };

      // Flatten out an array, either recursively (by default), or just one level.
      _.flatten = function(array, shallow) {
        return flatten(array, shallow, false);
      };

      // Return a version of the array that does not contain the specified value(s).
      _.without = restArguments(function(array, otherArrays) {
        return _.difference(array, otherArrays);
      });

      // Produce a duplicate-free version of the array. If the array has already
      // been sorted, you have the option of using a faster algorithm.
      // The faster algorithm will not work with an iteratee if the iteratee
      // is not a one-to-one function, so providing an iteratee will disable
      // the faster algorithm.
      // Aliased as `unique`.
      _.uniq = _.unique = function(array, isSorted, iteratee, context) {
        if (!_.isBoolean(isSorted)) {
          context = iteratee;
          iteratee = isSorted;
          isSorted = false;
        }
        if (iteratee != null) iteratee = cb(iteratee, context);
        var result = [];
        var seen = [];
        for (var i = 0, length = getLength(array); i < length; i++) {
          var value = array[i],
              computed = iteratee ? iteratee(value, i, array) : value;
          if (isSorted && !iteratee) {
            if (!i || seen !== computed) result.push(value);
            seen = computed;
          } else if (iteratee) {
            if (!_.contains(seen, computed)) {
              seen.push(computed);
              result.push(value);
            }
          } else if (!_.contains(result, value)) {
            result.push(value);
          }
        }
        return result;
      };

      // Produce an array that contains the union: each distinct element from all of
      // the passed-in arrays.
      _.union = restArguments(function(arrays) {
        return _.uniq(flatten(arrays, true, true));
      });

      // Produce an array that contains every item shared between all the
      // passed-in arrays.
      _.intersection = function(array) {
        var result = [];
        var argsLength = arguments.length;
        for (var i = 0, length = getLength(array); i < length; i++) {
          var item = array[i];
          if (_.contains(result, item)) continue;
          var j;
          for (j = 1; j < argsLength; j++) {
            if (!_.contains(arguments[j], item)) break;
          }
          if (j === argsLength) result.push(item);
        }
        return result;
      };

      // Take the difference between one array and a number of other arrays.
      // Only the elements present in just the first array will remain.
      _.difference = restArguments(function(array, rest) {
        rest = flatten(rest, true, true);
        return _.filter(array, function(value){
          return !_.contains(rest, value);
        });
      });

      // Complement of _.zip. Unzip accepts an array of arrays and groups
      // each array's elements on shared indices.
      _.unzip = function(array) {
        var length = array && _.max(array, getLength).length || 0;
        var result = Array(length);

        for (var index = 0; index < length; index++) {
          result[index] = _.pluck(array, index);
        }
        return result;
      };

      // Zip together multiple lists into a single array -- elements that share
      // an index go together.
      _.zip = restArguments(_.unzip);

      // Converts lists into objects. Pass either a single array of `[key, value]`
      // pairs, or two parallel arrays of the same length -- one of keys, and one of
      // the corresponding values. Passing by pairs is the reverse of _.pairs.
      _.object = function(list, values) {
        var result = {};
        for (var i = 0, length = getLength(list); i < length; i++) {
          if (values) {
            result[list[i]] = values[i];
          } else {
            result[list[i][0]] = list[i][1];
          }
        }
        return result;
      };

      // Generator function to create the findIndex and findLastIndex functions.
      var createPredicateIndexFinder = function(dir) {
        return function(array, predicate, context) {
          predicate = cb(predicate, context);
          var length = getLength(array);
          var index = dir > 0 ? 0 : length - 1;
          for (; index >= 0 && index < length; index += dir) {
            if (predicate(array[index], index, array)) return index;
          }
          return -1;
        };
      };

      // Returns the first index on an array-like that passes a predicate test.
      _.findIndex = createPredicateIndexFinder(1);
      _.findLastIndex = createPredicateIndexFinder(-1);

      // Use a comparator function to figure out the smallest index at which
      // an object should be inserted so as to maintain order. Uses binary search.
      _.sortedIndex = function(array, obj, iteratee, context) {
        iteratee = cb(iteratee, context, 1);
        var value = iteratee(obj);
        var low = 0, high = getLength(array);
        while (low < high) {
          var mid = Math.floor((low + high) / 2);
          if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
        }
        return low;
      };

      // Generator function to create the indexOf and lastIndexOf functions.
      var createIndexFinder = function(dir, predicateFind, sortedIndex) {
        return function(array, item, idx) {
          var i = 0, length = getLength(array);
          if (typeof idx == 'number') {
            if (dir > 0) {
              i = idx >= 0 ? idx : Math.max(idx + length, i);
            } else {
              length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
            }
          } else if (sortedIndex && idx && length) {
            idx = sortedIndex(array, item);
            return array[idx] === item ? idx : -1;
          }
          if (item !== item) {
            idx = predicateFind(slice.call(array, i, length), _.isNaN);
            return idx >= 0 ? idx + i : -1;
          }
          for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
            if (array[idx] === item) return idx;
          }
          return -1;
        };
      };

      // Return the position of the first occurrence of an item in an array,
      // or -1 if the item is not included in the array.
      // If the array is large and already in sort order, pass `true`
      // for **isSorted** to use binary search.
      _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
      _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

      // Generate an integer Array containing an arithmetic progression. A port of
      // the native Python `range()` function. See
      // [the Python documentation](http://docs.python.org/library/functions.html#range).
      _.range = function(start, stop, step) {
        if (stop == null) {
          stop = start || 0;
          start = 0;
        }
        if (!step) {
          step = stop < start ? -1 : 1;
        }

        var length = Math.max(Math.ceil((stop - start) / step), 0);
        var range = Array(length);

        for (var idx = 0; idx < length; idx++, start += step) {
          range[idx] = start;
        }

        return range;
      };

      // Chunk a single array into multiple arrays, each containing `count` or fewer
      // items.
      _.chunk = function(array, count) {
        if (count == null || count < 1) return [];
        var result = [];
        var i = 0, length = array.length;
        while (i < length) {
          result.push(slice.call(array, i, i += count));
        }
        return result;
      };

      // Function (ahem) Functions
      // ------------------

      // Determines whether to execute a function as a constructor
      // or a normal function with the provided arguments.
      var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {
        if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
        var self = baseCreate(sourceFunc.prototype);
        var result = sourceFunc.apply(self, args);
        if (_.isObject(result)) return result;
        return self;
      };

      // Create a function bound to a given object (assigning `this`, and arguments,
      // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
      // available.
      _.bind = restArguments(function(func, context, args) {
        if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
        var bound = restArguments(function(callArgs) {
          return executeBound(func, bound, context, this, args.concat(callArgs));
        });
        return bound;
      });

      // Partially apply a function by creating a version that has had some of its
      // arguments pre-filled, without changing its dynamic `this` context. _ acts
      // as a placeholder by default, allowing any combination of arguments to be
      // pre-filled. Set `_.partial.placeholder` for a custom placeholder argument.
      _.partial = restArguments(function(func, boundArgs) {
        var placeholder = _.partial.placeholder;
        var bound = function() {
          var position = 0, length = boundArgs.length;
          var args = Array(length);
          for (var i = 0; i < length; i++) {
            args[i] = boundArgs[i] === placeholder ? arguments[position++] : boundArgs[i];
          }
          while (position < arguments.length) args.push(arguments[position++]);
          return executeBound(func, bound, this, this, args);
        };
        return bound;
      });

      _.partial.placeholder = _;

      // Bind a number of an object's methods to that object. Remaining arguments
      // are the method names to be bound. Useful for ensuring that all callbacks
      // defined on an object belong to it.
      _.bindAll = restArguments(function(obj, keys) {
        keys = flatten(keys, false, false);
        var index = keys.length;
        if (index < 1) throw new Error('bindAll must be passed function names');
        while (index--) {
          var key = keys[index];
          obj[key] = _.bind(obj[key], obj);
        }
      });

      // Memoize an expensive function by storing its results.
      _.memoize = function(func, hasher) {
        var memoize = function(key) {
          var cache = memoize.cache;
          var address = '' + (hasher ? hasher.apply(this, arguments) : key);
          if (!has(cache, address)) cache[address] = func.apply(this, arguments);
          return cache[address];
        };
        memoize.cache = {};
        return memoize;
      };

      // Delays a function for the given number of milliseconds, and then calls
      // it with the arguments supplied.
      _.delay = restArguments(function(func, wait, args) {
        return setTimeout(function() {
          return func.apply(null, args);
        }, wait);
      });

      // Defers a function, scheduling it to run after the current call stack has
      // cleared.
      _.defer = _.partial(_.delay, _, 1);

      // Returns a function, that, when invoked, will only be triggered at most once
      // during a given window of time. Normally, the throttled function will run
      // as much as it can, without ever going more than once per `wait` duration;
      // but if you'd like to disable the execution on the leading edge, pass
      // `{leading: false}`. To disable execution on the trailing edge, ditto.
      _.throttle = function(func, wait, options) {
        var timeout, context, args, result;
        var previous = 0;
        if (!options) options = {};

        var later = function() {
          previous = options.leading === false ? 0 : _.now();
          timeout = null;
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        };

        var throttled = function() {
          var now = _.now();
          if (!previous && options.leading === false) previous = now;
          var remaining = wait - (now - previous);
          context = this;
          args = arguments;
          if (remaining <= 0 || remaining > wait) {
            if (timeout) {
              clearTimeout(timeout);
              timeout = null;
            }
            previous = now;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
          } else if (!timeout && options.trailing !== false) {
            timeout = setTimeout(later, remaining);
          }
          return result;
        };

        throttled.cancel = function() {
          clearTimeout(timeout);
          previous = 0;
          timeout = context = args = null;
        };

        return throttled;
      };

      // Returns a function, that, as long as it continues to be invoked, will not
      // be triggered. The function will be called after it stops being called for
      // N milliseconds. If `immediate` is passed, trigger the function on the
      // leading edge, instead of the trailing.
      _.debounce = function(func, wait, immediate) {
        var timeout, result;

        var later = function(context, args) {
          timeout = null;
          if (args) result = func.apply(context, args);
        };

        var debounced = restArguments(function(args) {
          if (timeout) clearTimeout(timeout);
          if (immediate) {
            var callNow = !timeout;
            timeout = setTimeout(later, wait);
            if (callNow) result = func.apply(this, args);
          } else {
            timeout = _.delay(later, wait, this, args);
          }

          return result;
        });

        debounced.cancel = function() {
          clearTimeout(timeout);
          timeout = null;
        };

        return debounced;
      };

      // Returns the first function passed as an argument to the second,
      // allowing you to adjust arguments, run code before and after, and
      // conditionally execute the original function.
      _.wrap = function(func, wrapper) {
        return _.partial(wrapper, func);
      };

      // Returns a negated version of the passed-in predicate.
      _.negate = function(predicate) {
        return function() {
          return !predicate.apply(this, arguments);
        };
      };

      // Returns a function that is the composition of a list of functions, each
      // consuming the return value of the function that follows.
      _.compose = function() {
        var args = arguments;
        var start = args.length - 1;
        return function() {
          var i = start;
          var result = args[start].apply(this, arguments);
          while (i--) result = args[i].call(this, result);
          return result;
        };
      };

      // Returns a function that will only be executed on and after the Nth call.
      _.after = function(times, func) {
        return function() {
          if (--times < 1) {
            return func.apply(this, arguments);
          }
        };
      };

      // Returns a function that will only be executed up to (but not including) the Nth call.
      _.before = function(times, func) {
        var memo;
        return function() {
          if (--times > 0) {
            memo = func.apply(this, arguments);
          }
          if (times <= 1) func = null;
          return memo;
        };
      };

      // Returns a function that will be executed at most one time, no matter how
      // often you call it. Useful for lazy initialization.
      _.once = _.partial(_.before, 2);

      _.restArguments = restArguments;

      // Object Functions
      // ----------------

      // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
      var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
      var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
        'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

      var collectNonEnumProps = function(obj, keys) {
        var nonEnumIdx = nonEnumerableProps.length;
        var constructor = obj.constructor;
        var proto = _.isFunction(constructor) && constructor.prototype || ObjProto;

        // Constructor is a special case.
        var prop = 'constructor';
        if (has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

        while (nonEnumIdx--) {
          prop = nonEnumerableProps[nonEnumIdx];
          if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
            keys.push(prop);
          }
        }
      };

      // Retrieve the names of an object's own properties.
      // Delegates to **ECMAScript 5**'s native `Object.keys`.
      _.keys = function(obj) {
        if (!_.isObject(obj)) return [];
        if (nativeKeys) return nativeKeys(obj);
        var keys = [];
        for (var key in obj) if (has(obj, key)) keys.push(key);
        // Ahem, IE < 9.
        if (hasEnumBug) collectNonEnumProps(obj, keys);
        return keys;
      };

      // Retrieve all the property names of an object.
      _.allKeys = function(obj) {
        if (!_.isObject(obj)) return [];
        var keys = [];
        for (var key in obj) keys.push(key);
        // Ahem, IE < 9.
        if (hasEnumBug) collectNonEnumProps(obj, keys);
        return keys;
      };

      // Retrieve the values of an object's properties.
      _.values = function(obj) {
        var keys = _.keys(obj);
        var length = keys.length;
        var values = Array(length);
        for (var i = 0; i < length; i++) {
          values[i] = obj[keys[i]];
        }
        return values;
      };

      // Returns the results of applying the iteratee to each element of the object.
      // In contrast to _.map it returns an object.
      _.mapObject = function(obj, iteratee, context) {
        iteratee = cb(iteratee, context);
        var keys = _.keys(obj),
            length = keys.length,
            results = {};
        for (var index = 0; index < length; index++) {
          var currentKey = keys[index];
          results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
        }
        return results;
      };

      // Convert an object into a list of `[key, value]` pairs.
      // The opposite of _.object.
      _.pairs = function(obj) {
        var keys = _.keys(obj);
        var length = keys.length;
        var pairs = Array(length);
        for (var i = 0; i < length; i++) {
          pairs[i] = [keys[i], obj[keys[i]]];
        }
        return pairs;
      };

      // Invert the keys and values of an object. The values must be serializable.
      _.invert = function(obj) {
        var result = {};
        var keys = _.keys(obj);
        for (var i = 0, length = keys.length; i < length; i++) {
          result[obj[keys[i]]] = keys[i];
        }
        return result;
      };

      // Return a sorted list of the function names available on the object.
      // Aliased as `methods`.
      _.functions = _.methods = function(obj) {
        var names = [];
        for (var key in obj) {
          if (_.isFunction(obj[key])) names.push(key);
        }
        return names.sort();
      };

      // An internal function for creating assigner functions.
      var createAssigner = function(keysFunc, defaults) {
        return function(obj) {
          var length = arguments.length;
          if (defaults) obj = Object(obj);
          if (length < 2 || obj == null) return obj;
          for (var index = 1; index < length; index++) {
            var source = arguments[index],
                keys = keysFunc(source),
                l = keys.length;
            for (var i = 0; i < l; i++) {
              var key = keys[i];
              if (!defaults || obj[key] === void 0) obj[key] = source[key];
            }
          }
          return obj;
        };
      };

      // Extend a given object with all the properties in passed-in object(s).
      _.extend = createAssigner(_.allKeys);

      // Assigns a given object with all the own properties in the passed-in object(s).
      // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
      _.extendOwn = _.assign = createAssigner(_.keys);

      // Returns the first key on an object that passes a predicate test.
      _.findKey = function(obj, predicate, context) {
        predicate = cb(predicate, context);
        var keys = _.keys(obj), key;
        for (var i = 0, length = keys.length; i < length; i++) {
          key = keys[i];
          if (predicate(obj[key], key, obj)) return key;
        }
      };

      // Internal pick helper function to determine if `obj` has key `key`.
      var keyInObj = function(value, key, obj) {
        return key in obj;
      };

      // Return a copy of the object only containing the whitelisted properties.
      _.pick = restArguments(function(obj, keys) {
        var result = {}, iteratee = keys[0];
        if (obj == null) return result;
        if (_.isFunction(iteratee)) {
          if (keys.length > 1) iteratee = optimizeCb(iteratee, keys[1]);
          keys = _.allKeys(obj);
        } else {
          iteratee = keyInObj;
          keys = flatten(keys, false, false);
          obj = Object(obj);
        }
        for (var i = 0, length = keys.length; i < length; i++) {
          var key = keys[i];
          var value = obj[key];
          if (iteratee(value, key, obj)) result[key] = value;
        }
        return result;
      });

      // Return a copy of the object without the blacklisted properties.
      _.omit = restArguments(function(obj, keys) {
        var iteratee = keys[0], context;
        if (_.isFunction(iteratee)) {
          iteratee = _.negate(iteratee);
          if (keys.length > 1) context = keys[1];
        } else {
          keys = _.map(flatten(keys, false, false), String);
          iteratee = function(value, key) {
            return !_.contains(keys, key);
          };
        }
        return _.pick(obj, iteratee, context);
      });

      // Fill in a given object with default properties.
      _.defaults = createAssigner(_.allKeys, true);

      // Creates an object that inherits from the given prototype object.
      // If additional properties are provided then they will be added to the
      // created object.
      _.create = function(prototype, props) {
        var result = baseCreate(prototype);
        if (props) _.extendOwn(result, props);
        return result;
      };

      // Create a (shallow-cloned) duplicate of an object.
      _.clone = function(obj) {
        if (!_.isObject(obj)) return obj;
        return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
      };

      // Invokes interceptor with the obj, and then returns obj.
      // The primary purpose of this method is to "tap into" a method chain, in
      // order to perform operations on intermediate results within the chain.
      _.tap = function(obj, interceptor) {
        interceptor(obj);
        return obj;
      };

      // Returns whether an object has a given set of `key:value` pairs.
      _.isMatch = function(object, attrs) {
        var keys = _.keys(attrs), length = keys.length;
        if (object == null) return !length;
        var obj = Object(object);
        for (var i = 0; i < length; i++) {
          var key = keys[i];
          if (attrs[key] !== obj[key] || !(key in obj)) return false;
        }
        return true;
      };


      // Internal recursive comparison function for `isEqual`.
      var eq, deepEq;
      eq = function(a, b, aStack, bStack) {
        // Identical objects are equal. `0 === -0`, but they aren't identical.
        // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
        if (a === b) return a !== 0 || 1 / a === 1 / b;
        // `null` or `undefined` only equal to itself (strict comparison).
        if (a == null || b == null) return false;
        // `NaN`s are equivalent, but non-reflexive.
        if (a !== a) return b !== b;
        // Exhaust primitive checks
        var type = typeof a;
        if (type !== 'function' && type !== 'object' && typeof b != 'object') return false;
        return deepEq(a, b, aStack, bStack);
      };

      // Internal recursive comparison function for `isEqual`.
      deepEq = function(a, b, aStack, bStack) {
        // Unwrap any wrapped objects.
        if (a instanceof _) a = a._wrapped;
        if (b instanceof _) b = b._wrapped;
        // Compare `[[Class]]` names.
        var className = toString.call(a);
        if (className !== toString.call(b)) return false;
        switch (className) {
          // Strings, numbers, regular expressions, dates, and booleans are compared by value.
          case '[object RegExp]':
          // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
          case '[object String]':
            // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
            // equivalent to `new String("5")`.
            return '' + a === '' + b;
          case '[object Number]':
            // `NaN`s are equivalent, but non-reflexive.
            // Object(NaN) is equivalent to NaN.
            if (+a !== +a) return +b !== +b;
            // An `egal` comparison is performed for other numeric values.
            return +a === 0 ? 1 / +a === 1 / b : +a === +b;
          case '[object Date]':
          case '[object Boolean]':
            // Coerce dates and booleans to numeric primitive values. Dates are compared by their
            // millisecond representations. Note that invalid dates with millisecond representations
            // of `NaN` are not equivalent.
            return +a === +b;
          case '[object Symbol]':
            return SymbolProto.valueOf.call(a) === SymbolProto.valueOf.call(b);
        }

        var areArrays = className === '[object Array]';
        if (!areArrays) {
          if (typeof a != 'object' || typeof b != 'object') return false;

          // Objects with different constructors are not equivalent, but `Object`s or `Array`s
          // from different frames are.
          var aCtor = a.constructor, bCtor = b.constructor;
          if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
                                   _.isFunction(bCtor) && bCtor instanceof bCtor)
                              && ('constructor' in a && 'constructor' in b)) {
            return false;
          }
        }
        // Assume equality for cyclic structures. The algorithm for detecting cyclic
        // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

        // Initializing stack of traversed objects.
        // It's done here since we only need them for objects and arrays comparison.
        aStack = aStack || [];
        bStack = bStack || [];
        var length = aStack.length;
        while (length--) {
          // Linear search. Performance is inversely proportional to the number of
          // unique nested structures.
          if (aStack[length] === a) return bStack[length] === b;
        }

        // Add the first object to the stack of traversed objects.
        aStack.push(a);
        bStack.push(b);

        // Recursively compare objects and arrays.
        if (areArrays) {
          // Compare array lengths to determine if a deep comparison is necessary.
          length = a.length;
          if (length !== b.length) return false;
          // Deep compare the contents, ignoring non-numeric properties.
          while (length--) {
            if (!eq(a[length], b[length], aStack, bStack)) return false;
          }
        } else {
          // Deep compare objects.
          var keys = _.keys(a), key;
          length = keys.length;
          // Ensure that both objects contain the same number of properties before comparing deep equality.
          if (_.keys(b).length !== length) return false;
          while (length--) {
            // Deep compare each member
            key = keys[length];
            if (!(has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
          }
        }
        // Remove the first object from the stack of traversed objects.
        aStack.pop();
        bStack.pop();
        return true;
      };

      // Perform a deep comparison to check if two objects are equal.
      _.isEqual = function(a, b) {
        return eq(a, b);
      };

      // Is a given array, string, or object empty?
      // An "empty" object has no enumerable own-properties.
      _.isEmpty = function(obj) {
        if (obj == null) return true;
        if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
        return _.keys(obj).length === 0;
      };

      // Is a given value a DOM element?
      _.isElement = function(obj) {
        return !!(obj && obj.nodeType === 1);
      };

      // Is a given value an array?
      // Delegates to ECMA5's native Array.isArray
      _.isArray = nativeIsArray || function(obj) {
        return toString.call(obj) === '[object Array]';
      };

      // Is a given variable an object?
      _.isObject = function(obj) {
        var type = typeof obj;
        return type === 'function' || type === 'object' && !!obj;
      };

      // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError, isMap, isWeakMap, isSet, isWeakSet.
      _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error', 'Symbol', 'Map', 'WeakMap', 'Set', 'WeakSet'], function(name) {
        _['is' + name] = function(obj) {
          return toString.call(obj) === '[object ' + name + ']';
        };
      });

      // Define a fallback version of the method in browsers (ahem, IE < 9), where
      // there isn't any inspectable "Arguments" type.
      if (!_.isArguments(arguments)) {
        _.isArguments = function(obj) {
          return has(obj, 'callee');
        };
      }

      // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
      // IE 11 (#1621), Safari 8 (#1929), and PhantomJS (#2236).
      var nodelist = root.document && root.document.childNodes;
      if (typeof Int8Array != 'object' && typeof nodelist != 'function') {
        _.isFunction = function(obj) {
          return typeof obj == 'function' || false;
        };
      }

      // Is a given object a finite number?
      _.isFinite = function(obj) {
        return !_.isSymbol(obj) && isFinite(obj) && !isNaN(parseFloat(obj));
      };

      // Is the given value `NaN`?
      _.isNaN = function(obj) {
        return _.isNumber(obj) && isNaN(obj);
      };

      // Is a given value a boolean?
      _.isBoolean = function(obj) {
        return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
      };

      // Is a given value equal to null?
      _.isNull = function(obj) {
        return obj === null;
      };

      // Is a given variable undefined?
      _.isUndefined = function(obj) {
        return obj === void 0;
      };

      // Shortcut function for checking if an object has a given property directly
      // on itself (in other words, not on a prototype).
      _.has = function(obj, path) {
        if (!_.isArray(path)) {
          return has(obj, path);
        }
        var length = path.length;
        for (var i = 0; i < length; i++) {
          var key = path[i];
          if (obj == null || !hasOwnProperty.call(obj, key)) {
            return false;
          }
          obj = obj[key];
        }
        return !!length;
      };

      // Utility Functions
      // -----------------

      // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
      // previous owner. Returns a reference to the Underscore object.
      _.noConflict = function() {
        root._ = previousUnderscore;
        return this;
      };

      // Keep the identity function around for default iteratees.
      _.identity = function(value) {
        return value;
      };

      // Predicate-generating functions. Often useful outside of Underscore.
      _.constant = function(value) {
        return function() {
          return value;
        };
      };

      _.noop = function(){};

      // Creates a function that, when passed an object, will traverse that object’s
      // properties down the given `path`, specified as an array of keys or indexes.
      _.property = function(path) {
        if (!_.isArray(path)) {
          return shallowProperty(path);
        }
        return function(obj) {
          return deepGet(obj, path);
        };
      };

      // Generates a function for a given object that returns a given property.
      _.propertyOf = function(obj) {
        if (obj == null) {
          return function(){};
        }
        return function(path) {
          return !_.isArray(path) ? obj[path] : deepGet(obj, path);
        };
      };

      // Returns a predicate for checking whether an object has a given set of
      // `key:value` pairs.
      _.matcher = _.matches = function(attrs) {
        attrs = _.extendOwn({}, attrs);
        return function(obj) {
          return _.isMatch(obj, attrs);
        };
      };

      // Run a function **n** times.
      _.times = function(n, iteratee, context) {
        var accum = Array(Math.max(0, n));
        iteratee = optimizeCb(iteratee, context, 1);
        for (var i = 0; i < n; i++) accum[i] = iteratee(i);
        return accum;
      };

      // Return a random integer between min and max (inclusive).
      _.random = function(min, max) {
        if (max == null) {
          max = min;
          min = 0;
        }
        return min + Math.floor(Math.random() * (max - min + 1));
      };

      // A (possibly faster) way to get the current timestamp as an integer.
      _.now = Date.now || function() {
        return new Date().getTime();
      };

      // List of HTML entities for escaping.
      var escapeMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#x27;',
        '`': '&#x60;'
      };
      var unescapeMap = _.invert(escapeMap);

      // Functions for escaping and unescaping strings to/from HTML interpolation.
      var createEscaper = function(map) {
        var escaper = function(match) {
          return map[match];
        };
        // Regexes for identifying a key that needs to be escaped.
        var source = '(?:' + _.keys(map).join('|') + ')';
        var testRegexp = RegExp(source);
        var replaceRegexp = RegExp(source, 'g');
        return function(string) {
          string = string == null ? '' : '' + string;
          return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
        };
      };
      _.escape = createEscaper(escapeMap);
      _.unescape = createEscaper(unescapeMap);

      // Traverses the children of `obj` along `path`. If a child is a function, it
      // is invoked with its parent as context. Returns the value of the final
      // child, or `fallback` if any child is undefined.
      _.result = function(obj, path, fallback) {
        if (!_.isArray(path)) path = [path];
        var length = path.length;
        if (!length) {
          return _.isFunction(fallback) ? fallback.call(obj) : fallback;
        }
        for (var i = 0; i < length; i++) {
          var prop = obj == null ? void 0 : obj[path[i]];
          if (prop === void 0) {
            prop = fallback;
            i = length; // Ensure we don't continue iterating.
          }
          obj = _.isFunction(prop) ? prop.call(obj) : prop;
        }
        return obj;
      };

      // Generate a unique integer id (unique within the entire client session).
      // Useful for temporary DOM ids.
      var idCounter = 0;
      _.uniqueId = function(prefix) {
        var id = ++idCounter + '';
        return prefix ? prefix + id : id;
      };

      // By default, Underscore uses ERB-style template delimiters, change the
      // following template settings to use alternative delimiters.
      _.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
      };

      // When customizing `templateSettings`, if you don't want to define an
      // interpolation, evaluation or escaping regex, we need one that is
      // guaranteed not to match.
      var noMatch = /(.)^/;

      // Certain characters need to be escaped so that they can be put into a
      // string literal.
      var escapes = {
        "'": "'",
        '\\': '\\',
        '\r': 'r',
        '\n': 'n',
        '\u2028': 'u2028',
        '\u2029': 'u2029'
      };

      var escapeRegExp = /\\|'|\r|\n|\u2028|\u2029/g;

      var escapeChar = function(match) {
        return '\\' + escapes[match];
      };

      // JavaScript micro-templating, similar to John Resig's implementation.
      // Underscore templating handles arbitrary delimiters, preserves whitespace,
      // and correctly escapes quotes within interpolated code.
      // NB: `oldSettings` only exists for backwards compatibility.
      _.template = function(text, settings, oldSettings) {
        if (!settings && oldSettings) settings = oldSettings;
        settings = _.defaults({}, settings, _.templateSettings);

        // Combine delimiters into one regular expression via alternation.
        var matcher = RegExp([
          (settings.escape || noMatch).source,
          (settings.interpolate || noMatch).source,
          (settings.evaluate || noMatch).source
        ].join('|') + '|$', 'g');

        // Compile the template source, escaping string literals appropriately.
        var index = 0;
        var source = "__p+='";
        text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
          source += text.slice(index, offset).replace(escapeRegExp, escapeChar);
          index = offset + match.length;

          if (escape) {
            source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
          } else if (interpolate) {
            source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
          } else if (evaluate) {
            source += "';\n" + evaluate + "\n__p+='";
          }

          // Adobe VMs need the match returned to produce the correct offset.
          return match;
        });
        source += "';\n";

        // If a variable is not specified, place data values in local scope.
        if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

        source = "var __t,__p='',__j=Array.prototype.join," +
          "print=function(){__p+=__j.call(arguments,'');};\n" +
          source + 'return __p;\n';

        var render;
        try {
          render = new Function(settings.variable || 'obj', '_', source);
        } catch (e) {
          e.source = source;
          throw e;
        }

        var template = function(data) {
          return render.call(this, data, _);
        };

        // Provide the compiled source as a convenience for precompilation.
        var argument = settings.variable || 'obj';
        template.source = 'function(' + argument + '){\n' + source + '}';

        return template;
      };

      // Add a "chain" function. Start chaining a wrapped Underscore object.
      _.chain = function(obj) {
        var instance = _(obj);
        instance._chain = true;
        return instance;
      };

      // OOP
      // ---------------
      // If Underscore is called as a function, it returns a wrapped object that
      // can be used OO-style. This wrapper holds altered versions of all the
      // underscore functions. Wrapped objects may be chained.

      // Helper function to continue chaining intermediate results.
      var chainResult = function(instance, obj) {
        return instance._chain ? _(obj).chain() : obj;
      };

      // Add your own custom functions to the Underscore object.
      _.mixin = function(obj) {
        _.each(_.functions(obj), function(name) {
          var func = _[name] = obj[name];
          _.prototype[name] = function() {
            var args = [this._wrapped];
            push.apply(args, arguments);
            return chainResult(this, func.apply(_, args));
          };
        });
        return _;
      };

      // Add all of the Underscore functions to the wrapper object.
      _.mixin(_);

      // Add all mutator Array functions to the wrapper.
      _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
          var obj = this._wrapped;
          method.apply(obj, arguments);
          if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
          return chainResult(this, obj);
        };
      });

      // Add all accessor Array functions to the wrapper.
      _.each(['concat', 'join', 'slice'], function(name) {
        var method = ArrayProto[name];
        _.prototype[name] = function() {
          return chainResult(this, method.apply(this._wrapped, arguments));
        };
      });

      // Extracts the result from a wrapped and chained object.
      _.prototype.value = function() {
        return this._wrapped;
      };

      // Provide unwrapping proxy for some methods used in engine operations
      // such as arithmetic and JSON stringification.
      _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

      _.prototype.toString = function() {
        return String(this._wrapped);
      };
    }());
    });
    var underscore_1 = underscore._;

    // https://gist.github.com/bmershon/25a74f7b1c7cbd07e7456af1d2c07da1

    function pairNodeLinks(tree) {
        let nestedByNodes = {};
        tree.links.forEach(l => {
            let sourceKey = l.source.join(',');
            if (!nestedByNodes[sourceKey]) {
                nestedByNodes[sourceKey] = [];
            }
            nestedByNodes[sourceKey].push(l);
            let targetKey = l.target.join(',');
            if (!nestedByNodes[targetKey]) {
                nestedByNodes[targetKey] = [];
            }
            nestedByNodes[targetKey].push(l);
        });
        //Pair the results
        let pairedResults = underscore.pairs(nestedByNodes);
        return pairedResults;
    }

    /**
     * This function returns corners (three vertices) of vertices of degree two in the for mat of
     * point1, point2, point3 => point1 is the the vertex with degree two (two edges connected to it are [point1, point2] and [point1, point3] (order of the points in each edge is not important)).
     * @param tree
     * @returns {*}
     */
    function getAllV2CornersFromTree(tree) {
        let pairedResults = pairNodeLinks(tree);
        //Get all pairs with length = 2 (V2)
        let allV2 = pairedResults.filter(p => p[1].length == 2);

        let allCorners = allV2.map(v2 => {
            let corner = [];
            //First point is the common vertice
            corner.push(v2[0].split(',').map(d => +d));//map(d=>+d) is to convert the strings into digits
            //Push the source or target if they are not the common vertices of the two edges
            v2[1].forEach(link => {
                if (link.source.join(',') != v2[0]) {
                    corner.push(link.source);
                } else {
                    corner.push(link.target);
                }
            });
            return corner;
        });
        return allCorners;
    }

    /**
     * This function returns all single degree vertices from a tree
     * @param tree
     */
    function getAllV1sFromTree(tree){
        let pairedResults = pairNodeLinks(tree);
        //Get all pairs with length = 2 (V2)
        let allV1 = pairedResults.filter(p => p[1].length == 1);
        return allV1.map(v1=>v1[0].split(',').map(Number));
    }
    /**
     * Create a graph from mesh
     * @param triangles is inform of set of triangles as the result from delaunay triangulations
     */
    function createGraph (triangles) {

        function makeLink(sourceId, targetId, weight) {
            return {"source": sourceId, "target": targetId, "weight": weight};
        }

        let graph = {};
        graph.nodes = [];
        graph.links = [];
        //Creating nodes
        triangles.forEach(t => {
            for (let i = 0; i < 3; i++) {
                let id = t[i];
                if (!idExists(graph.nodes, id)) {
                    graph.nodes.push(makeNode(id));
                }
            }
        });

        //Creating links
        triangles.forEach(t => {
            for (let i = 0; i < 3; i++) {
                let p1 = t[i];
                let p2 = t[(i + 1) % 3];
                let id1 = p1;
                let id2 = p2;
                let dist = distance(p1, p2);
                let link = makeLink(id1, id2, dist);
                if (!linkExists(graph.links, link)) {
                    graph.links.push(link);
                }
            }
        });

        function distance(a, b) {
            var dx = a[0] - b[0],
                dy = a[1] - b[1];
            //For computer storage issue, some coordinates of the same distance may return different distances if we use long floating point
            //So take only 10 digits after the floating points=> this is precise enough and still have the same values for two different lines of the same distance
            return +Math.sqrt((dx * dx) + (dy * dy)).toFixed(10);
        }

        //TODO: may sort the id alphabetically => when creating => so we can just check 1 condition only.
        function linkExists(links, link) {
            for (let i = 0; i < links.length; i++) {
                if ((equalPoints(link.source, links[i].source) && equalPoints(link.target, links[i].target)) ||
                    (equalPoints(link.source, links[i].target) && equalPoints(link.target, links[i].source))) {
                    return true;
                }
            }
            return false;
        }

        return graph;
    }

    function distance$1(a, b) {
        let dx = a[0] - b[0],
            dy = a[1] - b[1];
        //For computer storage issue, some coordinates of the same distance may return different distances if we use long floating point
        //So take only 10 digits after the floating points=> this is precise enough and still have the same values for two different lines of the same distance
        return Math.round(Math.sqrt((dx * dx) + (dy * dy))*Math.pow(10, 10))/Math.pow(10, 10);
    }

    function equalPoints(id1, id2) {
        if (id1[0] === id2[0] && id1[1] === id2[1]) {
            return true;
        } else {
            return false;
        }
    }

    function idExists(nodes, id) {

        for (let i = 0; i < nodes.length; i++) {
            let node = nodes[i];
            if (equalPoints(node.id, id)) {
                return true;
            }
        }
        return false;
    }
    function makeNode(id) {
        return {"id": id};
    }
    /**
     * create the mst
     * @param graph: in form of nodes and links
     * @returns {{nodes: (selection_nodes|nodes), links: Array}}
     */
    function mst (graph) {
        let vertices = graph.nodes,
            edges = graph.links.slice(0),
            selectedEdges = [],
            forest = new DisjointSet();

        // Each vertex begins "disconnected" and isolated from all the others.
        vertices.forEach((vertex) => {
            forest.makeSet(vertex.id);
        });

        // Sort edges in descending order of weight. We will pop edges beginning
        // from the end of the array.
        edges.sort((a, b) => {
            return -(a.weight - b.weight);
        });

        while (edges.length && forest.size() > 1) {
            let edge = edges.pop();

            if (forest.find(edge.source) !== forest.find(edge.target)) {
                forest.union(edge.source, edge.target);
                selectedEdges.push(edge);
            }
        }

        return {
            nodes: vertices,
            links: selectedEdges
        }
    }


    function DisjointSet() {
        this.index_ = {};
    }

    function Node(id) {
        this.id_ = id;
        this.parent_ = this;
        this.rank_ = 0;
    }

    DisjointSet.prototype.makeSet = function (id) {
        if (!this.index_[id]) {
            let created = new Node(id);
            this.index_[id] = created;
        }
    };

    // Returns the id of the representative element of this set that (id)
    // belongs to.
    DisjointSet.prototype.find = function (id) {
        if (this.index_[id] === undefined) {
            return undefined;
        }

        let current = this.index_[id].parent_;
        while (current !== current.parent_) {
            current = current.parent_;
        }
        return current.id_;
    };

    DisjointSet.prototype.union = function (x, y) {
        let xRoot = this.index_[this.find(x)];
        let yRoot = this.index_[this.find(y)];

        if (xRoot === undefined || yRoot === undefined || xRoot === yRoot) {
            // x and y already belong to the same set.
            return;
        }

        if (xRoot.rank < yRoot.rank) { // Move x into the set y is a member of.
            xRoot.parent_ = yRoot;
        } else if (yRoot.rank_ < xRoot.rank_) { // Move y into the set x is a member of.
            yRoot.parent_ = xRoot;
        } else { // Arbitrarily choose to move y into the set x is a member of.
            yRoot.parent_ = xRoot;
            xRoot.rank_++;
        }
    };

    // Returns the current number of disjoint sets.
    DisjointSet.prototype.size = function () {
        let uniqueIndices = {};

        Object.keys(this.index_).forEach((id) => {
            let representative = this.find(id);

            uniqueIndices[id] = true;
        });

        return Object.keys(uniqueIndices).length;
    };

    /* @flow */

    /* @flow */

    /**
     * This computes the maximum number in an array.
     *
     * This runs on `O(n)`, linear time in respect to the array
     *
     * @param {Array<number>} x sample of one or more data points
     * @returns {number} maximum value
     * @throws {Error} if the the length of x is less than one
     * @example
     * max([1, 2, 3, 4]);
     * // => 4
     */
    function max(x /*: Array<number> */) /*:number*/ {

        if (x.length === 0) {
            throw new Error('max requires at least one data point');
        }

        var value = x[0];
        for (var i = 1; i < x.length; i++) {
            // On the first iteration of this loop, max is
            // undefined and is thus made the maximum element in the array
            if (x[i] > value) {
                value = x[i];
            }
        }
        return value;
    }

    /* @flow */

    /**
     * This is the internal implementation of quantiles: when you know
     * that the order is sorted, you don't need to re-sort it, and the computations
     * are faster.
     *
     * @param {Array<number>} x sample of one or more data points
     * @param {number} p desired quantile: a number between 0 to 1, inclusive
     * @returns {number} quantile value
     * @throws {Error} if p ix outside of the range from 0 to 1
     * @throws {Error} if x is empty
     * @example
     * quantileSorted([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9
     */
    function quantileSorted(x /*: Array<number> */, p /*: number */)/*: number */ {
        var idx = x.length * p;
        if (x.length === 0) {
            throw new Error('quantile requires at least one data point.');
        } else if (p < 0 || p > 1) {
            throw new Error('quantiles must be between 0 and 1');
        } else if (p === 1) {
            // If p is 1, directly return the last element
            return x[x.length - 1];
        } else if (p === 0) {
            // If p is 0, directly return the first element
            return x[0];
        } else if (idx % 1 !== 0) {
            // If p is not integer, return the next element in array
            return x[Math.ceil(idx) - 1];
        } else if (x.length % 2 === 0) {
            // If the list has even-length, we'll take the average of this number
            // and the next value, if there is one
            return (x[idx - 1] + x[idx]) / 2;
        } else {
            // Finally, in the simple case of an integer value
            // with an odd-length list, return the x value at the index.
            return x[idx];
        }
    }

    /* @flow */

    /**
     * Rearrange items in `arr` so that all items in `[left, k]` range are the smallest.
     * The `k`-th element will have the `(k - left + 1)`-th smallest value in `[left, right]`.
     *
     * Implements Floyd-Rivest selection algorithm https://en.wikipedia.org/wiki/Floyd-Rivest_algorithm
     *
     * @param {Array<number>} arr input array
     * @param {number} k pivot index
     * @param {number} [left] left index
     * @param {number} [right] right index
     * @returns {void} mutates input array
     * @example
     * var arr = [65, 28, 59, 33, 21, 56, 22, 95, 50, 12, 90, 53, 28, 77, 39];
     * quickselect(arr, 8);
     * // = [39, 28, 28, 33, 21, 12, 22, 50, 53, 56, 59, 65, 90, 77, 95]
     */
    function quickselect(arr/*: Array<number> */, k/*: number */, left/*: ?number */, right/*: ?number */)/*: void */ {
        left = left || 0;
        right = right || (arr.length - 1);

        while (right > left) {
            // 600 and 0.5 are arbitrary constants chosen in the original paper to minimize execution time
            if (right - left > 600) {
                var n = right - left + 1;
                var m = k - left + 1;
                var z = Math.log(n);
                var s = 0.5 * Math.exp(2 * z / 3);
                var sd = 0.5 * Math.sqrt(z * s * (n - s) / n);
                if (m - n / 2 < 0) sd *= -1;
                var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));
                var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));
                quickselect(arr, k, newLeft, newRight);
            }

            var t = arr[k];
            var i = left;
            var j = right;

            swap$1(arr, left, k);
            if (arr[right] > t) swap$1(arr, left, right);

            while (i < j) {
                swap$1(arr, i, j);
                i++;
                j--;
                while (arr[i] < t) i++;
                while (arr[j] > t) j--;
            }

            if (arr[left] === t) swap$1(arr, left, j);
            else {
                j++;
                swap$1(arr, j, right);
            }

            if (j <= k) left = j + 1;
            if (k <= j) right = j - 1;
        }
    }

    function swap$1(arr, i, j) {
        var tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }

    /* @flow */

    /**
     * The [quantile](https://en.wikipedia.org/wiki/Quantile):
     * this is a population quantile, since we assume to know the entire
     * dataset in this library. This is an implementation of the
     * [Quantiles of a Population](http://en.wikipedia.org/wiki/Quantile#Quantiles_of_a_population)
     * algorithm from wikipedia.
     *
     * Sample is a one-dimensional array of numbers,
     * and p is either a decimal number from 0 to 1 or an array of decimal
     * numbers from 0 to 1.
     * In terms of a k/q quantile, p = k/q - it's just dealing with fractions or dealing
     * with decimal values.
     * When p is an array, the result of the function is also an array containing the appropriate
     * quantiles in input order
     *
     * @param {Array<number>} x sample of one or more numbers
     * @param {Array<number> | number} p the desired quantile, as a number between 0 and 1
     * @returns {number} quantile
     * @example
     * quantile([3, 6, 7, 8, 8, 9, 10, 13, 15, 16, 20], 0.5); // => 9
     */
    function quantile(x/*: Array<number> */, p/*: Array<number> | number */)/*: Array<number> | number */ {
        var copy = x.slice();

        if (Array.isArray(p)) {
            // rearrange elements so that each element corresponding to a requested
            // quantile is on a place it would be if the array was fully sorted
            multiQuantileSelect(copy, p);
            // Initialize the result array
            var results = [];
            // For each requested quantile
            for (var i = 0; i < p.length; i++) {
                results[i] = quantileSorted(copy, p[i]);
            }
            return results;
        } else {
            var idx = quantileIndex(copy.length, p);
            quantileSelect(copy, idx, 0, copy.length - 1);
            return quantileSorted(copy, p);
        }
    }

    function quantileSelect(arr, k, left, right) {
        if (k % 1 === 0) {
            quickselect(arr, k, left, right);
        } else {
            k = Math.floor(k);
            quickselect(arr, k, left, right);
            quickselect(arr, k + 1, k + 1, right);
        }
    }

    function multiQuantileSelect(arr, p) {
        var indices = [0];
        for (var i = 0; i < p.length; i++) {
            indices.push(quantileIndex(arr.length, p[i]));
        }
        indices.push(arr.length - 1);
        indices.sort(compare$1);

        var stack = [0, indices.length - 1];

        while (stack.length) {
            var r = Math.ceil(stack.pop());
            var l = Math.floor(stack.pop());
            if (r - l <= 1) continue;

            var m = Math.floor((l + r) / 2);
            quantileSelect(arr, indices[m], indices[l], indices[r]);

            stack.push(l, m, m, r);
        }
    }

    function compare$1(a, b) {
        return a - b;
    }

    function quantileIndex(len /*: number */, p /*: number */)/*:number*/ {
        var idx = len * p;
        if (p === 1) {
            // If p is 1, directly return the last index
            return len - 1;
        } else if (p === 0) {
            // If p is 0, directly return the first index
            return 0;
        } else if (idx % 1 !== 0) {
            // If index is not integer, return the next index in array
            return Math.ceil(idx) - 1;
        } else if (len % 2 === 0) {
            // If the list has even-length, we'll return the middle of two indices
            // around quantile to indicate that we need an average value of the two
            return idx - 0.5;
        } else {
            // Finally, in the simple case of an integer index
            // with an odd-length list, return the index
            return idx;
        }
    }
    var LOGSQRT2PI = Math.log(Math.sqrt(2 * Math.PI));

    /* @flow */

    var SQRT_2PI = Math.sqrt(2 * Math.PI);

    /* @flow */

    var SQRT_2PI$1 = Math.sqrt(2 * Math.PI);

    class Clumpy {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns clumpy score
         * @returns {number}
         */
        score() {
            let self = this;
            return max(this.tree.links.map(link=>1-maxLength(runtGraph(link))/link.weight));
            function runtGraph(link){
                let greaterLinks = self.tree.links.filter(l=>l.weight >= link.weight);
                let sourceConnectedNodes = [link.source];
                let sourceConnectedLinks = [];
                let targetConnectedNodes = [link.target];
                let targetConnectedLinks = [];
                greaterLinks.forEach(link=>{
                    //Either source or target in the sourceConnectedNodes then it is connected
                    if(pointExists(sourceConnectedNodes, link.source)){
                        sourceConnectedNodes.push(link.target);
                        sourceConnectedLinks.push(link);
                    }else if(pointExists(sourceConnectedNodes, link.target)){
                        sourceConnectedNodes.push(link.source);
                        sourceConnectedLinks.push(link);
                    }

                    if(pointExists(targetConnectedNodes, link.source)){
                        targetConnectedNodes.push(link.target);
                        targetConnectedLinks.push(link);
                    }else if(pointExists(targetConnectedNodes, link.target)){
                        targetConnectedNodes.push(link.source);
                        targetConnectedLinks.push(link);
                    }
                });
                return sourceConnectedLinks.length < targetConnectedLinks.length?sourceConnectedLinks:targetConnectedLinks;
            }
            function maxLength(runtGraph){
                return max(runtGraph.map(l=>l.weight));
            }
        }
    }
    function pointExists(points, point){
        for (let i = 0; i < points.length; i++) {
            let point1 = points[i];
            if (equalPoints(point1, point)) {
                return true;
            }
        }
        return false;
    }

    class Outlying {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns outlying score
         * @returns {number}
         */
        score() {
            let tree = this.tree,
                totalLengths = 0,
                totalOutlyingLengths = 0,
                allLengths = tree.links.map(l => l.weight),
                q1 = quantile(allLengths, 0.25),
                q3 = quantile(allLengths, 0.75),
                iqr = q3 - q1;
            let upperBound = q3+1.5*iqr;
            tree.links.forEach(l => {
                totalLengths += l.weight;
                if (l.weight > upperBound) {
                    totalOutlyingLengths += l.weight;
                    l.isOutlying = true;
                }
            });
            return totalOutlyingLengths / totalLengths;
        }

        /**
         * Returns outlying links
         */
        links() {
            return this.tree.links.filter(l => l.isOutlying);
        }

        /**
         * Remove outlying links and nodes and return a new tree without outlying points/edges
         */
        removeOutlying() {
            var newTree = JSON.parse(JSON.stringify(this.tree));
            //Remove outlying links
            newTree.links = newTree.links.filter(l => !l.isOutlying);
            //Remove outlying nodes (nodes are not in any none-outlying links
            let allNodesWithLinks = [];
            newTree.links.forEach(l => {
                allNodesWithLinks.push(l.source);
                allNodesWithLinks.push(l.target);
            });
            allNodesWithLinks = underscore.uniq(allNodesWithLinks, false, d => d.join(','));
            newTree.nodes = allNodesWithLinks.map(n=>{
                return makeNode(n);
            });
            return newTree;
        }

        /**
         * Returns the outlying points (in form of points, not node object).
         * @returns {Array}
         */
        points(){
            let newTree = this.removeOutlying();
            let newNodes = newTree.nodes;
            let oldNodes = this.tree.nodes;
            let ops = [];
            oldNodes.forEach(n=>{
                //.id since we are accessing to points and the node is in form of {id: thePoint}
                if(!pointExists(newNodes.map(n=>n.id), n.id)){
                    ops.push(n.id);
                }
            });
            return ops;
        }
    }

    class Skewed {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns skewed score
         * @returns {number}
         */
        score() {
            let allLengths = this.tree.links.map(l=>l.weight),
            q90 = quantile(allLengths, .9),
            q50 = quantile(allLengths, .5),
            q10 = quantile(allLengths, .1);
            if(q90!=q10){
                return (q90-q50)/(q90-q10);
            }else{
                return 0;
            }

        }
    }

    class Sparse {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns sparse score
         * @returns {number}
         */
        score() {
            let allLengths = this.tree.links.map(l=>l.weight),
                q90 = quantile(allLengths, .9);
            return q90;
        }
    }

    class Striated {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns striated score
         * @returns {number}
         */
        score() {
            //Loop through the nodes.
            let verticesCount = this.tree.nodes.length;
            let allObtuseV2CornersCount = this.getAllObtuseV2Corners().length;
            return allObtuseV2CornersCount / verticesCount;
        }

        getAllObtuseV2Corners() {
            let allV2Corners = this.getAllV2Corners();
            let allObtuseV2Corners = [];
            allV2Corners.forEach(corner => {
                let cs = cosine(corner[0], corner[1], corner[2]);
                if (cs < -.75) {
                    allObtuseV2Corners.push(corner);
                }
            });
            return allObtuseV2Corners;

            function cosine(p1, p2, p3) {
                let p12 = distance$1(p1, p2),
                    p13 = distance$1(p1, p3),
                    p23 = distance$1(p2, p3);
                return ((Math.pow(p12, 2)) + (Math.pow(p13, 2)) - (Math.pow(p23, 2))) / (2 * p12 * p13);
            }
        }

        /**
         * This function returns corners (three vertices) of vertices of degree two in the for mat of
         * point1, point2, point3 => point1 is the the vertex with degree two (two edges connected to it are [point1, point2] and [point1, point3] (order of the points in each edge is not important)).
         */
        getAllV2Corners() {
            return getAllV2CornersFromTree(this.tree);
        }
    }

    class ConcaveHull{
        constructor(distance){
            if(!distance){
                this.calculateDistance = this.stdevDistance;
            }
            else if(typeof distance === "function"){
                this.calculateDistance = distance;
            }else if(typeof distance === "number"){
                this.calculateDistance = function () {return distance;};
            }
            this.padding = 0;
        }

        /**
         * generate the concave hull.
         * @param delaunay is inform of coordinates of triangulated triangles (3 points per triangle)
         * @returns {Array}
         */
        concaveHull(delaunay) {

            let longEdge = this.calculateDistance(delaunay);

            let mesh = delaunay.filter(function (d) {
                return distance(d[0], d[1]) < longEdge && distance(d[0], d[2]) < longEdge && distance(d[1], d[2]) < longEdge
            });

            var counts = {},
                edges = {},
                r,
                result = [];
            // Traverse the edges of all triangles and discard any edges that appear twice.
            mesh.forEach(function (triangle) {
                for (var i = 0; i < 3; i++) {
                    var edge = [triangle[i], triangle[(i + 1) % 3]].sort(ascendingCoords).map(String);
                    (edges[edge[0]] = (edges[edge[0]] || [])).push(edge[1]);
                    (edges[edge[1]] = (edges[edge[1]] || [])).push(edge[0]);
                    var k = edge.join(":");
                    if (counts[k]) delete counts[k];
                    else counts[k] = 1;
                }
            });

            while (1) {
                var k = null;
                // Pick an arbitrary starting point on a boundary.
                for (k in counts) break;
                if (k == null) break;
                result.push(r = k.split(":").map(function (d) {
                    return d.split(",").map(Number);
                }));
                delete counts[k];
                var q = r[1];
                while (q[0] !== r[0][0] || q[1] !== r[0][1]) {
                    var p = q,
                        qs = edges[p.join(",")],
                        n = qs.length;
                    for (var i = 0; i < n; i++) {
                        q = qs[i].split(",").map(Number);
                        var edge = [p, q].sort(ascendingCoords).join(":");
                        if (counts[edge]) {
                            delete counts[edge];
                            r.push(q);
                            break;
                        }
                    }
                }
            }

            if (this.padding !== 0) {
                result = pad(result, this.padding);
            }
            //TODO: May need to reconsider this case
            //If it returns in more than one set of data => we combine them and return the unique result.
            result = underscore.flatten(result, true);
            result = underscore.uniq(result, false, d => d.join(','));
            return sortVerticies(result);
            function sortVerticies(points) {
                let center = findCentroid(points);
                points.sort((a, b) => {
                    let a1 = (toDegrees(Math.atan2(a[0] - center[0], a[1] - center[1])) + 360) % 360;
                    let a2 = (toDegrees(Math.atan2(b[0] - center[0], b[1] - center[1])) + 360) % 360;
                    return Math.round(a1 - a2);
                });
                return points;
                function toDegrees (angle) {
                    return angle * (180 / Math.PI);
                }
                function findCentroid(points) {
                    let x = 0;
                    let y = 0;
                    points.forEach(p=>{
                        x += p[0];
                        y += p[1];
                    });
                    let center = [];
                    center.push(x / points.length);
                    center.push(y / points.length);
                    return center;
                }
            }
            function distance(a, b) {
                var dx = a[0] - b[0],
                    dy = a[1] - b[1];
                return Math.sqrt((dx * dx) + (dy * dy));
            }

            function pad(bounds, amount) {
                var result = [];
                bounds.forEach(function (bound) {
                    var padded = [];

                    var area = 0;
                    bound.forEach(function (p, i) {
                        // http://forums.esri.com/Thread.asp?c=2&f=1718&t=174277
                        // Area = Area + (X2 - X1) * (Y2 + Y1) / 2

                        var im1 = i - 1;
                        if (i == 0) {
                            im1 = bound.length - 1;
                        }
                        var pm = bound[im1];
                        area += (p[0] - pm[0]) * (p[1] + pm[1]) / 2;
                    });
                    var handedness = 1;
                    if (area > 0) handedness = -1;
                    bound.forEach(function (p, i) {
                        // average the tangent between
                        var im1 = i - 1;
                        if (i == 0) {
                            im1 = bound.length - 2;
                        }
                        //var tp = getTangent(p, bound[ip1]);
                        var tm = getTangent(p, bound[im1]);
                        //var avg = { x: (tp.x + tm.x)/2, y: (tp.y + tm.y)/2 };
                        //var normal = rotate2d(avg, 90);
                        var normal = rotate2d(tm, 90 * handedness);
                        padded.push([p[0] + normal.x * amount, p[1] + normal.y * amount]);
                    });
                    result.push(padded);
                });
                return result
            }

            function getTangent(a, b) {
                var vector = {x: b[0] - a[0], y: b[1] - a[1]};
                var magnitude = Math.sqrt(vector.x * vector.x + vector.y * vector.y);
                vector.x /= magnitude;
                vector.y /= magnitude;
                return vector
            }

            function rotate2d(vector, angle) {
                //rotate a vector
                angle *= Math.PI / 180; //convert to radians
                return {
                    x: vector.x * Math.cos(angle) - vector.y * Math.sin(angle),
                    y: vector.x * Math.sin(angle) + vector.y * Math.cos(angle)
                }
            }

            function ascendingCoords(a, b) {
                return a[0] === b[0] ? b[1] - a[1] : b[0] - a[0];
            }
        }
        stdevDistance(delaunay) {
            var sides = [];
            delaunay.forEach(function (d) {
                sides.push(distance(d[0], d[1]));
                sides.push(distance(d[0], d[2]));
                sides.push(distance(d[1], d[2]));
            });

            var dev = d3.deviation(sides);
            var mean = d3.mean(sides);

            return mean + dev;
        }
        q90Distance(delaunay){

        }
    }

    function area$1(polygon) {
      var i = -1,
          n = polygon.length,
          a,
          b = polygon[n - 1],
          area = 0;

      while (++i < n) {
        a = b;
        b = polygon[i];
        area += a[1] * b[0] - a[0] * b[1];
      }

      return area / 2;
    }

    // Returns the 2D cross product of AB and AC vectors, i.e., the z-component of

    function length(polygon) {
      var i = -1,
          n = polygon.length,
          b = polygon[n - 1],
          xa,
          ya,
          xb = b[0],
          yb = b[1],
          perimeter = 0;

      while (++i < n) {
        xa = xb;
        ya = yb;
        b = polygon[i];
        xb = b[0];
        yb = b[1];
        xa -= xb;
        ya -= yb;
        perimeter += Math.sqrt(xa * xa + ya * ya);
      }

      return perimeter;
    }

    class Convex {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
            this.delaunay = Delaunator.from(this.tree.nodes.map(d => d.id));
        }

        /**
         * Returns convex score
         * @returns {number}
         */
        score() {
            return area$1(this.concaveHull())/area$1(this.convexHull());
        }
        concaveHull() {
            //Use q90 as the cutoff distance.
            let allLengths = this.tree.links.map(l => l.weight),
                q90 = quantile(allLengths, 0.9),
                concaveHull = new ConcaveHull(q90).concaveHull(this.delaunay.triangleCoordinates());
            return concaveHull;
        }

        convexHull() {
            let hull$$1 = this.delaunay.hull;
            let convexHull = [];
            let e = hull$$1;
            do {
                convexHull.push([e.x, e.y]);
                e = e.next;
            } while (e != hull$$1);
            return convexHull;
        }
    }

    class Skinny {
        constructor(alphaHull) {
            //Clone it in order to avoid modifying it.
            this.alphaHull = alphaHull.slice(0);
        }
        /**
         * Returns skinny score
         * @returns {number}
         */
        score() {
            return 1 - Math.sqrt(4*Math.PI*area$1(this.alphaHull))/length(this.alphaHull);
        }
    }

    class Stringy {
        constructor(tree) {
            //Clone the tree to avoid modifying it
            this.tree = JSON.parse(JSON.stringify(tree));
        }

        /**
         * Returns striated score
         * @returns {number}
         */
        score() {
            //Loop through the nodes.
            let verticesCount = this.tree.nodes.length;
            let v2Count = this.getAllV2Corners().length;
            let v1Count = this.getAllV1s().length;
            return v2Count/(verticesCount-v1Count);
        }

        /**
         * This function returns corners (three vertices) of vertices of degree two in the for mat of
         * point1, point2, point3 => point1 is the the vertex with degree two (two edges connected to it are [point1, point2] and [point1, point3] (order of the points in each edge is not important)).
         * @returns {Array}
         */
        getAllV2Corners(){
            return getAllV2CornersFromTree(this.tree);
        }

        /**
         * This function returns
         * @returns {Array}
         */
        getAllV1s(){
            return getAllV1sFromTree(this.tree);
        }
    }

    class Monotonic {
        constructor(points) {
            //Clone it in order to avoid modifying it.
            this.points = points.slice(0);
        }
        /**
         * Returns monotonic score
         * @returns {number}
         */
        score() {
            let xArr = [];
            let yArr = [];
            this.points.forEach(p=>{
                xArr.push(p[0]);
                yArr.push(p[1]);
            });
            let r = computeSpearmans(xArr, yArr);
            return Math.pow(r, 2);

            /**Adopted from: https://bl.ocks.org/nkullman/f65d5619843dc22e061d957249121408**/

            function computeSpearmans(arrX, arrY) {
                // simple error handling for input arrays of nonequal lengths
                if (arrX.length !== arrY.length) { return null; }

                // number of observations
                let n = arrX.length;

                // rank datasets
                let xRanked = rankArray(arrX),
                    yRanked = rankArray(arrY);

                // sum of distances between ranks
                let dsq = 0;
                for (let i = 0; i < n; i++) {
                    dsq += Math.pow(xRanked[i] - yRanked[i], 2);
                }

                // compute correction for ties
                let xTies = countTies(arrX),
                    yTies = countTies(arrY);
                let xCorrection = 0,
                    yCorrection = 0;
                for (let tieLength in xTies) {
                    xCorrection += xTies[tieLength] * tieLength * (Math.pow(tieLength, 2) - 1);
                }
                xCorrection /= 12.0;
                for (let tieLength in yTies) {
                    yCorrection += yTies[tieLength] * tieLength * (Math.pow(tieLength, 2) - 1);
                }
                yCorrection /= 12.0;

                // denominator
                let denominator = n * (Math.pow(n, 2) - 1) / 6.0;

                // compute rho
                let rho = denominator - dsq - xCorrection - yCorrection;
                rho /= Math.sqrt((denominator - 2 * xCorrection) * (denominator - 2 * yCorrection));

                return rho;
            }
            /** Computes the rank array for arr, where each entry in arr is
             * assigned a value 1 thru n, where n is arr.length.
             *
             * Tied entries in arr are each given the average rank of the ties.
             * Lower ranks are not increased
             */
            function rankArray(arr) {

                // ranking without averaging
                let sorted = arr.slice().sort(function (a, b) { return b - a });
                let ranks = arr.slice().map(function (v) { return sorted.indexOf(v) + 1 });

                // counts of each rank
                let counts = {};
                ranks.forEach(function (x) { counts[x] = (counts[x] || 0) + 1; });

                // average duplicates
                ranks = ranks.map(function (x) { return x + 0.5 * ((counts[x] || 0) - 1); });

                return ranks;
            }
            /** Counts the number of ties in arr, and returns
             * an object with
             * a key for each tie length (an entry n for each n-way tie) and
             * a value corresponding to the number of key-way (n-way) ties
             */
             function countTies(arr) {
                let ties = {},
                    arrSorted = arr.slice().sort(),
                    currValue = arrSorted[0],
                    tieLength = 1;

                for (let i = 1; i < arrSorted.length; i++) {
                    if (arrSorted[i] === currValue) {
                        tieLength++;
                    } else {
                        if (tieLength > 1) {
                            if (ties[tieLength] === undefined) ties[tieLength] = 0;
                            ties[tieLength]++;
                        }
                        currValue = arrSorted[i];
                        tieLength = 1;
                    }
                }
                if (tieLength > 1) {
                    if (ties[tieLength] === undefined) ties[tieLength] = 0;
                    ties[tieLength]++;
                }
                return ties;
            }
        }
    }

    (function(window){
        /**
         * initialize a scagnostic object
         * @param points
         * @param width
         * @param height
         * @param binningRadius
         * @returns {*[][]}
         */
        window.scagnostics = function(points, width, height, binningRadius) {
            /******This section is about the binner and binning results******/
            let binner = new Binner().radius(binningRadius).extent([[0, 0], [width, height]]);
            //Calculation
            let bins = binner.hexbin(points);
            let sites = bins.map(d => [d.x, d.y]); //=>sites are the set of centers of all bins
            //Assigning output results
            outputValue("binner", binner);
            outputValue("bins", bins);
            outputValue("binnedSites", sites);

            /******This section is about the triangulating and triangulating results******/
            //Triangulation calculation
            let delaunay = Delaunator.from(sites);
            let triangles = delaunay.triangles;
            let triangleCoordinates = delaunay.triangleCoordinates();
            //Assigning output values
            outputValue("delaunay", delaunay);
            outputValue("triangles", triangles);
            outputValue("triangleCoordinates", triangleCoordinates);

            /******This section is about the spanning tree and spanning tree results******/
                //Spanning tree calculation
            let graph = createGraph(triangleCoordinates);
            let mstree = mst(graph);
            //Assigning the output values
            outputValue("graph", graph);
            outputValue("mst", mstree);

            /******This section is about the outlying score and outlying score results******/
            let outlying = new Outlying(mstree);
            let outlyingScore = outlying.score();
            let outlyingLinks = outlying.links();
            let outlyingPoints = outlying.points();
            let noOutlyingTree = outlying.removeOutlying();
            outputValue("outlyingScore", outlyingScore);
            outputValue("outlyingLinks", outlyingLinks);
            outputValue("outlyingPoints", outlyingPoints);
            outputValue("noOutlyingTree", noOutlyingTree);

            /******This section is about the skewed score and skewed score results******/
            let skewed = new Skewed(noOutlyingTree);
            outputValue("skewedScore", skewed.score());

            /******This section is about the sparse score and sparse score results******/
            let sparse = new Sparse(noOutlyingTree);
            outputValue("sparseScore", sparse.score());

            /******This section is about the clumpy score and clumpy score results******/
            let clumpy = new Clumpy(noOutlyingTree);
            outputValue("clumpyScore", clumpy.score());

            /******This section is about the striated score and striated score results******/
            let striated = new Striated(noOutlyingTree);
            let v2Corners = striated.getAllV2Corners();
            let obtuseV2Corners = striated.getAllObtuseV2Corners();
            outputValue("striatedScore", striated.score());
            outputValue("v2Corners", v2Corners);
            outputValue("obtuseV2Corners", obtuseV2Corners);

            /******This section is about the convex hull and convex hull results******/
            let convex = new Convex(noOutlyingTree);
            let convexHull = convex.convexHull();
            outputValue("convexHull", convexHull);

            /******This section is about the concave hull and concave hull results******/
            let concaveHull = convex.concaveHull();
            outputValue("concaveHull", concaveHull);

            /******This section is about the convex score and convex score results******/
            let convexScore = convex.score();
            outputValue("convexScore", convexScore);

            /******This section is about the skinny score and skinny score results******/
            let skinny = new Skinny(concaveHull);
            let skinnyScore = skinny.score();
            outputValue("skinnyScore", skinnyScore);

            /******This section is about the stringy score and stringy score results******/
            let stringy = new Stringy(noOutlyingTree);
            let v1s = stringy.getAllV1s();
            let stringyScore = stringy.score();
            outputValue("v1s", v1s);
            outputValue("stringyScore", stringyScore);

            /******This section is about the monotonic score and monotonic score results******/
            let monotonic = new Monotonic(noOutlyingTree.nodes.map(n=>n.id));
            let monotonicScore = monotonic.score();
            outputValue("monotonicScore", monotonicScore);

            return window.scagnostics;
            function outputValue(name, value){
                window.scagnostics[name] = value;
            }
        };

    })(window);

}());
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NhZ25vc3RpY3MubWluLmpzIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2Jpbm5lci5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvZGVsYXVuYXRvci5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy91bmRlcnNjb3JlL3VuZGVyc2NvcmUuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2tydXNrYWwtbXN0LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL3NpbXBsZS1zdGF0aXN0aWNzL2Rpc3Qvc2ltcGxlLXN0YXRpc3RpY3MubWpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jbHVtcHkuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL291dGx5aW5nLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9za2V3ZWQuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL3NwYXJzZS5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvc3RyaWF0ZWQuanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL2NvbmNhdmVIdWxsLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL2QzLXBvbHlnb24vc3JjL2FyZWEuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtcG9seWdvbi9zcmMvY3Jvc3MuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvZDMtcG9seWdvbi9zcmMvbGVuZ3RoLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvbW9kdWxlcy9jb252ZXguanMiLCIuLi8uLi9zcmMvc2NyaXB0cy9tb2R1bGVzL3NraW5ueS5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvc3RyaW5neS5qcyIsIi4uLy4uL3NyYy9zY3JpcHRzL21vZHVsZXMvbW9ub3RvbmljLmpzIiwiLi4vLi4vc3JjL3NjcmlwdHMvc2NhZ25vc3RpY3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9JbnNwaXJlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9kMy9kMy1oZXhiaW4vYmxvYi9tYXN0ZXIvc3JjL2hleGJpbi5qc1xuZXhwb3J0IGZ1bmN0aW9uIEJpbm5lcigpe1xuICAgIHZhciB0aGlyZFBpID0gTWF0aC5QSS8zLFxuICAgIGFuZ2xlcyA9IFswLCB0aGlyZFBpLCAyKnRoaXJkUGksIDMqdGhpcmRQaSwgNCp0aGlyZFBpLCA1KnRoaXJkUGldO1xuXG4gICAgZnVuY3Rpb24gcG9pbnRYKGQpe1xuICAgICAgICByZXR1cm4gZFswXTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcG9pbnRZKGQpe1xuICAgICAgICByZXR1cm4gZFsxXTtcbiAgICB9XG4gICAgdmFyIHgwID0gMCxcbiAgICAgICAgeTAgPSAwLFxuICAgICAgICB4MSA9IDEsXG4gICAgICAgIHkxID0gMSxcbiAgICAgICAgeCA9IHBvaW50WCxcbiAgICAgICAgeSA9IHBvaW50WSxcbiAgICAgICAgcixcbiAgICAgICAgZHgsXG4gICAgICAgIGR5O1xuXG4gICAgZnVuY3Rpb24gaGV4YmluKHBvaW50cyl7XG4gICAgICAgIHZhciBiaW5zQnlJZCA9IHt9LCBiaW5zID0gW10sIGksIG4gPSBwb2ludHMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihweCA9ICt4LmNhbGwobnVsbCwgcG9pbnQgPSBwb2ludHNbaV0sIGksIHBvaW50cykpXG4gICAgICAgICAgICAgICAgfHwgaXNOYU4ocHkgPSAreS5jYWxsKG51bGwsIHBvaW50LCBpLCBwb2ludHMpKSkgY29udGludWU7XG5cbiAgICAgICAgICAgIHZhciBwb2ludCxcbiAgICAgICAgICAgICAgICBweCxcbiAgICAgICAgICAgICAgICBweSxcbiAgICAgICAgICAgICAgICBwaiA9IE1hdGgucm91bmQocHkgPSBweSAvIGR5KSxcbiAgICAgICAgICAgICAgICBwaSA9IE1hdGgucm91bmQocHggPSBweCAvIGR4IC0gKHBqICYgMSkgLyAyKSxcbiAgICAgICAgICAgICAgICBweTEgPSBweSAtIHBqO1xuXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocHkxKSAqIDMgPiAxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHB4MSA9IHB4IC0gcGksXG4gICAgICAgICAgICAgICAgICAgIHBpMiA9IHBpICsgKHB4IDwgcGkgPyAtMSA6IDEpIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcGoyID0gcGogKyAocHkgPCBwaiA/IC0xIDogMSksXG4gICAgICAgICAgICAgICAgICAgIHB4MiA9IHB4IC0gcGkyLFxuICAgICAgICAgICAgICAgICAgICBweTIgPSBweSAtIHBqMjtcbiAgICAgICAgICAgICAgICBpZiAocHgxICogcHgxICsgcHkxICogcHkxID4gcHgyICogcHgyICsgcHkyICogcHkyKSBwaSA9IHBpMiArIChwaiAmIDEgPyAxIDogLTEpIC8gMiwgcGogPSBwajI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpZCA9IHBpICsgXCItXCIgKyBwaiwgYmluID0gYmluc0J5SWRbaWRdO1xuICAgICAgICAgICAgaWYgKGJpbikgYmluLnB1c2gocG9pbnQpO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYmlucy5wdXNoKGJpbiA9IGJpbnNCeUlkW2lkXSA9IFtwb2ludF0pO1xuICAgICAgICAgICAgICAgIGJpbi54ID0gKHBpICsgKHBqICYgMSkgLyAyKSAqIGR4O1xuICAgICAgICAgICAgICAgIGJpbi55ID0gcGogKiBkeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBiaW5zO1xuICAgIH1cbiAgICBmdW5jdGlvbiBoZXhhZ29uKHJhZGl1cyl7XG4gICAgICAgIHZhciB4MCA9IDAsIHkwID0gMDtcbiAgICAgICAgcmV0dXJuIGFuZ2xlcy5tYXAoZnVuY3Rpb24oYW5nbGUpIHtcbiAgICAgICAgICAgIHZhciB4MSA9IE1hdGguc2luKGFuZ2xlKSAqIHJhZGl1cyxcbiAgICAgICAgICAgICAgICB5MSA9IC1NYXRoLmNvcyhhbmdsZSkgKiByYWRpdXMsXG4gICAgICAgICAgICAgICAgZHggPSB4MSAtIHgwLFxuICAgICAgICAgICAgICAgIGR5ID0geTEgLSB5MDtcbiAgICAgICAgICAgIHgwID0geDEsIHkwID0geTE7XG4gICAgICAgICAgICByZXR1cm4gW2R4LCBkeV07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vRXhwb3J0IGl0XG4gICAgdGhpcy5oZXhiaW4gPSBoZXhiaW47XG4gICAgdGhpcy5oZXhhZ29uID0gZnVuY3Rpb24ocmFkaXVzKXtcbiAgICAgICAgcmV0dXJuIFwibVwiICsgaGV4YWdvbihyYWRpdXMgPT0gbnVsbCA/IHIgOiArcmFkaXVzKS5qb2luKFwibFwiKSArIFwielwiO1xuICAgIH07XG4gICAgdGhpcy5jZW50ZXJzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGNlbnRlcnMgPSBbXSxcbiAgICAgICAgICAgIGogPSBNYXRoLnJvdW5kKHkwIC8gZHkpLFxuICAgICAgICAgICAgaSA9IE1hdGgucm91bmQoeDAgLyBkeCk7XG4gICAgICAgIGZvciAodmFyIHkgPSBqICogZHk7IHkgPCB5MSArIHI7IHkgKz0gZHksICsraikge1xuICAgICAgICAgICAgZm9yICh2YXIgeCA9IGkgKiBkeCArIChqICYgMSkgKiBkeCAvIDI7IHggPCB4MSArIGR4IC8gMjsgeCArPSBkeCkge1xuICAgICAgICAgICAgICAgIGNlbnRlcnMucHVzaChbeCwgeV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXJzO1xuICAgIH07XG4gICAgdGhpcy5tZXNoID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGZyYWdtZW50ID0gaGV4YWdvbihyKS5zbGljZSgwLCA0KS5qb2luKFwibFwiKTtcbiAgICAgICAgcmV0dXJuIGhleGJpbi5jZW50ZXJzKCkubWFwKGZ1bmN0aW9uKHApIHsgcmV0dXJuIFwiTVwiICsgcCArIFwibVwiICsgZnJhZ21lbnQ7IH0pLmpvaW4oXCJcIik7XG4gICAgfTtcbiAgICAvL1NldHRlcnMvZ2V0dGVyc1xuICAgIHRoaXMueCA9IGZ1bmN0aW9uKF8pe1xuICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA/ICh4ID0gXywgdGhpcykgOiB4O1xuICAgIH1cbiAgICB0aGlzLnkgPSBmdW5jdGlvbihfKXtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoeSA9IF8sIHRoaXMpIDogeTtcbiAgICB9XG4gICAgdGhpcy5yYWRpdXMgPSBmdW5jdGlvbihfKXtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAocj0gK18sIGR4ID0gciAqIDIgKiBNYXRoLnNpbih0aGlyZFBpKSwgZHkgPSByKjEuNSwgdGhpcyk6IHI7XG4gICAgfVxuICAgIHRoaXMuc2l6ZSA9IGZ1bmN0aW9uKF8pIHtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoeDAgPSB5MCA9IDAsIHgxID0gK19bMF0sIHkxID0gK19bMV0sIHRoaXMpIDogW3gxIC0geDAsIHkxIC0geTBdO1xuICAgIH07XG4gICAgdGhpcy5leHRlbnQgPSBmdW5jdGlvbihfKXtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPyAoeDAgPSArX1swXVswXSwgeTAgPSArX1swXVsxXSwgeDEgPSArX1sxXVswXSwgeTEgPSArX1sxXVsxXSwgdGhpcyk6IFtbeDAsIHkwXSwgW3gxLCB5MV1dO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJhZGl1cygxKTtcbn0iLCIvL0FkYXB0ZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9kZWxhdW5hdG9yL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5leHBvcnQgY2xhc3MgRGVsYXVuYXRvciB7XG5cbiAgICBzdGF0aWMgZnJvbShwb2ludHMsIGdldFgsIGdldFkpIHtcbiAgICAgICAgaWYgKCFnZXRYKSBnZXRYID0gZGVmYXVsdEdldFg7XG4gICAgICAgIGlmICghZ2V0WSkgZ2V0WSA9IGRlZmF1bHRHZXRZO1xuXG4gICAgICAgIGNvbnN0IG4gPSBwb2ludHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBjb29yZHMgPSBuZXcgRmxvYXQ2NEFycmF5KG4gKiAyKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcCA9IHBvaW50c1tpXTtcbiAgICAgICAgICAgIGNvb3Jkc1syICogaV0gPSBnZXRYKHApO1xuICAgICAgICAgICAgY29vcmRzWzIgKiBpICsgMV0gPSBnZXRZKHApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBEZWxhdW5hdG9yKGNvb3JkcywgcG9pbnRzKTtcbiAgICB9XG4gICAgdHJpYW5nbGVDb29yZGluYXRlcygpe1xuICAgICAgICBsZXQgdHJpYW5nbGVzID0gdGhpcy50cmlhbmdsZXM7XG4gICAgICAgIGxldCB0cmlhbmdsZUNvb3JkaW5hdGVzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICB0cmlhbmdsZUNvb3JkaW5hdGVzLnB1c2goW1xuICAgICAgICAgICAgICAgIHRoaXMucG9pbnRzW3RyaWFuZ2xlc1tpXV0sXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHNbdHJpYW5nbGVzW2kgKyAxXV0sXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHNbdHJpYW5nbGVzW2kgKyAyXV1cbiAgICAgICAgICAgIF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmlhbmdsZUNvb3JkaW5hdGVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihjb29yZHMsIHBvaW50cykge1xuICAgICAgICB0aGlzLnBvaW50cyA9IHBvaW50cztcbiAgICAgICAgbGV0IG1pblggPSBJbmZpbml0eTtcbiAgICAgICAgbGV0IG1pblkgPSBJbmZpbml0eTtcbiAgICAgICAgbGV0IG1heFggPSAtSW5maW5pdHk7XG4gICAgICAgIGxldCBtYXhZID0gLUluZmluaXR5O1xuXG4gICAgICAgIGNvbnN0IG4gPSBjb29yZHMubGVuZ3RoID4+IDE7XG4gICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuaWRzID0gbmV3IFVpbnQzMkFycmF5KG4pO1xuXG4gICAgICAgIGlmIChuID4gMCAmJiB0eXBlb2YgY29vcmRzWzBdICE9PSAnbnVtYmVyJykgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCBjb29yZHMgdG8gY29udGFpbiBudW1iZXJzLicpO1xuXG4gICAgICAgIHRoaXMuY29vcmRzID0gY29vcmRzO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCB4ID0gY29vcmRzWzIgKiBpXTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBjb29yZHNbMiAqIGkgKyAxXTtcbiAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xuICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XG4gICAgICAgICAgICBpZHNbaV0gPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3ggPSAobWluWCArIG1heFgpIC8gMjtcbiAgICAgICAgY29uc3QgY3kgPSAobWluWSArIG1heFkpIC8gMjtcblxuICAgICAgICBsZXQgbWluRGlzdCA9IEluZmluaXR5O1xuICAgICAgICBsZXQgaTAsIGkxLCBpMjtcblxuICAgICAgICAvLyBwaWNrIGEgc2VlZCBwb2ludCBjbG9zZSB0byB0aGUgY2VudHJvaWRcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBkaXN0KGN4LCBjeSwgY29vcmRzWzIgKiBpXSwgY29vcmRzWzIgKiBpICsgMV0pO1xuICAgICAgICAgICAgaWYgKGQgPCBtaW5EaXN0KSB7XG4gICAgICAgICAgICAgICAgaTAgPSBpO1xuICAgICAgICAgICAgICAgIG1pbkRpc3QgPSBkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWluRGlzdCA9IEluZmluaXR5O1xuXG4gICAgICAgIC8vIGZpbmQgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHNlZWRcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSBpMCkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBkID0gZGlzdChjb29yZHNbMiAqIGkwXSwgY29vcmRzWzIgKiBpMCArIDFdLCBjb29yZHNbMiAqIGldLCBjb29yZHNbMiAqIGkgKyAxXSk7XG4gICAgICAgICAgICBpZiAoZCA8IG1pbkRpc3QgJiYgZCA+IDApIHtcbiAgICAgICAgICAgICAgICBpMSA9IGk7XG4gICAgICAgICAgICAgICAgbWluRGlzdCA9IGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbWluUmFkaXVzID0gSW5maW5pdHk7XG5cbiAgICAgICAgLy8gZmluZCB0aGUgdGhpcmQgcG9pbnQgd2hpY2ggZm9ybXMgdGhlIHNtYWxsZXN0IGNpcmN1bWNpcmNsZSB3aXRoIHRoZSBmaXJzdCB0d29cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID09PSBpMCB8fCBpID09PSBpMSkgY29udGludWU7XG5cbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaXJjdW1yYWRpdXMoXG4gICAgICAgICAgICAgICAgY29vcmRzWzIgKiBpMF0sIGNvb3Jkc1syICogaTAgKyAxXSxcbiAgICAgICAgICAgICAgICBjb29yZHNbMiAqIGkxXSwgY29vcmRzWzIgKiBpMSArIDFdLFxuICAgICAgICAgICAgICAgIGNvb3Jkc1syICogaV0sIGNvb3Jkc1syICogaSArIDFdKTtcblxuICAgICAgICAgICAgaWYgKHIgPCBtaW5SYWRpdXMpIHtcbiAgICAgICAgICAgICAgICBpMiA9IGk7XG4gICAgICAgICAgICAgICAgbWluUmFkaXVzID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtaW5SYWRpdXMgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIERlbGF1bmF5IHRyaWFuZ3VsYXRpb24gZXhpc3RzIGZvciB0aGlzIGlucHV0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3dhcCB0aGUgb3JkZXIgb2YgdGhlIHNlZWQgcG9pbnRzIGZvciBjb3VudGVyLWNsb2Nrd2lzZSBvcmllbnRhdGlvblxuICAgICAgICBpZiAoYXJlYShjb29yZHNbMiAqIGkwXSwgY29vcmRzWzIgKiBpMCArIDFdLFxuICAgICAgICAgICAgY29vcmRzWzIgKiBpMV0sIGNvb3Jkc1syICogaTEgKyAxXSxcbiAgICAgICAgICAgIGNvb3Jkc1syICogaTJdLCBjb29yZHNbMiAqIGkyICsgMV0pIDwgMCkge1xuXG4gICAgICAgICAgICBjb25zdCB0bXAgPSBpMTtcbiAgICAgICAgICAgIGkxID0gaTI7XG4gICAgICAgICAgICBpMiA9IHRtcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGkweCA9IGNvb3Jkc1syICogaTBdO1xuICAgICAgICBjb25zdCBpMHkgPSBjb29yZHNbMiAqIGkwICsgMV07XG4gICAgICAgIGNvbnN0IGkxeCA9IGNvb3Jkc1syICogaTFdO1xuICAgICAgICBjb25zdCBpMXkgPSBjb29yZHNbMiAqIGkxICsgMV07XG4gICAgICAgIGNvbnN0IGkyeCA9IGNvb3Jkc1syICogaTJdO1xuICAgICAgICBjb25zdCBpMnkgPSBjb29yZHNbMiAqIGkyICsgMV07XG5cbiAgICAgICAgY29uc3QgY2VudGVyID0gY2lyY3VtY2VudGVyKGkweCwgaTB5LCBpMXgsIGkxeSwgaTJ4LCBpMnkpO1xuICAgICAgICB0aGlzLl9jeCA9IGNlbnRlci54O1xuICAgICAgICB0aGlzLl9jeSA9IGNlbnRlci55O1xuXG4gICAgICAgIC8vIHNvcnQgdGhlIHBvaW50cyBieSBkaXN0YW5jZSBmcm9tIHRoZSBzZWVkIHRyaWFuZ2xlIGNpcmN1bWNlbnRlclxuICAgICAgICBxdWlja3NvcnQoaWRzLCBjb29yZHMsIDAsIGlkcy5sZW5ndGggLSAxLCBjZW50ZXIueCwgY2VudGVyLnkpO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemUgYSBoYXNoIHRhYmxlIGZvciBzdG9yaW5nIGVkZ2VzIG9mIHRoZSBhZHZhbmNpbmcgY29udmV4IGh1bGxcbiAgICAgICAgdGhpcy5faGFzaFNpemUgPSBNYXRoLmNlaWwoTWF0aC5zcXJ0KG4pKTtcbiAgICAgICAgdGhpcy5faGFzaCA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2hhc2hTaXplOyBpKyspIHRoaXMuX2hhc2hbaV0gPSBudWxsO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemUgYSBjaXJjdWxhciBkb3VibHktbGlua2VkIGxpc3QgdGhhdCB3aWxsIGhvbGQgYW4gYWR2YW5jaW5nIGNvbnZleCBodWxsXG4gICAgICAgIGxldCBlID0gdGhpcy5odWxsID0gaW5zZXJ0Tm9kZShjb29yZHMsIGkwKTtcbiAgICAgICAgdGhpcy5faGFzaEVkZ2UoZSk7XG4gICAgICAgIGUudCA9IDA7XG4gICAgICAgIGUgPSBpbnNlcnROb2RlKGNvb3JkcywgaTEsIGUpO1xuICAgICAgICB0aGlzLl9oYXNoRWRnZShlKTtcbiAgICAgICAgZS50ID0gMTtcbiAgICAgICAgZSA9IGluc2VydE5vZGUoY29vcmRzLCBpMiwgZSk7XG4gICAgICAgIHRoaXMuX2hhc2hFZGdlKGUpO1xuICAgICAgICBlLnQgPSAyO1xuXG4gICAgICAgIGNvbnN0IG1heFRyaWFuZ2xlcyA9IDIgKiBuIC0gNTtcbiAgICAgICAgY29uc3QgdHJpYW5nbGVzID0gdGhpcy50cmlhbmdsZXMgPSBuZXcgVWludDMyQXJyYXkobWF4VHJpYW5nbGVzICogMyk7XG4gICAgICAgIGNvbnN0IGhhbGZlZGdlcyA9IHRoaXMuaGFsZmVkZ2VzID0gbmV3IEludDMyQXJyYXkobWF4VHJpYW5nbGVzICogMyk7XG5cbiAgICAgICAgdGhpcy50cmlhbmdsZXNMZW4gPSAwO1xuXG4gICAgICAgIHRoaXMuX2FkZFRyaWFuZ2xlKGkwLCBpMSwgaTIsIC0xLCAtMSwgLTEpO1xuXG4gICAgICAgIGZvciAobGV0IGsgPSAwLCB4cCwgeXA7IGsgPCBpZHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBpZHNba107XG4gICAgICAgICAgICBjb25zdCB4ID0gY29vcmRzWzIgKiBpXTtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBjb29yZHNbMiAqIGkgKyAxXTtcblxuICAgICAgICAgICAgLy8gc2tpcCBkdXBsaWNhdGUgcG9pbnRzXG4gICAgICAgICAgICBpZiAoeCA9PT0geHAgJiYgeSA9PT0geXApIGNvbnRpbnVlO1xuICAgICAgICAgICAgeHAgPSB4O1xuICAgICAgICAgICAgeXAgPSB5O1xuXG4gICAgICAgICAgICAvLyBza2lwIHNlZWQgdHJpYW5nbGUgcG9pbnRzXG4gICAgICAgICAgICBpZiAoKHggPT09IGkweCAmJiB5ID09PSBpMHkpIHx8XG4gICAgICAgICAgICAgICAgKHggPT09IGkxeCAmJiB5ID09PSBpMXkpIHx8XG4gICAgICAgICAgICAgICAgKHggPT09IGkyeCAmJiB5ID09PSBpMnkpKSBjb250aW51ZTtcblxuICAgICAgICAgICAgLy8gZmluZCBhIHZpc2libGUgZWRnZSBvbiB0aGUgY29udmV4IGh1bGwgdXNpbmcgZWRnZSBoYXNoXG4gICAgICAgICAgICBjb25zdCBzdGFydEtleSA9IHRoaXMuX2hhc2hLZXkoeCwgeSk7XG4gICAgICAgICAgICBsZXQga2V5ID0gc3RhcnRLZXk7XG4gICAgICAgICAgICBsZXQgc3RhcnQ7XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSB0aGlzLl9oYXNoW2tleV07XG4gICAgICAgICAgICAgICAga2V5ID0gKGtleSArIDEpICUgdGhpcy5faGFzaFNpemU7XG4gICAgICAgICAgICB9IHdoaWxlICgoIXN0YXJ0IHx8IHN0YXJ0LnJlbW92ZWQpICYmIGtleSAhPT0gc3RhcnRLZXkpO1xuXG4gICAgICAgICAgICBlID0gc3RhcnQ7XG4gICAgICAgICAgICB3aGlsZSAoYXJlYSh4LCB5LCBlLngsIGUueSwgZS5uZXh0LngsIGUubmV4dC55KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZSA9IGUubmV4dDtcbiAgICAgICAgICAgICAgICBpZiAoZSA9PT0gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTb21ldGhpbmcgaXMgd3Jvbmcgd2l0aCB0aGUgaW5wdXQgcG9pbnRzLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgd2Fsa0JhY2sgPSBlID09PSBzdGFydDtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBmaXJzdCB0cmlhbmdsZSBmcm9tIHRoZSBwb2ludFxuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLl9hZGRUcmlhbmdsZShlLmksIGksIGUubmV4dC5pLCAtMSwgLTEsIGUudCk7XG5cbiAgICAgICAgICAgIGUudCA9IHQ7IC8vIGtlZXAgdHJhY2sgb2YgYm91bmRhcnkgdHJpYW5nbGVzIG9uIHRoZSBodWxsXG4gICAgICAgICAgICBlID0gaW5zZXJ0Tm9kZShjb29yZHMsIGksIGUpO1xuXG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBmbGlwIHRyaWFuZ2xlcyBmcm9tIHRoZSBwb2ludCB1bnRpbCB0aGV5IHNhdGlzZnkgdGhlIERlbGF1bmF5IGNvbmRpdGlvblxuICAgICAgICAgICAgZS50ID0gdGhpcy5fbGVnYWxpemUodCArIDIpO1xuICAgICAgICAgICAgaWYgKGUucHJldi5wcmV2LnQgPT09IGhhbGZlZGdlc1t0ICsgMV0pIHtcbiAgICAgICAgICAgICAgICBlLnByZXYucHJldi50ID0gdCArIDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdhbGsgZm9yd2FyZCB0aHJvdWdoIHRoZSBodWxsLCBhZGRpbmcgbW9yZSB0cmlhbmdsZXMgYW5kIGZsaXBwaW5nIHJlY3Vyc2l2ZWx5XG4gICAgICAgICAgICBsZXQgcSA9IGUubmV4dDtcbiAgICAgICAgICAgIHdoaWxlIChhcmVhKHgsIHksIHEueCwgcS55LCBxLm5leHQueCwgcS5uZXh0LnkpIDwgMCkge1xuICAgICAgICAgICAgICAgIHQgPSB0aGlzLl9hZGRUcmlhbmdsZShxLmksIGksIHEubmV4dC5pLCBxLnByZXYudCwgLTEsIHEudCk7XG4gICAgICAgICAgICAgICAgcS5wcmV2LnQgPSB0aGlzLl9sZWdhbGl6ZSh0ICsgMik7XG4gICAgICAgICAgICAgICAgdGhpcy5odWxsID0gcmVtb3ZlTm9kZShxKTtcbiAgICAgICAgICAgICAgICBxID0gcS5uZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod2Fsa0JhY2spIHtcbiAgICAgICAgICAgICAgICAvLyB3YWxrIGJhY2t3YXJkIGZyb20gdGhlIG90aGVyIHNpZGUsIGFkZGluZyBtb3JlIHRyaWFuZ2xlcyBhbmQgZmxpcHBpbmdcbiAgICAgICAgICAgICAgICBxID0gZS5wcmV2O1xuICAgICAgICAgICAgICAgIHdoaWxlIChhcmVhKHgsIHksIHEucHJldi54LCBxLnByZXYueSwgcS54LCBxLnkpIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5fYWRkVHJpYW5nbGUocS5wcmV2LmksIGksIHEuaSwgLTEsIHEudCwgcS5wcmV2LnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sZWdhbGl6ZSh0ICsgMik7XG4gICAgICAgICAgICAgICAgICAgIHEucHJldi50ID0gdDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5odWxsID0gcmVtb3ZlTm9kZShxKTtcbiAgICAgICAgICAgICAgICAgICAgcSA9IHEucHJldjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNhdmUgdGhlIHR3byBuZXcgZWRnZXMgaW4gdGhlIGhhc2ggdGFibGVcbiAgICAgICAgICAgIHRoaXMuX2hhc2hFZGdlKGUpO1xuICAgICAgICAgICAgdGhpcy5faGFzaEVkZ2UoZS5wcmV2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRyaW0gdHlwZWQgdHJpYW5nbGUgbWVzaCBhcnJheXNcbiAgICAgICAgdGhpcy50cmlhbmdsZXMgPSB0cmlhbmdsZXMuc3ViYXJyYXkoMCwgdGhpcy50cmlhbmdsZXNMZW4pO1xuICAgICAgICB0aGlzLmhhbGZlZGdlcyA9IGhhbGZlZGdlcy5zdWJhcnJheSgwLCB0aGlzLnRyaWFuZ2xlc0xlbik7XG4gICAgfVxuXG4gICAgX2hhc2hFZGdlKGUpIHtcbiAgICAgICAgdGhpcy5faGFzaFt0aGlzLl9oYXNoS2V5KGUueCwgZS55KV0gPSBlO1xuICAgIH1cblxuICAgIF9oYXNoS2V5KHgsIHkpIHtcbiAgICAgICAgY29uc3QgZHggPSB4IC0gdGhpcy5fY3g7XG4gICAgICAgIGNvbnN0IGR5ID0geSAtIHRoaXMuX2N5O1xuICAgICAgICAvLyB1c2UgcHNldWRvLWFuZ2xlOiBhIG1lYXN1cmUgdGhhdCBtb25vdG9uaWNhbGx5IGluY3JlYXNlc1xuICAgICAgICAvLyB3aXRoIHJlYWwgYW5nbGUsIGJ1dCBkb2Vzbid0IHJlcXVpcmUgZXhwZW5zaXZlIHRyaWdvbm9tZXRyeVxuICAgICAgICBjb25zdCBwID0gMSAtIGR4IC8gKE1hdGguYWJzKGR4KSArIE1hdGguYWJzKGR5KSk7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKCgyICsgKGR5IDwgMCA/IC1wIDogcCkpIC8gNCAqIHRoaXMuX2hhc2hTaXplKTtcbiAgICB9XG5cbiAgICBfbGVnYWxpemUoYSkge1xuICAgICAgICBjb25zdCB7dHJpYW5nbGVzLCBjb29yZHMsIGhhbGZlZGdlc30gPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IGIgPSBoYWxmZWRnZXNbYV07XG5cbiAgICAgICAgY29uc3QgYTAgPSBhIC0gYSAlIDM7XG4gICAgICAgIGNvbnN0IGIwID0gYiAtIGIgJSAzO1xuXG4gICAgICAgIGNvbnN0IGFsID0gYTAgKyAoYSArIDEpICUgMztcbiAgICAgICAgY29uc3QgYXIgPSBhMCArIChhICsgMikgJSAzO1xuICAgICAgICBjb25zdCBibCA9IGIwICsgKGIgKyAyKSAlIDM7XG5cbiAgICAgICAgY29uc3QgcDAgPSB0cmlhbmdsZXNbYXJdO1xuICAgICAgICBjb25zdCBwciA9IHRyaWFuZ2xlc1thXTtcbiAgICAgICAgY29uc3QgcGwgPSB0cmlhbmdsZXNbYWxdO1xuICAgICAgICBjb25zdCBwMSA9IHRyaWFuZ2xlc1tibF07XG5cbiAgICAgICAgY29uc3QgaWxsZWdhbCA9IGluQ2lyY2xlKFxuICAgICAgICAgICAgY29vcmRzWzIgKiBwMF0sIGNvb3Jkc1syICogcDAgKyAxXSxcbiAgICAgICAgICAgIGNvb3Jkc1syICogcHJdLCBjb29yZHNbMiAqIHByICsgMV0sXG4gICAgICAgICAgICBjb29yZHNbMiAqIHBsXSwgY29vcmRzWzIgKiBwbCArIDFdLFxuICAgICAgICAgICAgY29vcmRzWzIgKiBwMV0sIGNvb3Jkc1syICogcDEgKyAxXSk7XG5cbiAgICAgICAgaWYgKGlsbGVnYWwpIHtcbiAgICAgICAgICAgIHRyaWFuZ2xlc1thXSA9IHAxO1xuICAgICAgICAgICAgdHJpYW5nbGVzW2JdID0gcDA7XG5cbiAgICAgICAgICAgIHRoaXMuX2xpbmsoYSwgaGFsZmVkZ2VzW2JsXSk7XG4gICAgICAgICAgICB0aGlzLl9saW5rKGIsIGhhbGZlZGdlc1thcl0pO1xuICAgICAgICAgICAgdGhpcy5fbGluayhhciwgYmwpO1xuXG4gICAgICAgICAgICBjb25zdCBiciA9IGIwICsgKGIgKyAxKSAlIDM7XG5cbiAgICAgICAgICAgIHRoaXMuX2xlZ2FsaXplKGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xlZ2FsaXplKGJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBhcjtcbiAgICB9XG5cbiAgICBfbGluayhhLCBiKSB7XG4gICAgICAgIHRoaXMuaGFsZmVkZ2VzW2FdID0gYjtcbiAgICAgICAgaWYgKGIgIT09IC0xKSB0aGlzLmhhbGZlZGdlc1tiXSA9IGE7XG4gICAgfVxuXG4gICAgLy8gYWRkIGEgbmV3IHRyaWFuZ2xlIGdpdmVuIHZlcnRleCBpbmRpY2VzIGFuZCBhZGphY2VudCBoYWxmLWVkZ2UgaWRzXG4gICAgX2FkZFRyaWFuZ2xlKGkwLCBpMSwgaTIsIGEsIGIsIGMpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudHJpYW5nbGVzTGVuO1xuXG4gICAgICAgIHRoaXMudHJpYW5nbGVzW3RdID0gaTA7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzW3QgKyAxXSA9IGkxO1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc1t0ICsgMl0gPSBpMjtcblxuICAgICAgICB0aGlzLl9saW5rKHQsIGEpO1xuICAgICAgICB0aGlzLl9saW5rKHQgKyAxLCBiKTtcbiAgICAgICAgdGhpcy5fbGluayh0ICsgMiwgYyk7XG5cbiAgICAgICAgdGhpcy50cmlhbmdsZXNMZW4gKz0gMztcblxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRpc3QoYXgsIGF5LCBieCwgYnkpIHtcbiAgICBjb25zdCBkeCA9IGF4IC0gYng7XG4gICAgY29uc3QgZHkgPSBheSAtIGJ5O1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuZnVuY3Rpb24gYXJlYShweCwgcHksIHF4LCBxeSwgcngsIHJ5KSB7XG4gICAgcmV0dXJuIChxeSAtIHB5KSAqIChyeCAtIHF4KSAtIChxeCAtIHB4KSAqIChyeSAtIHF5KTtcbn1cblxuZnVuY3Rpb24gaW5DaXJjbGUoYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcHgsIHB5KSB7XG4gICAgY29uc3QgZHggPSBheCAtIHB4O1xuICAgIGNvbnN0IGR5ID0gYXkgLSBweTtcbiAgICBjb25zdCBleCA9IGJ4IC0gcHg7XG4gICAgY29uc3QgZXkgPSBieSAtIHB5O1xuICAgIGNvbnN0IGZ4ID0gY3ggLSBweDtcbiAgICBjb25zdCBmeSA9IGN5IC0gcHk7XG5cbiAgICBjb25zdCBhcCA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgIGNvbnN0IGJwID0gZXggKiBleCArIGV5ICogZXk7XG4gICAgY29uc3QgY3AgPSBmeCAqIGZ4ICsgZnkgKiBmeTtcblxuICAgIHJldHVybiBkeCAqIChleSAqIGNwIC0gYnAgKiBmeSkgLVxuICAgICAgICAgICBkeSAqIChleCAqIGNwIC0gYnAgKiBmeCkgK1xuICAgICAgICAgICBhcCAqIChleCAqIGZ5IC0gZXkgKiBmeCkgPCAwO1xufVxuXG5mdW5jdGlvbiBjaXJjdW1yYWRpdXMoYXgsIGF5LCBieCwgYnksIGN4LCBjeSkge1xuICAgIGNvbnN0IGR4ID0gYnggLSBheDtcbiAgICBjb25zdCBkeSA9IGJ5IC0gYXk7XG4gICAgY29uc3QgZXggPSBjeCAtIGF4O1xuICAgIGNvbnN0IGV5ID0gY3kgLSBheTtcblxuICAgIGNvbnN0IGJsID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgY29uc3QgY2wgPSBleCAqIGV4ICsgZXkgKiBleTtcbiAgICBjb25zdCBkID0gZHggKiBleSAtIGR5ICogZXg7XG5cbiAgICBjb25zdCB4ID0gKGV5ICogYmwgLSBkeSAqIGNsKSAqIDAuNSAvIGQ7XG4gICAgY29uc3QgeSA9IChkeCAqIGNsIC0gZXggKiBibCkgKiAwLjUgLyBkO1xuXG4gICAgcmV0dXJuIGJsICYmIGNsICYmIGQgJiYgKHggKiB4ICsgeSAqIHkpIHx8IEluZmluaXR5O1xufVxuXG5mdW5jdGlvbiBjaXJjdW1jZW50ZXIoYXgsIGF5LCBieCwgYnksIGN4LCBjeSkge1xuICAgIGNvbnN0IGR4ID0gYnggLSBheDtcbiAgICBjb25zdCBkeSA9IGJ5IC0gYXk7XG4gICAgY29uc3QgZXggPSBjeCAtIGF4O1xuICAgIGNvbnN0IGV5ID0gY3kgLSBheTtcblxuICAgIGNvbnN0IGJsID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgY29uc3QgY2wgPSBleCAqIGV4ICsgZXkgKiBleTtcbiAgICBjb25zdCBkID0gZHggKiBleSAtIGR5ICogZXg7XG5cbiAgICBjb25zdCB4ID0gYXggKyAoZXkgKiBibCAtIGR5ICogY2wpICogMC41IC8gZDtcbiAgICBjb25zdCB5ID0gYXkgKyAoZHggKiBjbCAtIGV4ICogYmwpICogMC41IC8gZDtcblxuICAgIHJldHVybiB7eCwgeX07XG59XG5cbi8vIGNyZWF0ZSBhIG5ldyBub2RlIGluIGEgZG91Ymx5IGxpbmtlZCBsaXN0XG5mdW5jdGlvbiBpbnNlcnROb2RlKGNvb3JkcywgaSwgcHJldikge1xuICAgIGNvbnN0IG5vZGUgPSB7XG4gICAgICAgIGk6IGksXG4gICAgICAgIHg6IGNvb3Jkc1syICogaV0sXG4gICAgICAgIHk6IGNvb3Jkc1syICogaSArIDFdLFxuICAgICAgICB0OiAwLFxuICAgICAgICBwcmV2OiBudWxsLFxuICAgICAgICBuZXh0OiBudWxsLFxuICAgICAgICByZW1vdmVkOiBmYWxzZVxuICAgIH07XG5cbiAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgbm9kZS5wcmV2ID0gbm9kZTtcbiAgICAgICAgbm9kZS5uZXh0ID0gbm9kZTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUubmV4dCA9IHByZXYubmV4dDtcbiAgICAgICAgbm9kZS5wcmV2ID0gcHJldjtcbiAgICAgICAgcHJldi5uZXh0LnByZXYgPSBub2RlO1xuICAgICAgICBwcmV2Lm5leHQgPSBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgbm9kZS5wcmV2Lm5leHQgPSBub2RlLm5leHQ7XG4gICAgbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXY7XG4gICAgbm9kZS5yZW1vdmVkID0gdHJ1ZTtcbiAgICByZXR1cm4gbm9kZS5wcmV2O1xufVxuXG5mdW5jdGlvbiBxdWlja3NvcnQoaWRzLCBjb29yZHMsIGxlZnQsIHJpZ2h0LCBjeCwgY3kpIHtcbiAgICBsZXQgaSwgaiwgdGVtcDtcblxuICAgIGlmIChyaWdodCAtIGxlZnQgPD0gMjApIHtcbiAgICAgICAgZm9yIChpID0gbGVmdCArIDE7IGkgPD0gcmlnaHQ7IGkrKykge1xuICAgICAgICAgICAgdGVtcCA9IGlkc1tpXTtcbiAgICAgICAgICAgIGogPSBpIC0gMTtcbiAgICAgICAgICAgIHdoaWxlIChqID49IGxlZnQgJiYgY29tcGFyZShjb29yZHMsIGlkc1tqXSwgdGVtcCwgY3gsIGN5KSA+IDApIGlkc1tqICsgMV0gPSBpZHNbai0tXTtcbiAgICAgICAgICAgIGlkc1tqICsgMV0gPSB0ZW1wO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbWVkaWFuID0gKGxlZnQgKyByaWdodCkgPj4gMTtcbiAgICAgICAgaSA9IGxlZnQgKyAxO1xuICAgICAgICBqID0gcmlnaHQ7XG4gICAgICAgIHN3YXAoaWRzLCBtZWRpYW4sIGkpO1xuICAgICAgICBpZiAoY29tcGFyZShjb29yZHMsIGlkc1tsZWZ0XSwgaWRzW3JpZ2h0XSwgY3gsIGN5KSA+IDApIHN3YXAoaWRzLCBsZWZ0LCByaWdodCk7XG4gICAgICAgIGlmIChjb21wYXJlKGNvb3JkcywgaWRzW2ldLCBpZHNbcmlnaHRdLCBjeCwgY3kpID4gMCkgc3dhcChpZHMsIGksIHJpZ2h0KTtcbiAgICAgICAgaWYgKGNvbXBhcmUoY29vcmRzLCBpZHNbbGVmdF0sIGlkc1tpXSwgY3gsIGN5KSA+IDApIHN3YXAoaWRzLCBsZWZ0LCBpKTtcblxuICAgICAgICB0ZW1wID0gaWRzW2ldO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgZG8gaSsrOyB3aGlsZSAoY29tcGFyZShjb29yZHMsIGlkc1tpXSwgdGVtcCwgY3gsIGN5KSA8IDApO1xuICAgICAgICAgICAgZG8gai0tOyB3aGlsZSAoY29tcGFyZShjb29yZHMsIGlkc1tqXSwgdGVtcCwgY3gsIGN5KSA+IDApO1xuICAgICAgICAgICAgaWYgKGogPCBpKSBicmVhaztcbiAgICAgICAgICAgIHN3YXAoaWRzLCBpLCBqKTtcbiAgICAgICAgfVxuICAgICAgICBpZHNbbGVmdCArIDFdID0gaWRzW2pdO1xuICAgICAgICBpZHNbal0gPSB0ZW1wO1xuXG4gICAgICAgIGlmIChyaWdodCAtIGkgKyAxID49IGogLSBsZWZ0KSB7XG4gICAgICAgICAgICBxdWlja3NvcnQoaWRzLCBjb29yZHMsIGksIHJpZ2h0LCBjeCwgY3kpO1xuICAgICAgICAgICAgcXVpY2tzb3J0KGlkcywgY29vcmRzLCBsZWZ0LCBqIC0gMSwgY3gsIGN5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHF1aWNrc29ydChpZHMsIGNvb3JkcywgbGVmdCwgaiAtIDEsIGN4LCBjeSk7XG4gICAgICAgICAgICBxdWlja3NvcnQoaWRzLCBjb29yZHMsIGksIHJpZ2h0LCBjeCwgY3kpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb21wYXJlKGNvb3JkcywgaSwgaiwgY3gsIGN5KSB7XG4gICAgY29uc3QgZDEgPSBkaXN0KGNvb3Jkc1syICogaV0sIGNvb3Jkc1syICogaSArIDFdLCBjeCwgY3kpO1xuICAgIGNvbnN0IGQyID0gZGlzdChjb29yZHNbMiAqIGpdLCBjb29yZHNbMiAqIGogKyAxXSwgY3gsIGN5KTtcbiAgICByZXR1cm4gKGQxIC0gZDIpIHx8IChjb29yZHNbMiAqIGldIC0gY29vcmRzWzIgKiBqXSkgfHwgKGNvb3Jkc1syICogaSArIDFdIC0gY29vcmRzWzIgKiBqICsgMV0pO1xufVxuXG5mdW5jdGlvbiBzd2FwKGFyciwgaSwgaikge1xuICAgIGNvbnN0IHRtcCA9IGFycltpXTtcbiAgICBhcnJbaV0gPSBhcnJbal07XG4gICAgYXJyW2pdID0gdG1wO1xufVxuXG5mdW5jdGlvbiBkZWZhdWx0R2V0WChwKSB7XG4gICAgcmV0dXJuIHBbMF07XG59XG5mdW5jdGlvbiBkZWZhdWx0R2V0WShwKSB7XG4gICAgcmV0dXJuIHBbMV07XG59XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjkuMVxuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxOCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIChgc2VsZmApIGluIHRoZSBicm93c2VyLCBgZ2xvYmFsYFxuICAvLyBvbiB0aGUgc2VydmVyLCBvciBgdGhpc2AgaW4gc29tZSB2aXJ0dWFsIG1hY2hpbmVzLiBXZSB1c2UgYHNlbGZgXG4gIC8vIGluc3RlYWQgb2YgYHdpbmRvd2AgZm9yIGBXZWJXb3JrZXJgIHN1cHBvcnQuXG4gIHZhciByb290ID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmICYmIHNlbGYgfHxcbiAgICAgICAgICAgIHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsLmdsb2JhbCA9PT0gZ2xvYmFsICYmIGdsb2JhbCB8fFxuICAgICAgICAgICAgdGhpcyB8fFxuICAgICAgICAgICAge307XG5cbiAgLy8gU2F2ZSB0aGUgcHJldmlvdXMgdmFsdWUgb2YgdGhlIGBfYCB2YXJpYWJsZS5cbiAgdmFyIHByZXZpb3VzVW5kZXJzY29yZSA9IHJvb3QuXztcblxuICAvLyBTYXZlIGJ5dGVzIGluIHRoZSBtaW5pZmllZCAoYnV0IG5vdCBnemlwcGVkKSB2ZXJzaW9uOlxuICB2YXIgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSwgT2JqUHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgU3ltYm9sUHJvdG8gPSB0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyA/IFN5bWJvbC5wcm90b3R5cGUgOiBudWxsO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXIgcHVzaCA9IEFycmF5UHJvdG8ucHVzaCxcbiAgICAgIHNsaWNlID0gQXJyYXlQcm90by5zbGljZSxcbiAgICAgIHRvU3RyaW5nID0gT2JqUHJvdG8udG9TdHJpbmcsXG4gICAgICBoYXNPd25Qcm9wZXJ0eSA9IE9ialByb3RvLmhhc093blByb3BlcnR5O1xuXG4gIC8vIEFsbCAqKkVDTUFTY3JpcHQgNSoqIG5hdGl2ZSBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbnMgdGhhdCB3ZSBob3BlIHRvIHVzZVxuICAvLyBhcmUgZGVjbGFyZWQgaGVyZS5cbiAgdmFyIG5hdGl2ZUlzQXJyYXkgPSBBcnJheS5pc0FycmF5LFxuICAgICAgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzLFxuICAgICAgbmF0aXZlQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcblxuICAvLyBOYWtlZCBmdW5jdGlvbiByZWZlcmVuY2UgZm9yIHN1cnJvZ2F0ZS1wcm90b3R5cGUtc3dhcHBpbmcuXG4gIHZhciBDdG9yID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZSBhIHNhZmUgcmVmZXJlbmNlIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgdXNlIGJlbG93LlxuICB2YXIgXyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogaW5zdGFuY2VvZiBfKSByZXR1cm4gb2JqO1xuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBfKSkgcmV0dXJuIG5ldyBfKG9iaik7XG4gICAgdGhpcy5fd3JhcHBlZCA9IG9iajtcbiAgfTtcblxuICAvLyBFeHBvcnQgdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciAqKk5vZGUuanMqKiwgd2l0aFxuICAvLyBiYWNrd2FyZHMtY29tcGF0aWJpbGl0eSBmb3IgdGhlaXIgb2xkIG1vZHVsZSBBUEkuIElmIHdlJ3JlIGluXG4gIC8vIHRoZSBicm93c2VyLCBhZGQgYF9gIGFzIGEgZ2xvYmFsIG9iamVjdC5cbiAgLy8gKGBub2RlVHlwZWAgaXMgY2hlY2tlZCB0byBlbnN1cmUgdGhhdCBgbW9kdWxlYFxuICAvLyBhbmQgYGV4cG9ydHNgIGFyZSBub3QgSFRNTCBlbGVtZW50cy4pXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPSAndW5kZWZpbmVkJyAmJiAhZXhwb3J0cy5ub2RlVHlwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOS4xJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgLy8gVGhlIDItYXJndW1lbnQgY2FzZSBpcyBvbWl0dGVkIGJlY2F1c2Ugd2XigJlyZSBub3QgdXNpbmcgaXQuXG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICB2YXIgYnVpbHRpbkl0ZXJhdGVlO1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGNhbGxiYWNrcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvIGVhY2hcbiAgLy8gZWxlbWVudCBpbiBhIGNvbGxlY3Rpb24sIHJldHVybmluZyB0aGUgZGVzaXJlZCByZXN1bHQg4oCUIGVpdGhlciBgaWRlbnRpdHlgLFxuICAvLyBhbiBhcmJpdHJhcnkgY2FsbGJhY2ssIGEgcHJvcGVydHkgbWF0Y2hlciwgb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAgdmFyIGNiID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKF8uaXRlcmF0ZWUgIT09IGJ1aWx0aW5JdGVyYXRlZSkgcmV0dXJuIF8uaXRlcmF0ZWUodmFsdWUsIGNvbnRleHQpO1xuICAgIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gXy5pZGVudGl0eTtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkgcmV0dXJuIG9wdGltaXplQ2IodmFsdWUsIGNvbnRleHQsIGFyZ0NvdW50KTtcbiAgICBpZiAoXy5pc09iamVjdCh2YWx1ZSkgJiYgIV8uaXNBcnJheSh2YWx1ZSkpIHJldHVybiBfLm1hdGNoZXIodmFsdWUpO1xuICAgIHJldHVybiBfLnByb3BlcnR5KHZhbHVlKTtcbiAgfTtcblxuICAvLyBFeHRlcm5hbCB3cmFwcGVyIGZvciBvdXIgY2FsbGJhY2sgZ2VuZXJhdG9yLiBVc2VycyBtYXkgY3VzdG9taXplXG4gIC8vIGBfLml0ZXJhdGVlYCBpZiB0aGV5IHdhbnQgYWRkaXRpb25hbCBwcmVkaWNhdGUvaXRlcmF0ZWUgc2hvcnRoYW5kIHN0eWxlcy5cbiAgLy8gVGhpcyBhYnN0cmFjdGlvbiBoaWRlcyB0aGUgaW50ZXJuYWwtb25seSBhcmdDb3VudCBhcmd1bWVudC5cbiAgXy5pdGVyYXRlZSA9IGJ1aWx0aW5JdGVyYXRlZSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIGNiKHZhbHVlLCBjb250ZXh0LCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gU29tZSBmdW5jdGlvbnMgdGFrZSBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIG9yIGEgZmV3IGV4cGVjdGVkXG4gIC8vIGFyZ3VtZW50cyBhdCB0aGUgYmVnaW5uaW5nIGFuZCB0aGVuIGEgdmFyaWFibGUgbnVtYmVyIG9mIHZhbHVlcyB0byBvcGVyYXRlXG4gIC8vIG9uLiBUaGlzIGhlbHBlciBhY2N1bXVsYXRlcyBhbGwgcmVtYWluaW5nIGFyZ3VtZW50cyBwYXN0IHRoZSBmdW5jdGlvbuKAmXNcbiAgLy8gYXJndW1lbnQgbGVuZ3RoIChvciBhbiBleHBsaWNpdCBgc3RhcnRJbmRleGApLCBpbnRvIGFuIGFycmF5IHRoYXQgYmVjb21lc1xuICAvLyB0aGUgbGFzdCBhcmd1bWVudC4gU2ltaWxhciB0byBFUzbigJlzIFwicmVzdCBwYXJhbWV0ZXJcIi5cbiAgdmFyIHJlc3RBcmd1bWVudHMgPSBmdW5jdGlvbihmdW5jLCBzdGFydEluZGV4KSB7XG4gICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggPT0gbnVsbCA/IGZ1bmMubGVuZ3RoIC0gMSA6ICtzdGFydEluZGV4O1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChhcmd1bWVudHMubGVuZ3RoIC0gc3RhcnRJbmRleCwgMCksXG4gICAgICAgICAgcmVzdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgZm9yICg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHJlc3RbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4ICsgc3RhcnRJbmRleF07XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJndW1lbnRzWzBdLCByZXN0KTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdLCByZXN0KTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gQXJyYXkoc3RhcnRJbmRleCArIDEpO1xuICAgICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgc3RhcnRJbmRleDsgaW5kZXgrKykge1xuICAgICAgICBhcmdzW2luZGV4XSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICB9XG4gICAgICBhcmdzW3N0YXJ0SW5kZXhdID0gcmVzdDtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gYW5vdGhlci5cbiAgdmFyIGJhc2VDcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICBpZiAoIV8uaXNPYmplY3QocHJvdG90eXBlKSkgcmV0dXJuIHt9O1xuICAgIGlmIChuYXRpdmVDcmVhdGUpIHJldHVybiBuYXRpdmVDcmVhdGUocHJvdG90eXBlKTtcbiAgICBDdG9yLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IEN0b3I7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBudWxsO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgdmFyIHNoYWxsb3dQcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgdmFyIGhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcGF0aCk7XG4gIH1cblxuICB2YXIgZGVlcEdldCA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICBvYmogPSBvYmpbcGF0aFtpXV07XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGggPyBvYmogOiB2b2lkIDA7XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3QuXG4gIC8vIFJlbGF0ZWQ6IGh0dHA6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoXG4gIC8vIEF2b2lkcyBhIHZlcnkgbmFzdHkgaU9TIDggSklUIGJ1ZyBvbiBBUk0tNjQuICMyMDk0XG4gIHZhciBNQVhfQVJSQVlfSU5ERVggPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuICB2YXIgZ2V0TGVuZ3RoID0gc2hhbGxvd1Byb3BlcnR5KCdsZW5ndGgnKTtcbiAgdmFyIGlzQXJyYXlMaWtlID0gZnVuY3Rpb24oY29sbGVjdGlvbikge1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoY29sbGVjdGlvbik7XG4gICAgcmV0dXJuIHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicgJiYgbGVuZ3RoID49IDAgJiYgbGVuZ3RoIDw9IE1BWF9BUlJBWV9JTkRFWDtcbiAgfTtcblxuICAvLyBDb2xsZWN0aW9uIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFRoZSBjb3JuZXJzdG9uZSwgYW4gYGVhY2hgIGltcGxlbWVudGF0aW9uLCBha2EgYGZvckVhY2hgLlxuICAvLyBIYW5kbGVzIHJhdyBvYmplY3RzIGluIGFkZGl0aW9uIHRvIGFycmF5LWxpa2VzLiBUcmVhdHMgYWxsXG4gIC8vIHNwYXJzZSBhcnJheS1saWtlcyBhcyBpZiB0aGV5IHdlcmUgZGVuc2UuXG4gIF8uZWFjaCA9IF8uZm9yRWFjaCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBpLCBsZW5ndGg7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpbaV0sIGksIG9iaik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtrZXlzW2ldXSwga2V5c1tpXSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdHMgb2YgYXBwbHlpbmcgdGhlIGl0ZXJhdGVlIHRvIGVhY2ggZWxlbWVudC5cbiAgXy5tYXAgPSBfLmNvbGxlY3QgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdHMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICByZXN1bHRzW2luZGV4XSA9IGl0ZXJhdGVlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgcmVkdWNpbmcgZnVuY3Rpb24gaXRlcmF0aW5nIGxlZnQgb3IgcmlnaHQuXG4gIHZhciBjcmVhdGVSZWR1Y2UgPSBmdW5jdGlvbihkaXIpIHtcbiAgICAvLyBXcmFwIGNvZGUgdGhhdCByZWFzc2lnbnMgYXJndW1lbnQgdmFyaWFibGVzIGluIGEgc2VwYXJhdGUgZnVuY3Rpb24gdGhhblxuICAgIC8vIHRoZSBvbmUgdGhhdCBhY2Nlc3NlcyBgYXJndW1lbnRzLmxlbmd0aGAgdG8gYXZvaWQgYSBwZXJmIGhpdC4gKCMxOTkxKVxuICAgIHZhciByZWR1Y2VyID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgbWVtbywgaW5pdGlhbCkge1xuICAgICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgICBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGlmICghaW5pdGlhbCkge1xuICAgICAgICBtZW1vID0gb2JqW2tleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4XTtcbiAgICAgICAgaW5kZXggKz0gZGlyO1xuICAgICAgfVxuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaW5pdGlhbCA9IGFyZ3VtZW50cy5sZW5ndGggPj0gMztcbiAgICAgIHJldHVybiByZWR1Y2VyKG9iaiwgb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCksIG1lbW8sIGluaXRpYWwpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXlGaW5kZXIgPSBpc0FycmF5TGlrZShvYmopID8gXy5maW5kSW5kZXggOiBfLmZpbmRLZXk7XG4gICAgdmFyIGtleSA9IGtleUZpbmRlcihvYmosIHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIHBhdGgsIGFyZ3MpIHtcbiAgICB2YXIgY29udGV4dFBhdGgsIGZ1bmM7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihwYXRoKSkge1xuICAgICAgZnVuYyA9IHBhdGg7XG4gICAgfSBlbHNlIGlmIChfLmlzQXJyYXkocGF0aCkpIHtcbiAgICAgIGNvbnRleHRQYXRoID0gcGF0aC5zbGljZSgwLCAtMSk7XG4gICAgICBwYXRoID0gcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gXy5tYXAob2JqLCBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICB2YXIgbWV0aG9kID0gZnVuYztcbiAgICAgIGlmICghbWV0aG9kKSB7XG4gICAgICAgIGlmIChjb250ZXh0UGF0aCAmJiBjb250ZXh0UGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICBjb250ZXh0ID0gZGVlcEdldChjb250ZXh0LCBjb250ZXh0UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRleHQgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgbWV0aG9kID0gY29udGV4dFtwYXRoXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBtZXRob2QgPT0gbnVsbCA/IG1ldGhvZCA6IG1ldGhvZC5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCB8fCB0eXBlb2YgaXRlcmF0ZWUgPT0gJ251bWJlcicgJiYgdHlwZW9mIG9ialswXSAhPSAnb2JqZWN0JyAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSA+IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odiwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdjtcbiAgICAgICAgICBsYXN0Q29tcHV0ZWQgPSBjb21wdXRlZDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtaW5pbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1pbiA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IEluZmluaXR5LFxuICAgICAgICB2YWx1ZSwgY29tcHV0ZWQ7XG4gICAgaWYgKGl0ZXJhdGVlID09IG51bGwgfHwgdHlwZW9mIGl0ZXJhdGVlID09ICdudW1iZXInICYmIHR5cGVvZiBvYmpbMF0gIT0gJ29iamVjdCcgJiYgb2JqICE9IG51bGwpIHtcbiAgICAgIG9iaiA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iai5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IG9ialtpXTtcbiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgPCByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHYsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodiwgaW5kZXgsIGxpc3QpO1xuICAgICAgICBpZiAoY29tcHV0ZWQgPCBsYXN0Q29tcHV0ZWQgfHwgY29tcHV0ZWQgPT09IEluZmluaXR5ICYmIHJlc3VsdCA9PT0gSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2O1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBTaHVmZmxlIGEgY29sbGVjdGlvbi5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uc2FtcGxlKG9iaiwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIFNhbXBsZSAqKm4qKiByYW5kb20gdmFsdWVzIGZyb20gYSBjb2xsZWN0aW9uIHVzaW5nIHRoZSBtb2Rlcm4gdmVyc2lvbiBvZiB0aGVcbiAgLy8gW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlcuKAk1lhdGVzX3NodWZmbGUpLlxuICAvLyBJZiAqKm4qKiBpcyBub3Qgc3BlY2lmaWVkLCByZXR1cm5zIGEgc2luZ2xlIHJhbmRvbSBlbGVtZW50LlxuICAvLyBUaGUgaW50ZXJuYWwgYGd1YXJkYCBhcmd1bWVudCBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBtYXBgLlxuICBfLnNhbXBsZSA9IGZ1bmN0aW9uKG9iaiwgbiwgZ3VhcmQpIHtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSB7XG4gICAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgICByZXR1cm4gb2JqW18ucmFuZG9tKG9iai5sZW5ndGggLSAxKV07XG4gICAgfVxuICAgIHZhciBzYW1wbGUgPSBpc0FycmF5TGlrZShvYmopID8gXy5jbG9uZShvYmopIDogXy52YWx1ZXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKHNhbXBsZSk7XG4gICAgbiA9IE1hdGgubWF4KE1hdGgubWluKG4sIGxlbmd0aCksIDApO1xuICAgIHZhciBsYXN0ID0gbGVuZ3RoIC0gMTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbjsgaW5kZXgrKykge1xuICAgICAgdmFyIHJhbmQgPSBfLnJhbmRvbShpbmRleCwgbGFzdCk7XG4gICAgICB2YXIgdGVtcCA9IHNhbXBsZVtpbmRleF07XG4gICAgICBzYW1wbGVbaW5kZXhdID0gc2FtcGxlW3JhbmRdO1xuICAgICAgc2FtcGxlW3JhbmRdID0gdGVtcDtcbiAgICB9XG4gICAgcmV0dXJuIHNhbXBsZS5zbGljZSgwLCBuKTtcbiAgfTtcblxuICAvLyBTb3J0IHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24gcHJvZHVjZWQgYnkgYW4gaXRlcmF0ZWUuXG4gIF8uc29ydEJ5ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBsaXN0KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIGluZGV4OiBpbmRleCsrLFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGtleSwgbGlzdClcbiAgICAgIH07XG4gICAgfSkuc29ydChmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuICAgICAgdmFyIGEgPSBsZWZ0LmNyaXRlcmlhO1xuICAgICAgdmFyIGIgPSByaWdodC5jcml0ZXJpYTtcbiAgICAgIGlmIChhICE9PSBiKSB7XG4gICAgICAgIGlmIChhID4gYiB8fCBhID09PSB2b2lkIDApIHJldHVybiAxO1xuICAgICAgICBpZiAoYSA8IGIgfHwgYiA9PT0gdm9pZCAwKSByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGVmdC5pbmRleCAtIHJpZ2h0LmluZGV4O1xuICAgIH0pLCAndmFsdWUnKTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiB1c2VkIGZvciBhZ2dyZWdhdGUgXCJncm91cCBieVwiIG9wZXJhdGlvbnMuXG4gIHZhciBncm91cCA9IGZ1bmN0aW9uKGJlaGF2aW9yLCBwYXJ0aXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHBhcnRpdGlvbiA/IFtbXSwgW11dIDoge307XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICB2YXIga2V5ID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBvYmopO1xuICAgICAgICBiZWhhdmlvcihyZXN1bHQsIHZhbHVlLCBrZXkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH07XG5cbiAgLy8gR3JvdXBzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24uIFBhc3MgZWl0aGVyIGEgc3RyaW5nIGF0dHJpYnV0ZVxuICAvLyB0byBncm91cCBieSwgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNyaXRlcmlvbi5cbiAgXy5ncm91cEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgaWYgKGhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0rKzsgZWxzZSByZXN1bHRba2V5XSA9IDE7XG4gIH0pO1xuXG4gIHZhciByZVN0clN5bWJvbCA9IC9bXlxcdWQ4MDAtXFx1ZGZmZl18W1xcdWQ4MDAtXFx1ZGJmZl1bXFx1ZGMwMC1cXHVkZmZmXXxbXFx1ZDgwMC1cXHVkZmZmXS9nO1xuICAvLyBTYWZlbHkgY3JlYXRlIGEgcmVhbCwgbGl2ZSBhcnJheSBmcm9tIGFueXRoaW5nIGl0ZXJhYmxlLlxuICBfLnRvQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIW9iaikgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzQXJyYXkob2JqKSkgcmV0dXJuIHNsaWNlLmNhbGwob2JqKTtcbiAgICBpZiAoXy5pc1N0cmluZyhvYmopKSB7XG4gICAgICAvLyBLZWVwIHN1cnJvZ2F0ZSBwYWlyIGNoYXJhY3RlcnMgdG9nZXRoZXJcbiAgICAgIHJldHVybiBvYmoubWF0Y2gocmVTdHJTeW1ib2wpO1xuICAgIH1cbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkgcmV0dXJuIF8ubWFwKG9iaiwgXy5pZGVudGl0eSk7XG4gICAgcmV0dXJuIF8udmFsdWVzKG9iaik7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JqZWN0LlxuICBfLnNpemUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHJldHVybiAwO1xuICAgIHJldHVybiBpc0FycmF5TGlrZShvYmopID8gb2JqLmxlbmd0aCA6IF8ua2V5cyhvYmopLmxlbmd0aDtcbiAgfTtcblxuICAvLyBTcGxpdCBhIGNvbGxlY3Rpb24gaW50byB0d28gYXJyYXlzOiBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIHNhdGlzZnkgdGhlIGdpdmVuXG4gIC8vIHByZWRpY2F0ZSwgYW5kIG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAgXy5wYXJ0aXRpb24gPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBwYXNzKSB7XG4gICAgcmVzdWx0W3Bhc3MgPyAwIDogMV0ucHVzaCh2YWx1ZSk7XG4gIH0sIHRydWUpO1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPCAxKSByZXR1cm4gbiA9PSBudWxsID8gdm9pZCAwIDogW107XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5WzBdO1xuICAgIHJldHVybiBfLmluaXRpYWwoYXJyYXksIGFycmF5Lmxlbmd0aCAtIG4pO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGxhc3QgZW50cnkgb2YgdGhlIGFycmF5LiBFc3BlY2lhbGx5IHVzZWZ1bCBvblxuICAvLyB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiBhbGwgdGhlIHZhbHVlcyBpblxuICAvLyB0aGUgYXJyYXksIGV4Y2x1ZGluZyB0aGUgbGFzdCBOLlxuICBfLmluaXRpYWwgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgMCwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gKG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKSkpO1xuICB9O1xuXG4gIC8vIEdldCB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIGFycmF5LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIHRoZSBsYXN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5sYXN0ID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgaWYgKGFycmF5ID09IG51bGwgfHwgYXJyYXkubGVuZ3RoIDwgMSkgcmV0dXJuIG4gPT0gbnVsbCA/IHZvaWQgMCA6IFtdO1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbiAgICByZXR1cm4gXy5yZXN0KGFycmF5LCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSBuKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgZmlyc3QgZW50cnkgb2YgdGhlIGFycmF5LiBBbGlhc2VkIGFzIGB0YWlsYCBhbmQgYGRyb3BgLlxuICAvLyBFc3BlY2lhbGx5IHVzZWZ1bCBvbiB0aGUgYXJndW1lbnRzIG9iamVjdC4gUGFzc2luZyBhbiAqKm4qKiB3aWxsIHJldHVyblxuICAvLyB0aGUgcmVzdCBOIHZhbHVlcyBpbiB0aGUgYXJyYXkuXG4gIF8ucmVzdCA9IF8udGFpbCA9IF8uZHJvcCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCBuID09IG51bGwgfHwgZ3VhcmQgPyAxIDogbik7XG4gIH07XG5cbiAgLy8gVHJpbSBvdXQgYWxsIGZhbHN5IHZhbHVlcyBmcm9tIGFuIGFycmF5LlxuICBfLmNvbXBhY3QgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgQm9vbGVhbik7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgYSByZWN1cnNpdmUgYGZsYXR0ZW5gIGZ1bmN0aW9uLlxuICB2YXIgZmxhdHRlbiA9IGZ1bmN0aW9uKGlucHV0LCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCkge1xuICAgIG91dHB1dCA9IG91dHB1dCB8fCBbXTtcbiAgICB2YXIgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGlucHV0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBpbnB1dFtpXTtcbiAgICAgIGlmIChpc0FycmF5TGlrZSh2YWx1ZSkgJiYgKF8uaXNBcnJheSh2YWx1ZSkgfHwgXy5pc0FyZ3VtZW50cyh2YWx1ZSkpKSB7XG4gICAgICAgIC8vIEZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0LlxuICAgICAgICBpZiAoc2hhbGxvdykge1xuICAgICAgICAgIHZhciBqID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlIChqIDwgbGVuKSBvdXRwdXRbaWR4KytdID0gdmFsdWVbaisrXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QsIG91dHB1dCk7XG4gICAgICAgICAgaWR4ID0gb3V0cHV0Lmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghc3RyaWN0KSB7XG4gICAgICAgIG91dHB1dFtpZHgrK10gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfTtcblxuICAvLyBGbGF0dGVuIG91dCBhbiBhcnJheSwgZWl0aGVyIHJlY3Vyc2l2ZWx5IChieSBkZWZhdWx0KSwgb3IganVzdCBvbmUgbGV2ZWwuXG4gIF8uZmxhdHRlbiA9IGZ1bmN0aW9uKGFycmF5LCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIGZsYXR0ZW4oYXJyYXksIHNoYWxsb3csIGZhbHNlKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoZSBhcnJheSB0aGF0IGRvZXMgbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCB2YWx1ZShzKS5cbiAgXy53aXRob3V0ID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcnJheSwgb3RoZXJBcnJheXMpIHtcbiAgICByZXR1cm4gXy5kaWZmZXJlbmNlKGFycmF5LCBvdGhlckFycmF5cyk7XG4gIH0pO1xuXG4gIC8vIFByb2R1Y2UgYSBkdXBsaWNhdGUtZnJlZSB2ZXJzaW9uIG9mIHRoZSBhcnJheS4gSWYgdGhlIGFycmF5IGhhcyBhbHJlYWR5XG4gIC8vIGJlZW4gc29ydGVkLCB5b3UgaGF2ZSB0aGUgb3B0aW9uIG9mIHVzaW5nIGEgZmFzdGVyIGFsZ29yaXRobS5cbiAgLy8gVGhlIGZhc3RlciBhbGdvcml0aG0gd2lsbCBub3Qgd29yayB3aXRoIGFuIGl0ZXJhdGVlIGlmIHRoZSBpdGVyYXRlZVxuICAvLyBpcyBub3QgYSBvbmUtdG8tb25lIGZ1bmN0aW9uLCBzbyBwcm92aWRpbmcgYW4gaXRlcmF0ZWUgd2lsbCBkaXNhYmxlXG4gIC8vIHRoZSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBBbGlhc2VkIGFzIGB1bmlxdWVgLlxuICBfLnVuaXEgPSBfLnVuaXF1ZSA9IGZ1bmN0aW9uKGFycmF5LCBpc1NvcnRlZCwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKGlzU29ydGVkKSkge1xuICAgICAgY29udGV4dCA9IGl0ZXJhdGVlO1xuICAgICAgaXRlcmF0ZWUgPSBpc1NvcnRlZDtcbiAgICAgIGlzU29ydGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpdGVyYXRlZSAhPSBudWxsKSBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIHNlZW4gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBhcnJheVtpXSxcbiAgICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlID8gaXRlcmF0ZWUodmFsdWUsIGksIGFycmF5KSA6IHZhbHVlO1xuICAgICAgaWYgKGlzU29ydGVkICYmICFpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIWkgfHwgc2VlbiAhPT0gY29tcHV0ZWQpIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgc2VlbiA9IGNvbXB1dGVkO1xuICAgICAgfSBlbHNlIGlmIChpdGVyYXRlZSkge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoc2VlbiwgY29tcHV0ZWQpKSB7XG4gICAgICAgICAgc2Vlbi5wdXNoKGNvbXB1dGVkKTtcbiAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIV8uY29udGFpbnMocmVzdWx0LCB2YWx1ZSkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyB0aGUgdW5pb246IGVhY2ggZGlzdGluY3QgZWxlbWVudCBmcm9tIGFsbCBvZlxuICAvLyB0aGUgcGFzc2VkLWluIGFycmF5cy5cbiAgXy51bmlvbiA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJyYXlzKSB7XG4gICAgcmV0dXJuIF8udW5pcShmbGF0dGVuKGFycmF5cywgdHJ1ZSwgdHJ1ZSkpO1xuICB9KTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgZXZlcnkgaXRlbSBzaGFyZWQgYmV0d2VlbiBhbGwgdGhlXG4gIC8vIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8uaW50ZXJzZWN0aW9uID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gYXJyYXlbaV07XG4gICAgICBpZiAoXy5jb250YWlucyhyZXN1bHQsIGl0ZW0pKSBjb250aW51ZTtcbiAgICAgIHZhciBqO1xuICAgICAgZm9yIChqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCByZXN0KSB7XG4gICAgcmVzdCA9IGZsYXR0ZW4ocmVzdCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICByZXR1cm4gIV8uY29udGFpbnMocmVzdCwgdmFsdWUpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBDb21wbGVtZW50IG9mIF8uemlwLiBVbnppcCBhY2NlcHRzIGFuIGFycmF5IG9mIGFycmF5cyBhbmQgZ3JvdXBzXG4gIC8vIGVhY2ggYXJyYXkncyBlbGVtZW50cyBvbiBzaGFyZWQgaW5kaWNlcy5cbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IHJlc3RBcmd1bWVudHMoXy51bnppcCk7XG5cbiAgLy8gQ29udmVydHMgbGlzdHMgaW50byBvYmplY3RzLiBQYXNzIGVpdGhlciBhIHNpbmdsZSBhcnJheSBvZiBgW2tleSwgdmFsdWVdYFxuICAvLyBwYWlycywgb3IgdHdvIHBhcmFsbGVsIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGggLS0gb25lIG9mIGtleXMsIGFuZCBvbmUgb2ZcbiAgLy8gdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzLiBQYXNzaW5nIGJ5IHBhaXJzIGlzIHRoZSByZXZlcnNlIG9mIF8ucGFpcnMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpcikge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICB2YXIgaW5kZXggPSBkaXIgPiAwID8gMCA6IGxlbmd0aCAtIDE7XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSByZXR1cm4gaW5kZXg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBvbiBhbiBhcnJheS1saWtlIHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVJbmRleEZpbmRlciA9IGZ1bmN0aW9uKGRpciwgcHJlZGljYXRlRmluZCwgc29ydGVkSW5kZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oYXJyYXksIGl0ZW0sIGlkeCkge1xuICAgICAgdmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpO1xuICAgICAgaWYgKHR5cGVvZiBpZHggPT0gJ251bWJlcicpIHtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICBpID0gaWR4ID49IDAgPyBpZHggOiBNYXRoLm1heChpZHggKyBsZW5ndGgsIGkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBpdGVtIGluIGFuIGFycmF5LFxuICAvLyBvciAtMSBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LlxuICAvLyBJZiB0aGUgYXJyYXkgaXMgbGFyZ2UgYW5kIGFscmVhZHkgaW4gc29ydCBvcmRlciwgcGFzcyBgdHJ1ZWBcbiAgLy8gZm9yICoqaXNTb3J0ZWQqKiB0byB1c2UgYmluYXJ5IHNlYXJjaC5cbiAgXy5pbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoMSwgXy5maW5kSW5kZXgsIF8uc29ydGVkSW5kZXgpO1xuICBfLmxhc3RJbmRleE9mID0gY3JlYXRlSW5kZXhGaW5kZXIoLTEsIF8uZmluZExhc3RJbmRleCk7XG5cbiAgLy8gR2VuZXJhdGUgYW4gaW50ZWdlciBBcnJheSBjb250YWluaW5nIGFuIGFyaXRobWV0aWMgcHJvZ3Jlc3Npb24uIEEgcG9ydCBvZlxuICAvLyB0aGUgbmF0aXZlIFB5dGhvbiBgcmFuZ2UoKWAgZnVuY3Rpb24uIFNlZVxuICAvLyBbdGhlIFB5dGhvbiBkb2N1bWVudGF0aW9uXShodHRwOi8vZG9jcy5weXRob24ub3JnL2xpYnJhcnkvZnVuY3Rpb25zLmh0bWwjcmFuZ2UpLlxuICBfLnJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIHN0b3AsIHN0ZXApIHtcbiAgICBpZiAoc3RvcCA9PSBudWxsKSB7XG4gICAgICBzdG9wID0gc3RhcnQgfHwgMDtcbiAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgaWYgKCFzdGVwKSB7XG4gICAgICBzdGVwID0gc3RvcCA8IHN0YXJ0ID8gLTEgOiAxO1xuICAgIH1cblxuICAgIHZhciBsZW5ndGggPSBNYXRoLm1heChNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCkgLyBzdGVwKSwgMCk7XG4gICAgdmFyIHJhbmdlID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGxlbmd0aDsgaWR4KyssIHN0YXJ0ICs9IHN0ZXApIHtcbiAgICAgIHJhbmdlW2lkeF0gPSBzdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2U7XG4gIH07XG5cbiAgLy8gQ2h1bmsgYSBzaW5nbGUgYXJyYXkgaW50byBtdWx0aXBsZSBhcnJheXMsIGVhY2ggY29udGFpbmluZyBgY291bnRgIG9yIGZld2VyXG4gIC8vIGl0ZW1zLlxuICBfLmNodW5rID0gZnVuY3Rpb24oYXJyYXksIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IG51bGwgfHwgY291bnQgPCAxKSByZXR1cm4gW107XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBpID0gMCwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICByZXN1bHQucHVzaChzbGljZS5jYWxsKGFycmF5LCBpLCBpICs9IGNvdW50KSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gKGFoZW0pIEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBEZXRlcm1pbmVzIHdoZXRoZXIgdG8gZXhlY3V0ZSBhIGZ1bmN0aW9uIGFzIGEgY29uc3RydWN0b3JcbiAgLy8gb3IgYSBub3JtYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICB2YXIgZXhlY3V0ZUJvdW5kID0gZnVuY3Rpb24oc291cmNlRnVuYywgYm91bmRGdW5jLCBjb250ZXh0LCBjYWxsaW5nQ29udGV4dCwgYXJncykge1xuICAgIGlmICghKGNhbGxpbmdDb250ZXh0IGluc3RhbmNlb2YgYm91bmRGdW5jKSkgcmV0dXJuIHNvdXJjZUZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgdmFyIHNlbGYgPSBiYXNlQ3JlYXRlKHNvdXJjZUZ1bmMucHJvdG90eXBlKTtcbiAgICB2YXIgcmVzdWx0ID0gc291cmNlRnVuYy5hcHBseShzZWxmLCBhcmdzKTtcbiAgICBpZiAoXy5pc09iamVjdChyZXN1bHQpKSByZXR1cm4gcmVzdWx0O1xuICAgIHJldHVybiBzZWxmO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIGZ1bmN0aW9uIGJvdW5kIHRvIGEgZ2l2ZW4gb2JqZWN0IChhc3NpZ25pbmcgYHRoaXNgLCBhbmQgYXJndW1lbnRzLFxuICAvLyBvcHRpb25hbGx5KS4gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYEZ1bmN0aW9uLmJpbmRgIGlmXG4gIC8vIGF2YWlsYWJsZS5cbiAgXy5iaW5kID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBib3VuZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oY2FsbEFyZ3MpIHtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIGNvbnRleHQsIHRoaXMsIGFyZ3MuY29uY2F0KGNhbGxBcmdzKSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICAvLyBQYXJ0aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiBieSBjcmVhdGluZyBhIHZlcnNpb24gdGhhdCBoYXMgaGFkIHNvbWUgb2YgaXRzXG4gIC8vIGFyZ3VtZW50cyBwcmUtZmlsbGVkLCB3aXRob3V0IGNoYW5naW5nIGl0cyBkeW5hbWljIGB0aGlzYCBjb250ZXh0LiBfIGFjdHNcbiAgLy8gYXMgYSBwbGFjZWhvbGRlciBieSBkZWZhdWx0LCBhbGxvd2luZyBhbnkgY29tYmluYXRpb24gb2YgYXJndW1lbnRzIHRvIGJlXG4gIC8vIHByZS1maWxsZWQuIFNldCBgXy5wYXJ0aWFsLnBsYWNlaG9sZGVyYCBmb3IgYSBjdXN0b20gcGxhY2Vob2xkZXIgYXJndW1lbnQuXG4gIF8ucGFydGlhbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgYm91bmRBcmdzKSB7XG4gICAgdmFyIHBsYWNlaG9sZGVyID0gXy5wYXJ0aWFsLnBsYWNlaG9sZGVyO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uID0gMCwgbGVuZ3RoID0gYm91bmRBcmdzLmxlbmd0aDtcbiAgICAgIHZhciBhcmdzID0gQXJyYXkobGVuZ3RoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJnc1tpXSA9IGJvdW5kQXJnc1tpXSA9PT0gcGxhY2Vob2xkZXIgPyBhcmd1bWVudHNbcG9zaXRpb24rK10gOiBib3VuZEFyZ3NbaV07XG4gICAgICB9XG4gICAgICB3aGlsZSAocG9zaXRpb24gPCBhcmd1bWVudHMubGVuZ3RoKSBhcmdzLnB1c2goYXJndW1lbnRzW3Bvc2l0aW9uKytdKTtcbiAgICAgIHJldHVybiBleGVjdXRlQm91bmQoZnVuYywgYm91bmQsIHRoaXMsIHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgcmV0dXJuIGJvdW5kO1xuICB9KTtcblxuICBfLnBhcnRpYWwucGxhY2Vob2xkZXIgPSBfO1xuXG4gIC8vIEJpbmQgYSBudW1iZXIgb2YgYW4gb2JqZWN0J3MgbWV0aG9kcyB0byB0aGF0IG9iamVjdC4gUmVtYWluaW5nIGFyZ3VtZW50c1xuICAvLyBhcmUgdGhlIG1ldGhvZCBuYW1lcyB0byBiZSBib3VuZC4gVXNlZnVsIGZvciBlbnN1cmluZyB0aGF0IGFsbCBjYWxsYmFja3NcbiAgLy8gZGVmaW5lZCBvbiBhbiBvYmplY3QgYmVsb25nIHRvIGl0LlxuICBfLmJpbmRBbGwgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgdmFyIGluZGV4ID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKGluZGV4IDwgMSkgdGhyb3cgbmV3IEVycm9yKCdiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzJyk7XG4gICAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIG9ialtrZXldID0gXy5iaW5kKG9ialtrZXldLCBvYmopO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghaGFzKGNhY2hlLCBhZGRyZXNzKSkgY2FjaGVbYWRkcmVzc10gPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gY2FjaGVbYWRkcmVzc107XG4gICAgfTtcbiAgICBtZW1vaXplLmNhY2hlID0ge307XG4gICAgcmV0dXJuIG1lbW9pemU7XG4gIH07XG5cbiAgLy8gRGVsYXlzIGEgZnVuY3Rpb24gZm9yIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCBhbmQgdGhlbiBjYWxsc1xuICAvLyBpdCB3aXRoIHRoZSBhcmd1bWVudHMgc3VwcGxpZWQuXG4gIF8uZGVsYXkgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGFyZ3MpIHtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0sIHdhaXQpO1xuICB9KTtcblxuICAvLyBEZWZlcnMgYSBmdW5jdGlvbiwgc2NoZWR1bGluZyBpdCB0byBydW4gYWZ0ZXIgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXNcbiAgLy8gY2xlYXJlZC5cbiAgXy5kZWZlciA9IF8ucGFydGlhbChfLmRlbGF5LCBfLCAxKTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAgLy8gZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gIC8vIGFzIG11Y2ggYXMgaXQgY2FuLCB3aXRob3V0IGV2ZXIgZ29pbmcgbW9yZSB0aGFuIG9uY2UgcGVyIGB3YWl0YCBkdXJhdGlvbjtcbiAgLy8gYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAgLy8gYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gIF8udGhyb3R0bGUgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gICAgdmFyIHRpbWVvdXQsIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcbiAgICB2YXIgcHJldmlvdXMgPSAwO1xuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG5cbiAgICB2YXIgdGhyb3R0bGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbm93ID0gXy5ub3coKTtcbiAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG4gICAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICBpZiAocmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gd2FpdCkge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdGhyb3R0bGVkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgcHJldmlvdXMgPSAwO1xuICAgICAgdGltZW91dCA9IGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRocm90dGxlZDtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuXG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oY29udGV4dCwgYXJncykge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoYXJncykgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlYm91bmNlZCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJncykge1xuICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgdmFyIGNhbGxOb3cgPSAhdGltZW91dDtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICBpZiAoY2FsbE5vdykgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXQgPSBfLmRlbGF5KGxhdGVyLCB3YWl0LCB0aGlzLCBhcmdzKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGRlYm91bmNlZC5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVib3VuY2VkO1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgXy5yZXN0QXJndW1lbnRzID0gcmVzdEFyZ3VtZW50cztcblxuICAvLyBPYmplY3QgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBLZXlzIGluIElFIDwgOSB0aGF0IHdvbid0IGJlIGl0ZXJhdGVkIGJ5IGBmb3Iga2V5IGluIC4uLmAgYW5kIHRodXMgbWlzc2VkLlxuICB2YXIgaGFzRW51bUJ1ZyA9ICF7dG9TdHJpbmc6IG51bGx9LnByb3BlcnR5SXNFbnVtZXJhYmxlKCd0b1N0cmluZycpO1xuICB2YXIgbm9uRW51bWVyYWJsZVByb3BzID0gWyd2YWx1ZU9mJywgJ2lzUHJvdG90eXBlT2YnLCAndG9TdHJpbmcnLFxuICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdoYXNPd25Qcm9wZXJ0eScsICd0b0xvY2FsZVN0cmluZyddO1xuXG4gIHZhciBjb2xsZWN0Tm9uRW51bVByb3BzID0gZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIG5vbkVudW1JZHggPSBub25FbnVtZXJhYmxlUHJvcHMubGVuZ3RoO1xuICAgIHZhciBjb25zdHJ1Y3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICB2YXIgcHJvdG8gPSBfLmlzRnVuY3Rpb24oY29uc3RydWN0b3IpICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoaGFzKG9iaiwgcHJvcCkgJiYgIV8uY29udGFpbnMoa2V5cywgcHJvcCkpIGtleXMucHVzaChwcm9wKTtcblxuICAgIHdoaWxlIChub25FbnVtSWR4LS0pIHtcbiAgICAgIHByb3AgPSBub25FbnVtZXJhYmxlUHJvcHNbbm9uRW51bUlkeF07XG4gICAgICBpZiAocHJvcCBpbiBvYmogJiYgb2JqW3Byb3BdICE9PSBwcm90b1twcm9wXSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkge1xuICAgICAgICBrZXlzLnB1c2gocHJvcCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSBuYW1lcyBvZiBhbiBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgLy8gRGVsZWdhdGVzIHRvICoqRUNNQVNjcmlwdCA1KioncyBuYXRpdmUgYE9iamVjdC5rZXlzYC5cbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChoYXMob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcbiAgICAvLyBBaGVtLCBJRSA8IDkuXG4gICAgaWYgKGhhc0VudW1CdWcpIGNvbGxlY3ROb25FbnVtUHJvcHMob2JqLCBrZXlzKTtcbiAgICByZXR1cm4ga2V5cztcbiAgfTtcblxuICAvLyBSZXRyaWV2ZSBhbGwgdGhlIHByb3BlcnR5IG5hbWVzIG9mIGFuIG9iamVjdC5cbiAgXy5hbGxLZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIHRoZSB2YWx1ZXMgb2YgYW4gb2JqZWN0J3MgcHJvcGVydGllcy5cbiAgXy52YWx1ZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgdmFsdWVzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YWx1ZXNbaV0gPSBvYmpba2V5c1tpXV07XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBvYmplY3QuXG4gIC8vIEluIGNvbnRyYXN0IHRvIF8ubWFwIGl0IHJldHVybnMgYW4gb2JqZWN0LlxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IHt9O1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5c1tpbmRleF07XG4gICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGEgbGlzdCBvZiBgW2tleSwgdmFsdWVdYCBwYWlycy5cbiAgLy8gVGhlIG9wcG9zaXRlIG9mIF8ub2JqZWN0LlxuICBfLnBhaXJzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICB2YXIgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgdmFyIHBhaXJzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBwYWlyc1tpXSA9IFtrZXlzW2ldLCBvYmpba2V5c1tpXV1dO1xuICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG4gIH07XG5cbiAgLy8gSW52ZXJ0IHRoZSBrZXlzIGFuZCB2YWx1ZXMgb2YgYW4gb2JqZWN0LiBUaGUgdmFsdWVzIG11c3QgYmUgc2VyaWFsaXphYmxlLlxuICBfLmludmVydCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICByZXN1bHRbb2JqW2tleXNbaV1dXSA9IGtleXNbaV07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgc29ydGVkIGxpc3Qgb2YgdGhlIGZ1bmN0aW9uIG5hbWVzIGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0LlxuICAvLyBBbGlhc2VkIGFzIGBtZXRob2RzYC5cbiAgXy5mdW5jdGlvbnMgPSBfLm1ldGhvZHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKG9ialtrZXldKSkgbmFtZXMucHVzaChrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gbmFtZXMuc29ydCgpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCBkZWZhdWx0cykge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaWYgKGRlZmF1bHRzKSBvYmogPSBPYmplY3Qob2JqKTtcbiAgICAgIGlmIChsZW5ndGggPCAyIHx8IG9iaiA9PSBudWxsKSByZXR1cm4gb2JqO1xuICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XSxcbiAgICAgICAgICAgIGtleXMgPSBrZXlzRnVuYyhzb3VyY2UpLFxuICAgICAgICAgICAgbCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmICghZGVmYXVsdHMgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEV4dGVuZCBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgcHJvcGVydGllcyBpbiBwYXNzZWQtaW4gb2JqZWN0KHMpLlxuICBfLmV4dGVuZCA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cyk7XG5cbiAgLy8gQXNzaWducyBhIGdpdmVuIG9iamVjdCB3aXRoIGFsbCB0aGUgb3duIHByb3BlcnRpZXMgaW4gdGhlIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3QuXG4gIF8uZmluZEtleSA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopLCBrZXk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtrZXldLCBrZXksIG9iaikpIHJldHVybiBrZXk7XG4gICAgfVxuICB9O1xuXG4gIC8vIEludGVybmFsIHBpY2sgaGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiBgb2JqYCBoYXMga2V5IGBrZXlgLlxuICB2YXIga2V5SW5PYmogPSBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICByZXR1cm4ga2V5IGluIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgb25seSBjb250YWluaW5nIHRoZSB3aGl0ZWxpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLnBpY2sgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwga2V5cykge1xuICAgIHZhciByZXN1bHQgPSB7fSwgaXRlcmF0ZWUgPSBrZXlzWzBdO1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHJlc3VsdDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBrZXlzWzFdKTtcbiAgICAgIGtleXMgPSBfLmFsbEtleXMob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBrZXlJbk9iajtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGtleXMsIGZhbHNlLCBmYWxzZSk7XG4gICAgICBvYmogPSBPYmplY3Qob2JqKTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gICAgICBpZiAoaXRlcmF0ZWUodmFsdWUsIGtleSwgb2JqKSkgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IHdpdGhvdXQgdGhlIGJsYWNrbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ub21pdCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIGl0ZXJhdGVlID0ga2V5c1swXSwgY29udGV4dDtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKGl0ZXJhdGVlKSkge1xuICAgICAgaXRlcmF0ZWUgPSBfLm5lZ2F0ZShpdGVyYXRlZSk7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSBjb250ZXh0ID0ga2V5c1sxXTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5cyA9IF8ubWFwKGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKSwgU3RyaW5nKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgICAgICByZXR1cm4gIV8uY29udGFpbnMoa2V5cywga2V5KTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBfLnBpY2sob2JqLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gIH0pO1xuXG4gIC8vIEZpbGwgaW4gYSBnaXZlbiBvYmplY3Qgd2l0aCBkZWZhdWx0IHByb3BlcnRpZXMuXG4gIF8uZGVmYXVsdHMgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMsIHRydWUpO1xuXG4gIC8vIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGUgZ2l2ZW4gcHJvdG90eXBlIG9iamVjdC5cbiAgLy8gSWYgYWRkaXRpb25hbCBwcm9wZXJ0aWVzIGFyZSBwcm92aWRlZCB0aGVuIHRoZXkgd2lsbCBiZSBhZGRlZCB0byB0aGVcbiAgLy8gY3JlYXRlZCBvYmplY3QuXG4gIF8uY3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlLCBwcm9wcykge1xuICAgIHZhciByZXN1bHQgPSBiYXNlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgaWYgKHByb3BzKSBfLmV4dGVuZE93bihyZXN1bHQsIHByb3BzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIChzaGFsbG93LWNsb25lZCkgZHVwbGljYXRlIG9mIGFuIG9iamVjdC5cbiAgXy5jbG9uZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghXy5pc09iamVjdChvYmopKSByZXR1cm4gb2JqO1xuICAgIHJldHVybiBfLmlzQXJyYXkob2JqKSA/IG9iai5zbGljZSgpIDogXy5leHRlbmQoe30sIG9iaik7XG4gIH07XG5cbiAgLy8gSW52b2tlcyBpbnRlcmNlcHRvciB3aXRoIHRoZSBvYmosIGFuZCB0aGVuIHJldHVybnMgb2JqLlxuICAvLyBUaGUgcHJpbWFyeSBwdXJwb3NlIG9mIHRoaXMgbWV0aG9kIGlzIHRvIFwidGFwIGludG9cIiBhIG1ldGhvZCBjaGFpbiwgaW5cbiAgLy8gb3JkZXIgdG8gcGVyZm9ybSBvcGVyYXRpb25zIG9uIGludGVybWVkaWF0ZSByZXN1bHRzIHdpdGhpbiB0aGUgY2hhaW4uXG4gIF8udGFwID0gZnVuY3Rpb24ob2JqLCBpbnRlcmNlcHRvcikge1xuICAgIGludGVyY2VwdG9yKG9iaik7XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBSZXR1cm5zIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZiBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5pc01hdGNoID0gZnVuY3Rpb24ob2JqZWN0LCBhdHRycykge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKGF0dHJzKSwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSByZXR1cm4gIWxlbmd0aDtcbiAgICB2YXIgb2JqID0gT2JqZWN0KG9iamVjdCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoYXR0cnNba2V5XSAhPT0gb2JqW2tleV0gfHwgIShrZXkgaW4gb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuXG4gIC8vIEludGVybmFsIHJlY3Vyc2l2ZSBjb21wYXJpc29uIGZ1bmN0aW9uIGZvciBgaXNFcXVhbGAuXG4gIHZhciBlcSwgZGVlcEVxO1xuICBlcSA9IGZ1bmN0aW9uKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIC8vIFNlZSB0aGUgW0hhcm1vbnkgYGVnYWxgIHByb3Bvc2FsXShodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OmVnYWwpLlxuICAgIGlmIChhID09PSBiKSByZXR1cm4gYSAhPT0gMCB8fCAxIC8gYSA9PT0gMSAvIGI7XG4gICAgLy8gYG51bGxgIG9yIGB1bmRlZmluZWRgIG9ubHkgZXF1YWwgdG8gaXRzZWxmIChzdHJpY3QgY29tcGFyaXNvbikuXG4gICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgIGlmIChhICE9PSBhKSByZXR1cm4gYiAhPT0gYjtcbiAgICAvLyBFeGhhdXN0IHByaW1pdGl2ZSBjaGVja3NcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBhO1xuICAgIGlmICh0eXBlICE9PSAnZnVuY3Rpb24nICYmIHR5cGUgIT09ICdvYmplY3QnICYmIHR5cGVvZiBiICE9ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGRlZXBFcShhLCBiLCBhU3RhY2ssIGJTdGFjayk7XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgZGVlcEVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBVbndyYXAgYW55IHdyYXBwZWQgb2JqZWN0cy5cbiAgICBpZiAoYSBpbnN0YW5jZW9mIF8pIGEgPSBhLl93cmFwcGVkO1xuICAgIGlmIChiIGluc3RhbmNlb2YgXykgYiA9IGIuX3dyYXBwZWQ7XG4gICAgLy8gQ29tcGFyZSBgW1tDbGFzc11dYCBuYW1lcy5cbiAgICB2YXIgY2xhc3NOYW1lID0gdG9TdHJpbmcuY2FsbChhKTtcbiAgICBpZiAoY2xhc3NOYW1lICE9PSB0b1N0cmluZy5jYWxsKGIpKSByZXR1cm4gZmFsc2U7XG4gICAgc3dpdGNoIChjbGFzc05hbWUpIHtcbiAgICAgIC8vIFN0cmluZ3MsIG51bWJlcnMsIHJlZ3VsYXIgZXhwcmVzc2lvbnMsIGRhdGVzLCBhbmQgYm9vbGVhbnMgYXJlIGNvbXBhcmVkIGJ5IHZhbHVlLlxuICAgICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICAgIC8vIFJlZ0V4cHMgYXJlIGNvZXJjZWQgdG8gc3RyaW5ncyBmb3IgY29tcGFyaXNvbiAoTm90ZTogJycgKyAvYS9pID09PSAnL2EvaScpXG4gICAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgICAvLyBQcmltaXRpdmVzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIG9iamVjdCB3cmFwcGVycyBhcmUgZXF1aXZhbGVudDsgdGh1cywgYFwiNVwiYCBpc1xuICAgICAgICAvLyBlcXVpdmFsZW50IHRvIGBuZXcgU3RyaW5nKFwiNVwiKWAuXG4gICAgICAgIHJldHVybiAnJyArIGEgPT09ICcnICsgYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgICAgIC8vIE9iamVjdChOYU4pIGlzIGVxdWl2YWxlbnQgdG8gTmFOLlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3ltYm9sXSc6XG4gICAgICAgIHJldHVybiBTeW1ib2xQcm90by52YWx1ZU9mLmNhbGwoYSkgPT09IFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChiKTtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKGhhcyhiLCBrZXkpICYmIGVxKGFba2V5XSwgYltrZXldLCBhU3RhY2ssIGJTdGFjaykpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFJlbW92ZSB0aGUgZmlyc3Qgb2JqZWN0IGZyb20gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIGFTdGFjay5wb3AoKTtcbiAgICBiU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSBhIGRlZXAgY29tcGFyaXNvbiB0byBjaGVjayBpZiB0d28gb2JqZWN0cyBhcmUgZXF1YWwuXG4gIF8uaXNFcXVhbCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXEoYSwgYik7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiBhcnJheSwgc3RyaW5nLCBvciBvYmplY3QgZW1wdHk/XG4gIC8vIEFuIFwiZW1wdHlcIiBvYmplY3QgaGFzIG5vIGVudW1lcmFibGUgb3duLXByb3BlcnRpZXMuXG4gIF8uaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgJiYgKF8uaXNBcnJheShvYmopIHx8IF8uaXNTdHJpbmcob2JqKSB8fCBfLmlzQXJndW1lbnRzKG9iaikpKSByZXR1cm4gb2JqLmxlbmd0aCA9PT0gMDtcbiAgICByZXR1cm4gXy5rZXlzKG9iaikubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBET00gZWxlbWVudD9cbiAgXy5pc0VsZW1lbnQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhbiBhcnJheT9cbiAgLy8gRGVsZWdhdGVzIHRvIEVDTUE1J3MgbmF0aXZlIEFycmF5LmlzQXJyYXlcbiAgXy5pc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgYW4gb2JqZWN0P1xuICBfLmlzT2JqZWN0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2Ygb2JqO1xuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhb2JqO1xuICB9O1xuXG4gIC8vIEFkZCBzb21lIGlzVHlwZSBtZXRob2RzOiBpc0FyZ3VtZW50cywgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzTnVtYmVyLCBpc0RhdGUsIGlzUmVnRXhwLCBpc0Vycm9yLCBpc01hcCwgaXNXZWFrTWFwLCBpc1NldCwgaXNXZWFrU2V0LlxuICBfLmVhY2goWydBcmd1bWVudHMnLCAnRnVuY3Rpb24nLCAnU3RyaW5nJywgJ051bWJlcicsICdEYXRlJywgJ1JlZ0V4cCcsICdFcnJvcicsICdTeW1ib2wnLCAnTWFwJywgJ1dlYWtNYXAnLCAnU2V0JywgJ1dlYWtTZXQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIF9bJ2lzJyArIG5hbWVdID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCAnICsgbmFtZSArICddJztcbiAgICB9O1xuICB9KTtcblxuICAvLyBEZWZpbmUgYSBmYWxsYmFjayB2ZXJzaW9uIG9mIHRoZSBtZXRob2QgaW4gYnJvd3NlcnMgKGFoZW0sIElFIDwgOSksIHdoZXJlXG4gIC8vIHRoZXJlIGlzbid0IGFueSBpbnNwZWN0YWJsZSBcIkFyZ3VtZW50c1wiIHR5cGUuXG4gIGlmICghXy5pc0FyZ3VtZW50cyhhcmd1bWVudHMpKSB7XG4gICAgXy5pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIGhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgU2FmYXJpIDggKCMxOTI5KSwgYW5kIFBoYW50b21KUyAoIzIyMzYpLlxuICB2YXIgbm9kZWxpc3QgPSByb290LmRvY3VtZW50ICYmIHJvb3QuZG9jdW1lbnQuY2hpbGROb2RlcztcbiAgaWYgKHR5cGVvZiAvLi8gIT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgSW50OEFycmF5ICE9ICdvYmplY3QnICYmIHR5cGVvZiBub2RlbGlzdCAhPSAnZnVuY3Rpb24nKSB7XG4gICAgXy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgIH07XG4gIH1cblxuICAvLyBJcyBhIGdpdmVuIG9iamVjdCBhIGZpbml0ZSBudW1iZXI/XG4gIF8uaXNGaW5pdGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gIV8uaXNTeW1ib2wob2JqKSAmJiBpc0Zpbml0ZShvYmopICYmICFpc05hTihwYXJzZUZsb2F0KG9iaikpO1xuICB9O1xuXG4gIC8vIElzIHRoZSBnaXZlbiB2YWx1ZSBgTmFOYD9cbiAgXy5pc05hTiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBfLmlzTnVtYmVyKG9iaikgJiYgaXNOYU4ob2JqKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGEgYm9vbGVhbj9cbiAgXy5pc0Jvb2xlYW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB0cnVlIHx8IG9iaiA9PT0gZmFsc2UgfHwgdG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBCb29sZWFuXSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBlcXVhbCB0byBudWxsP1xuICBfLmlzTnVsbCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IG51bGw7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSB1bmRlZmluZWQ/XG4gIF8uaXNVbmRlZmluZWQgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSB2b2lkIDA7XG4gIH07XG5cbiAgLy8gU2hvcnRjdXQgZnVuY3Rpb24gZm9yIGNoZWNraW5nIGlmIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBwcm9wZXJ0eSBkaXJlY3RseVxuICAvLyBvbiBpdHNlbGYgKGluIG90aGVyIHdvcmRzLCBub3Qgb24gYSBwcm90b3R5cGUpLlxuICBfLmhhcyA9IGZ1bmN0aW9uKG9iaiwgcGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gaGFzKG9iaiwgcGF0aCk7XG4gICAgfVxuICAgIHZhciBsZW5ndGggPSBwYXRoLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gcGF0aFtpXTtcbiAgICAgIGlmIChvYmogPT0gbnVsbCB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiAhIWxlbmd0aDtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIHBhc3NlZCBhbiBvYmplY3QsIHdpbGwgdHJhdmVyc2UgdGhhdCBvYmplY3TigJlzXG4gIC8vIHByb3BlcnRpZXMgZG93biB0aGUgZ2l2ZW4gYHBhdGhgLCBzcGVjaWZpZWQgYXMgYW4gYXJyYXkgb2Yga2V5cyBvciBpbmRleGVzLlxuICBfLnByb3BlcnR5ID0gZnVuY3Rpb24ocGF0aCkge1xuICAgIGlmICghXy5pc0FycmF5KHBhdGgpKSB7XG4gICAgICByZXR1cm4gc2hhbGxvd1Byb3BlcnR5KHBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gZGVlcEdldChvYmosIHBhdGgpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gR2VuZXJhdGVzIGEgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gb2JqZWN0IHRoYXQgcmV0dXJucyBhIGdpdmVuIHByb3BlcnR5LlxuICBfLnByb3BlcnR5T2YgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpe307XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihwYXRoKSB7XG4gICAgICByZXR1cm4gIV8uaXNBcnJheShwYXRoKSA/IG9ialtwYXRoXSA6IGRlZXBHZXQob2JqLCBwYXRoKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBwcmVkaWNhdGUgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHNldCBvZlxuICAvLyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy5tYXRjaGVyID0gXy5tYXRjaGVzID0gZnVuY3Rpb24oYXR0cnMpIHtcbiAgICBhdHRycyA9IF8uZXh0ZW5kT3duKHt9LCBhdHRycyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIF8uaXNNYXRjaChvYmosIGF0dHJzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJ1biBhIGZ1bmN0aW9uICoqbioqIHRpbWVzLlxuICBfLnRpbWVzID0gZnVuY3Rpb24obiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgYWNjdW0gPSBBcnJheShNYXRoLm1heCgwLCBuKSk7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykgYWNjdW1baV0gPSBpdGVyYXRlZShpKTtcbiAgICByZXR1cm4gYWNjdW07XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgXy5yYW5kb20gPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIGlmIChtYXggPT0gbnVsbCkge1xuICAgICAgbWF4ID0gbWluO1xuICAgICAgbWluID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gIH07XG5cbiAgLy8gQSAocG9zc2libHkgZmFzdGVyKSB3YXkgdG8gZ2V0IHRoZSBjdXJyZW50IHRpbWVzdGFtcCBhcyBhbiBpbnRlZ2VyLlxuICBfLm5vdyA9IERhdGUubm93IHx8IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgfTtcblxuICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZC5cbiAgICB2YXIgc291cmNlID0gJyg/OicgKyBfLmtleXMobWFwKS5qb2luKCd8JykgKyAnKSc7XG4gICAgdmFyIHRlc3RSZWdleHAgPSBSZWdFeHAoc291cmNlKTtcbiAgICB2YXIgcmVwbGFjZVJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UsICdnJyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHN0cmluZykge1xuICAgICAgc3RyaW5nID0gc3RyaW5nID09IG51bGwgPyAnJyA6ICcnICsgc3RyaW5nO1xuICAgICAgcmV0dXJuIHRlc3RSZWdleHAudGVzdChzdHJpbmcpID8gc3RyaW5nLnJlcGxhY2UocmVwbGFjZVJlZ2V4cCwgZXNjYXBlcikgOiBzdHJpbmc7XG4gICAgfTtcbiAgfTtcbiAgXy5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKGVzY2FwZU1hcCk7XG4gIF8udW5lc2NhcGUgPSBjcmVhdGVFc2NhcGVyKHVuZXNjYXBlTWFwKTtcblxuICAvLyBUcmF2ZXJzZXMgdGhlIGNoaWxkcmVuIG9mIGBvYmpgIGFsb25nIGBwYXRoYC4gSWYgYSBjaGlsZCBpcyBhIGZ1bmN0aW9uLCBpdFxuICAvLyBpcyBpbnZva2VkIHdpdGggaXRzIHBhcmVudCBhcyBjb250ZXh0LiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmluYWxcbiAgLy8gY2hpbGQsIG9yIGBmYWxsYmFja2AgaWYgYW55IGNoaWxkIGlzIHVuZGVmaW5lZC5cbiAgXy5yZXN1bHQgPSBmdW5jdGlvbihvYmosIHBhdGgsIGZhbGxiYWNrKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHBhdGggPSBbcGF0aF07XG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGZhbGxiYWNrKSA/IGZhbGxiYWNrLmNhbGwob2JqKSA6IGZhbGxiYWNrO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcHJvcCA9IG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW3BhdGhbaV1dO1xuICAgICAgaWYgKHByb3AgPT09IHZvaWQgMCkge1xuICAgICAgICBwcm9wID0gZmFsbGJhY2s7XG4gICAgICAgIGkgPSBsZW5ndGg7IC8vIEVuc3VyZSB3ZSBkb24ndCBjb250aW51ZSBpdGVyYXRpbmcuXG4gICAgICB9XG4gICAgICBvYmogPSBfLmlzRnVuY3Rpb24ocHJvcCkgPyBwcm9wLmNhbGwob2JqKSA6IHByb3A7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gR2VuZXJhdGUgYSB1bmlxdWUgaW50ZWdlciBpZCAodW5pcXVlIHdpdGhpbiB0aGUgZW50aXJlIGNsaWVudCBzZXNzaW9uKS5cbiAgLy8gVXNlZnVsIGZvciB0ZW1wb3JhcnkgRE9NIGlkcy5cbiAgdmFyIGlkQ291bnRlciA9IDA7XG4gIF8udW5pcXVlSWQgPSBmdW5jdGlvbihwcmVmaXgpIHtcbiAgICB2YXIgaWQgPSArK2lkQ291bnRlciArICcnO1xuICAgIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xuICB9O1xuXG4gIC8vIEJ5IGRlZmF1bHQsIFVuZGVyc2NvcmUgdXNlcyBFUkItc3R5bGUgdGVtcGxhdGUgZGVsaW1pdGVycywgY2hhbmdlIHRoZVxuICAvLyBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlIGFsdGVybmF0aXZlIGRlbGltaXRlcnMuXG4gIF8udGVtcGxhdGVTZXR0aW5ncyA9IHtcbiAgICBldmFsdWF0ZTogLzwlKFtcXHNcXFNdKz8pJT4vZyxcbiAgICBpbnRlcnBvbGF0ZTogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiBcIidcIixcbiAgICAnXFxcXCc6ICdcXFxcJyxcbiAgICAnXFxyJzogJ3InLFxuICAgICdcXG4nOiAnbicsXG4gICAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAgICdcXHUyMDI5JzogJ3UyMDI5J1xuICB9O1xuXG4gIHZhciBlc2NhcGVSZWdFeHAgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVSZWdFeHAsIGVzY2FwZUNoYXIpO1xuICAgICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAgIGlmIChlc2NhcGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBlc2NhcGUgKyBcIikpPT1udWxsPycnOl8uZXNjYXBlKF9fdCkpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJytcXG4oKF9fdD0oXCIgKyBpbnRlcnBvbGF0ZSArIFwiKSk9PW51bGw/Jyc6X190KStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGV2YWx1YXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIic7XFxuXCIgKyBldmFsdWF0ZSArIFwiXFxuX19wKz0nXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkb2JlIFZNcyBuZWVkIHRoZSBtYXRjaCByZXR1cm5lZCB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IG9mZnNldC5cbiAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9KTtcbiAgICBzb3VyY2UgKz0gXCInO1xcblwiO1xuXG4gICAgLy8gSWYgYSB2YXJpYWJsZSBpcyBub3Qgc3BlY2lmaWVkLCBwbGFjZSBkYXRhIHZhbHVlcyBpbiBsb2NhbCBzY29wZS5cbiAgICBpZiAoIXNldHRpbmdzLnZhcmlhYmxlKSBzb3VyY2UgPSAnd2l0aChvYmp8fHt9KXtcXG4nICsgc291cmNlICsgJ31cXG4nO1xuXG4gICAgc291cmNlID0gXCJ2YXIgX190LF9fcD0nJyxfX2o9QXJyYXkucHJvdG90eXBlLmpvaW4sXCIgK1xuICAgICAgXCJwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiICtcbiAgICAgIHNvdXJjZSArICdyZXR1cm4gX19wO1xcbic7XG5cbiAgICB2YXIgcmVuZGVyO1xuICAgIHRyeSB7XG4gICAgICByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIGNoYWluUmVzdWx0ID0gZnVuY3Rpb24oaW5zdGFuY2UsIG9iaikge1xuICAgIHJldHVybiBpbnN0YW5jZS5fY2hhaW4gPyBfKG9iaikuY2hhaW4oKSA6IG9iajtcbiAgfTtcblxuICAvLyBBZGQgeW91ciBvd24gY3VzdG9tIGZ1bmN0aW9ucyB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubWl4aW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICBfLmVhY2goXy5mdW5jdGlvbnMob2JqKSwgZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGZ1bmMgPSBfW25hbWVdID0gb2JqW25hbWVdO1xuICAgICAgXy5wcm90b3R5cGVbbmFtZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBbdGhpcy5fd3JhcHBlZF07XG4gICAgICAgIHB1c2guYXBwbHkoYXJncywgYXJndW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIGZ1bmMuYXBwbHkoXywgYXJncykpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gXztcbiAgfTtcblxuICAvLyBBZGQgYWxsIG9mIHRoZSBVbmRlcnNjb3JlIGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlciBvYmplY3QuXG4gIF8ubWl4aW4oXyk7XG5cbiAgLy8gQWRkIGFsbCBtdXRhdG9yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsncG9wJywgJ3B1c2gnLCAncmV2ZXJzZScsICdzaGlmdCcsICdzb3J0JywgJ3NwbGljZScsICd1bnNoaWZ0J10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG9iaiA9IHRoaXMuX3dyYXBwZWQ7XG4gICAgICBtZXRob2QuYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKChuYW1lID09PSAnc2hpZnQnIHx8IG5hbWUgPT09ICdzcGxpY2UnKSAmJiBvYmoubGVuZ3RoID09PSAwKSBkZWxldGUgb2JqWzBdO1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGNoYWluUmVzdWx0KHRoaXMsIG1ldGhvZC5hcHBseSh0aGlzLl93cmFwcGVkLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBFeHRyYWN0cyB0aGUgcmVzdWx0IGZyb20gYSB3cmFwcGVkIGFuZCBjaGFpbmVkIG9iamVjdC5cbiAgXy5wcm90b3R5cGUudmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JhcHBlZDtcbiAgfTtcblxuICAvLyBQcm92aWRlIHVud3JhcHBpbmcgcHJveHkgZm9yIHNvbWUgbWV0aG9kcyB1c2VkIGluIGVuZ2luZSBvcGVyYXRpb25zXG4gIC8vIHN1Y2ggYXMgYXJpdGhtZXRpYyBhbmQgSlNPTiBzdHJpbmdpZmljYXRpb24uXG4gIF8ucHJvdG90eXBlLnZhbHVlT2YgPSBfLnByb3RvdHlwZS50b0pTT04gPSBfLnByb3RvdHlwZS52YWx1ZTtcblxuICBfLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5fd3JhcHBlZCk7XG4gIH07XG5cbiAgLy8gQU1EIHJlZ2lzdHJhdGlvbiBoYXBwZW5zIGF0IHRoZSBlbmQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQgbG9hZGVyc1xuICAvLyB0aGF0IG1heSBub3QgZW5mb3JjZSBuZXh0LXR1cm4gc2VtYW50aWNzIG9uIG1vZHVsZXMuIEV2ZW4gdGhvdWdoIGdlbmVyYWxcbiAgLy8gcHJhY3RpY2UgZm9yIEFNRCByZWdpc3RyYXRpb24gaXMgdG8gYmUgYW5vbnltb3VzLCB1bmRlcnNjb3JlIHJlZ2lzdGVyc1xuICAvLyBhcyBhIG5hbWVkIG1vZHVsZSBiZWNhdXNlLCBsaWtlIGpRdWVyeSwgaXQgaXMgYSBiYXNlIGxpYnJhcnkgdGhhdCBpc1xuICAvLyBwb3B1bGFyIGVub3VnaCB0byBiZSBidW5kbGVkIGluIGEgdGhpcmQgcGFydHkgbGliLCBidXQgbm90IGJlIHBhcnQgb2ZcbiAgLy8gYW4gQU1EIGxvYWQgcmVxdWVzdC4gVGhvc2UgY2FzZXMgY291bGQgZ2VuZXJhdGUgYW4gZXJyb3Igd2hlbiBhblxuICAvLyBhbm9ueW1vdXMgZGVmaW5lKCkgaXMgY2FsbGVkIG91dHNpZGUgb2YgYSBsb2FkZXIgcmVxdWVzdC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKCd1bmRlcnNjb3JlJywgW10sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF87XG4gICAgfSk7XG4gIH1cbn0oKSk7XG4iLCIvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9ibWVyc2hvbi8yNWE3NGY3YjFjN2NiZDA3ZTc0NTZhZjFkMmMwN2RhMVxuLy8gU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0tydXNrYWwlMjdzX2FsZ29yaXRobVxcXG4vLyBEZXBlbmRzIG9uIERpc2pvaW50U2V0LlxuaW1wb3J0IF8gZnJvbSBcInVuZGVyc2NvcmVcIjtcblxuZnVuY3Rpb24gcGFpck5vZGVMaW5rcyh0cmVlKSB7XG4gICAgbGV0IG5lc3RlZEJ5Tm9kZXMgPSB7fTtcbiAgICB0cmVlLmxpbmtzLmZvckVhY2gobCA9PiB7XG4gICAgICAgIGxldCBzb3VyY2VLZXkgPSBsLnNvdXJjZS5qb2luKCcsJyk7XG4gICAgICAgIGlmICghbmVzdGVkQnlOb2Rlc1tzb3VyY2VLZXldKSB7XG4gICAgICAgICAgICBuZXN0ZWRCeU5vZGVzW3NvdXJjZUtleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBuZXN0ZWRCeU5vZGVzW3NvdXJjZUtleV0ucHVzaChsKTtcbiAgICAgICAgbGV0IHRhcmdldEtleSA9IGwudGFyZ2V0LmpvaW4oJywnKTtcbiAgICAgICAgaWYgKCFuZXN0ZWRCeU5vZGVzW3RhcmdldEtleV0pIHtcbiAgICAgICAgICAgIG5lc3RlZEJ5Tm9kZXNbdGFyZ2V0S2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIG5lc3RlZEJ5Tm9kZXNbdGFyZ2V0S2V5XS5wdXNoKGwpO1xuICAgIH0pO1xuICAgIC8vUGFpciB0aGUgcmVzdWx0c1xuICAgIGxldCBwYWlyZWRSZXN1bHRzID0gXy5wYWlycyhuZXN0ZWRCeU5vZGVzKTtcbiAgICByZXR1cm4gcGFpcmVkUmVzdWx0cztcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgY29ybmVycyAodGhyZWUgdmVydGljZXMpIG9mIHZlcnRpY2VzIG9mIGRlZ3JlZSB0d28gaW4gdGhlIGZvciBtYXQgb2ZcbiAqIHBvaW50MSwgcG9pbnQyLCBwb2ludDMgPT4gcG9pbnQxIGlzIHRoZSB0aGUgdmVydGV4IHdpdGggZGVncmVlIHR3byAodHdvIGVkZ2VzIGNvbm5lY3RlZCB0byBpdCBhcmUgW3BvaW50MSwgcG9pbnQyXSBhbmQgW3BvaW50MSwgcG9pbnQzXSAob3JkZXIgb2YgdGhlIHBvaW50cyBpbiBlYWNoIGVkZ2UgaXMgbm90IGltcG9ydGFudCkpLlxuICogQHBhcmFtIHRyZWVcbiAqIEByZXR1cm5zIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsVjJDb3JuZXJzRnJvbVRyZWUodHJlZSkge1xuICAgIGxldCBwYWlyZWRSZXN1bHRzID0gcGFpck5vZGVMaW5rcyh0cmVlKTtcbiAgICAvL0dldCBhbGwgcGFpcnMgd2l0aCBsZW5ndGggPSAyIChWMilcbiAgICBsZXQgYWxsVjIgPSBwYWlyZWRSZXN1bHRzLmZpbHRlcihwID0+IHBbMV0ubGVuZ3RoID09IDIpO1xuXG4gICAgbGV0IGFsbENvcm5lcnMgPSBhbGxWMi5tYXAodjIgPT4ge1xuICAgICAgICBsZXQgY29ybmVyID0gW107XG4gICAgICAgIC8vRmlyc3QgcG9pbnQgaXMgdGhlIGNvbW1vbiB2ZXJ0aWNlXG4gICAgICAgIGNvcm5lci5wdXNoKHYyWzBdLnNwbGl0KCcsJykubWFwKGQgPT4gK2QpKTsvL21hcChkPT4rZCkgaXMgdG8gY29udmVydCB0aGUgc3RyaW5ncyBpbnRvIGRpZ2l0c1xuICAgICAgICAvL1B1c2ggdGhlIHNvdXJjZSBvciB0YXJnZXQgaWYgdGhleSBhcmUgbm90IHRoZSBjb21tb24gdmVydGljZXMgb2YgdGhlIHR3byBlZGdlc1xuICAgICAgICB2MlsxXS5mb3JFYWNoKGxpbmsgPT4ge1xuICAgICAgICAgICAgaWYgKGxpbmsuc291cmNlLmpvaW4oJywnKSAhPSB2MlswXSkge1xuICAgICAgICAgICAgICAgIGNvcm5lci5wdXNoKGxpbmsuc291cmNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29ybmVyLnB1c2gobGluay50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvcm5lcjtcbiAgICB9KTtcbiAgICByZXR1cm4gYWxsQ29ybmVycztcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgYWxsIHNpbmdsZSBkZWdyZWUgdmVydGljZXMgZnJvbSBhIHRyZWVcbiAqIEBwYXJhbSB0cmVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbGxWMXNGcm9tVHJlZSh0cmVlKXtcbiAgICBsZXQgcGFpcmVkUmVzdWx0cyA9IHBhaXJOb2RlTGlua3ModHJlZSk7XG4gICAgLy9HZXQgYWxsIHBhaXJzIHdpdGggbGVuZ3RoID0gMiAoVjIpXG4gICAgbGV0IGFsbFYxID0gcGFpcmVkUmVzdWx0cy5maWx0ZXIocCA9PiBwWzFdLmxlbmd0aCA9PSAxKTtcbiAgICByZXR1cm4gYWxsVjEubWFwKHYxPT52MVswXS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgZ3JhcGggZnJvbSBtZXNoXG4gKiBAcGFyYW0gdHJpYW5nbGVzIGlzIGluZm9ybSBvZiBzZXQgb2YgdHJpYW5nbGVzIGFzIHRoZSByZXN1bHQgZnJvbSBkZWxhdW5heSB0cmlhbmd1bGF0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3JhcGggKHRyaWFuZ2xlcykge1xuXG4gICAgZnVuY3Rpb24gbWFrZUxpbmsoc291cmNlSWQsIHRhcmdldElkLCB3ZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHtcInNvdXJjZVwiOiBzb3VyY2VJZCwgXCJ0YXJnZXRcIjogdGFyZ2V0SWQsIFwid2VpZ2h0XCI6IHdlaWdodH07XG4gICAgfVxuXG4gICAgbGV0IGdyYXBoID0ge307XG4gICAgZ3JhcGgubm9kZXMgPSBbXTtcbiAgICBncmFwaC5saW5rcyA9IFtdO1xuICAgIC8vQ3JlYXRpbmcgbm9kZXNcbiAgICB0cmlhbmdsZXMuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBpZCA9IHRbaV07XG4gICAgICAgICAgICBpZiAoIWlkRXhpc3RzKGdyYXBoLm5vZGVzLCBpZCkpIHtcbiAgICAgICAgICAgICAgICBncmFwaC5ub2Rlcy5wdXNoKG1ha2VOb2RlKGlkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vQ3JlYXRpbmcgbGlua3NcbiAgICB0cmlhbmdsZXMuZm9yRWFjaCh0ID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwMSA9IHRbaV07XG4gICAgICAgICAgICBsZXQgcDIgPSB0WyhpICsgMSkgJSAzXTtcbiAgICAgICAgICAgIGxldCBpZDEgPSBwMTtcbiAgICAgICAgICAgIGxldCBpZDIgPSBwMjtcbiAgICAgICAgICAgIGxldCBkaXN0ID0gZGlzdGFuY2UocDEsIHAyKTtcbiAgICAgICAgICAgIGxldCBsaW5rID0gbWFrZUxpbmsoaWQxLCBpZDIsIGRpc3QpO1xuICAgICAgICAgICAgaWYgKCFsaW5rRXhpc3RzKGdyYXBoLmxpbmtzLCBsaW5rKSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmxpbmtzLnB1c2gobGluayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgICAgICAgdmFyIGR4ID0gYVswXSAtIGJbMF0sXG4gICAgICAgICAgICBkeSA9IGFbMV0gLSBiWzFdO1xuICAgICAgICAvL0ZvciBjb21wdXRlciBzdG9yYWdlIGlzc3VlLCBzb21lIGNvb3JkaW5hdGVzIG9mIHRoZSBzYW1lIGRpc3RhbmNlIG1heSByZXR1cm4gZGlmZmVyZW50IGRpc3RhbmNlcyBpZiB3ZSB1c2UgbG9uZyBmbG9hdGluZyBwb2ludFxuICAgICAgICAvL1NvIHRha2Ugb25seSAxMCBkaWdpdHMgYWZ0ZXIgdGhlIGZsb2F0aW5nIHBvaW50cz0+IHRoaXMgaXMgcHJlY2lzZSBlbm91Z2ggYW5kIHN0aWxsIGhhdmUgdGhlIHNhbWUgdmFsdWVzIGZvciB0d28gZGlmZmVyZW50IGxpbmVzIG9mIHRoZSBzYW1lIGRpc3RhbmNlXG4gICAgICAgIHJldHVybiArTWF0aC5zcXJ0KChkeCAqIGR4KSArIChkeSAqIGR5KSkudG9GaXhlZCgxMCk7XG4gICAgfVxuXG4gICAgLy9UT0RPOiBtYXkgc29ydCB0aGUgaWQgYWxwaGFiZXRpY2FsbHkgPT4gd2hlbiBjcmVhdGluZyA9PiBzbyB3ZSBjYW4ganVzdCBjaGVjayAxIGNvbmRpdGlvbiBvbmx5LlxuICAgIGZ1bmN0aW9uIGxpbmtFeGlzdHMobGlua3MsIGxpbmspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKChlcXVhbFBvaW50cyhsaW5rLnNvdXJjZSwgbGlua3NbaV0uc291cmNlKSAmJiBlcXVhbFBvaW50cyhsaW5rLnRhcmdldCwgbGlua3NbaV0udGFyZ2V0KSkgfHxcbiAgICAgICAgICAgICAgICAoZXF1YWxQb2ludHMobGluay5zb3VyY2UsIGxpbmtzW2ldLnRhcmdldCkgJiYgZXF1YWxQb2ludHMobGluay50YXJnZXQsIGxpbmtzW2ldLnNvdXJjZSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBncmFwaDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgICBsZXQgZHggPSBhWzBdIC0gYlswXSxcbiAgICAgICAgZHkgPSBhWzFdIC0gYlsxXTtcbiAgICAvL0ZvciBjb21wdXRlciBzdG9yYWdlIGlzc3VlLCBzb21lIGNvb3JkaW5hdGVzIG9mIHRoZSBzYW1lIGRpc3RhbmNlIG1heSByZXR1cm4gZGlmZmVyZW50IGRpc3RhbmNlcyBpZiB3ZSB1c2UgbG9uZyBmbG9hdGluZyBwb2ludFxuICAgIC8vU28gdGFrZSBvbmx5IDEwIGRpZ2l0cyBhZnRlciB0aGUgZmxvYXRpbmcgcG9pbnRzPT4gdGhpcyBpcyBwcmVjaXNlIGVub3VnaCBhbmQgc3RpbGwgaGF2ZSB0aGUgc2FtZSB2YWx1ZXMgZm9yIHR3byBkaWZmZXJlbnQgbGluZXMgb2YgdGhlIHNhbWUgZGlzdGFuY2VcbiAgICByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnNxcnQoKGR4ICogZHgpICsgKGR5ICogZHkpKSpNYXRoLnBvdygxMCwgMTApKS9NYXRoLnBvdygxMCwgMTApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxQb2ludHMoaWQxLCBpZDIpIHtcbiAgICBpZiAoaWQxWzBdID09PSBpZDJbMF0gJiYgaWQxWzFdID09PSBpZDJbMV0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlkRXhpc3RzKG5vZGVzLCBpZCkge1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbm9kZSA9IG5vZGVzW2ldO1xuICAgICAgICBpZiAoZXF1YWxQb2ludHMobm9kZS5pZCwgaWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZU5vZGUoaWQpIHtcbiAgICByZXR1cm4ge1wiaWRcIjogaWR9O1xufVxuLyoqXG4gKiBjcmVhdGUgdGhlIG1zdFxuICogQHBhcmFtIGdyYXBoOiBpbiBmb3JtIG9mIG5vZGVzIGFuZCBsaW5rc1xuICogQHJldHVybnMge3tub2RlczogKHNlbGVjdGlvbl9ub2Rlc3xub2RlcyksIGxpbmtzOiBBcnJheX19XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtc3QgKGdyYXBoKSB7XG4gICAgbGV0IHZlcnRpY2VzID0gZ3JhcGgubm9kZXMsXG4gICAgICAgIGVkZ2VzID0gZ3JhcGgubGlua3Muc2xpY2UoMCksXG4gICAgICAgIHNlbGVjdGVkRWRnZXMgPSBbXSxcbiAgICAgICAgZm9yZXN0ID0gbmV3IERpc2pvaW50U2V0KCk7XG5cbiAgICAvLyBFYWNoIHZlcnRleCBiZWdpbnMgXCJkaXNjb25uZWN0ZWRcIiBhbmQgaXNvbGF0ZWQgZnJvbSBhbGwgdGhlIG90aGVycy5cbiAgICB2ZXJ0aWNlcy5mb3JFYWNoKCh2ZXJ0ZXgpID0+IHtcbiAgICAgICAgZm9yZXN0Lm1ha2VTZXQodmVydGV4LmlkKTtcbiAgICB9KTtcblxuICAgIC8vIFNvcnQgZWRnZXMgaW4gZGVzY2VuZGluZyBvcmRlciBvZiB3ZWlnaHQuIFdlIHdpbGwgcG9wIGVkZ2VzIGJlZ2lubmluZ1xuICAgIC8vIGZyb20gdGhlIGVuZCBvZiB0aGUgYXJyYXkuXG4gICAgZWRnZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gLShhLndlaWdodCAtIGIud2VpZ2h0KTtcbiAgICB9KTtcblxuICAgIHdoaWxlIChlZGdlcy5sZW5ndGggJiYgZm9yZXN0LnNpemUoKSA+IDEpIHtcbiAgICAgICAgbGV0IGVkZ2UgPSBlZGdlcy5wb3AoKTtcblxuICAgICAgICBpZiAoZm9yZXN0LmZpbmQoZWRnZS5zb3VyY2UpICE9PSBmb3Jlc3QuZmluZChlZGdlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIGZvcmVzdC51bmlvbihlZGdlLnNvdXJjZSwgZWRnZS50YXJnZXQpO1xuICAgICAgICAgICAgc2VsZWN0ZWRFZGdlcy5wdXNoKGVkZ2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZXM6IHZlcnRpY2VzLFxuICAgICAgICBsaW5rczogc2VsZWN0ZWRFZGdlc1xuICAgIH1cbn1cblxuXG5mdW5jdGlvbiBEaXNqb2ludFNldCgpIHtcbiAgICB0aGlzLmluZGV4XyA9IHt9O1xufVxuXG5mdW5jdGlvbiBOb2RlKGlkKSB7XG4gICAgdGhpcy5pZF8gPSBpZDtcbiAgICB0aGlzLnBhcmVudF8gPSB0aGlzO1xuICAgIHRoaXMucmFua18gPSAwO1xufVxuXG5EaXNqb2ludFNldC5wcm90b3R5cGUubWFrZVNldCA9IGZ1bmN0aW9uIChpZCkge1xuICAgIGlmICghdGhpcy5pbmRleF9baWRdKSB7XG4gICAgICAgIGxldCBjcmVhdGVkID0gbmV3IE5vZGUoaWQpO1xuICAgICAgICB0aGlzLmluZGV4X1tpZF0gPSBjcmVhdGVkO1xuICAgIH1cbn1cblxuLy8gUmV0dXJucyB0aGUgaWQgb2YgdGhlIHJlcHJlc2VudGF0aXZlIGVsZW1lbnQgb2YgdGhpcyBzZXQgdGhhdCAoaWQpXG4vLyBiZWxvbmdzIHRvLlxuRGlzam9pbnRTZXQucHJvdG90eXBlLmZpbmQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICBpZiAodGhpcy5pbmRleF9baWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBsZXQgY3VycmVudCA9IHRoaXMuaW5kZXhfW2lkXS5wYXJlbnRfO1xuICAgIHdoaWxlIChjdXJyZW50ICE9PSBjdXJyZW50LnBhcmVudF8pIHtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50XztcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnQuaWRfO1xufVxuXG5EaXNqb2ludFNldC5wcm90b3R5cGUudW5pb24gPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgIGxldCB4Um9vdCA9IHRoaXMuaW5kZXhfW3RoaXMuZmluZCh4KV07XG4gICAgbGV0IHlSb290ID0gdGhpcy5pbmRleF9bdGhpcy5maW5kKHkpXTtcblxuICAgIGlmICh4Um9vdCA9PT0gdW5kZWZpbmVkIHx8IHlSb290ID09PSB1bmRlZmluZWQgfHwgeFJvb3QgPT09IHlSb290KSB7XG4gICAgICAgIC8vIHggYW5kIHkgYWxyZWFkeSBiZWxvbmcgdG8gdGhlIHNhbWUgc2V0LlxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHhSb290LnJhbmsgPCB5Um9vdC5yYW5rKSB7IC8vIE1vdmUgeCBpbnRvIHRoZSBzZXQgeSBpcyBhIG1lbWJlciBvZi5cbiAgICAgICAgeFJvb3QucGFyZW50XyA9IHlSb290O1xuICAgIH0gZWxzZSBpZiAoeVJvb3QucmFua18gPCB4Um9vdC5yYW5rXykgeyAvLyBNb3ZlIHkgaW50byB0aGUgc2V0IHggaXMgYSBtZW1iZXIgb2YuXG4gICAgICAgIHlSb290LnBhcmVudF8gPSB4Um9vdDtcbiAgICB9IGVsc2UgeyAvLyBBcmJpdHJhcmlseSBjaG9vc2UgdG8gbW92ZSB5IGludG8gdGhlIHNldCB4IGlzIGEgbWVtYmVyIG9mLlxuICAgICAgICB5Um9vdC5wYXJlbnRfID0geFJvb3Q7XG4gICAgICAgIHhSb290LnJhbmtfKys7XG4gICAgfVxufVxuXG4vLyBSZXR1cm5zIHRoZSBjdXJyZW50IG51bWJlciBvZiBkaXNqb2ludCBzZXRzLlxuRGlzam9pbnRTZXQucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHVuaXF1ZUluZGljZXMgPSB7fTtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMuaW5kZXhfKS5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICBsZXQgcmVwcmVzZW50YXRpdmUgPSB0aGlzLmZpbmQoaWQpO1xuXG4gICAgICAgIHVuaXF1ZUluZGljZXNbaWRdID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBPYmplY3Qua2V5cyh1bmlxdWVJbmRpY2VzKS5sZW5ndGg7XG59XG4iLCIvKiBAZmxvdyAqL1xuXG4vKipcbiAqIFtTaW1wbGUgbGluZWFyIHJlZ3Jlc3Npb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2ltcGxlX2xpbmVhcl9yZWdyZXNzaW9uKVxuICogaXMgYSBzaW1wbGUgd2F5IHRvIGZpbmQgYSBmaXR0ZWQgbGluZVxuICogYmV0d2VlbiBhIHNldCBvZiBjb29yZGluYXRlcy4gVGhpcyBhbGdvcml0aG0gZmluZHMgdGhlIHNsb3BlIGFuZCB5LWludGVyY2VwdCBvZiBhIHJlZ3Jlc3Npb24gbGluZVxuICogdXNpbmcgdGhlIGxlYXN0IHN1bSBvZiBzcXVhcmVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGRhdGEgYW4gYXJyYXkgb2YgdHdvLWVsZW1lbnQgb2YgYXJyYXlzLFxuICogbGlrZSBgW1swLCAxXSwgWzIsIDNdXWBcbiAqIEByZXR1cm5zIHtPYmplY3R9IG9iamVjdCBjb250YWluaW5nIHNsb3BlIGFuZCBpbnRlcnNlY3Qgb2YgcmVncmVzc2lvbiBsaW5lXG4gKiBAZXhhbXBsZVxuICogbGluZWFyUmVncmVzc2lvbihbWzAsIDBdLCBbMSwgMV1dKTsgLy8gPT4geyBtOiAxLCBiOiAwIH1cbiAqL1xuZnVuY3Rpb24gbGluZWFyUmVncmVzc2lvbihkYXRhLyo6IEFycmF5PEFycmF5PG51bWJlcj4+ICovKS8qOiB7IG06IG51bWJlciwgYjogbnVtYmVyIH0gKi8ge1xuXG4gICAgdmFyIG0sIGI7XG5cbiAgICAvLyBTdG9yZSBkYXRhIGxlbmd0aCBpbiBhIGxvY2FsIHZhcmlhYmxlIHRvIHJlZHVjZVxuICAgIC8vIHJlcGVhdGVkIG9iamVjdCBwcm9wZXJ0eSBsb29rdXBzXG4gICAgdmFyIGRhdGFMZW5ndGggPSBkYXRhLmxlbmd0aDtcblxuICAgIC8vaWYgdGhlcmUncyBvbmx5IG9uZSBwb2ludCwgYXJiaXRyYXJpbHkgY2hvb3NlIGEgc2xvcGUgb2YgMFxuICAgIC8vYW5kIGEgeS1pbnRlcmNlcHQgb2Ygd2hhdGV2ZXIgdGhlIHkgb2YgdGhlIGluaXRpYWwgcG9pbnQgaXNcbiAgICBpZiAoZGF0YUxlbmd0aCA9PT0gMSkge1xuICAgICAgICBtID0gMDtcbiAgICAgICAgYiA9IGRhdGFbMF1bMV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBvdXIgc3VtcyBhbmQgc2NvcGUgdGhlIGBtYCBhbmQgYGJgXG4gICAgICAgIC8vIHZhcmlhYmxlcyB0aGF0IGRlZmluZSB0aGUgbGluZS5cbiAgICAgICAgdmFyIHN1bVggPSAwLCBzdW1ZID0gMCxcbiAgICAgICAgICAgIHN1bVhYID0gMCwgc3VtWFkgPSAwO1xuXG4gICAgICAgIC8vIFVzZSBsb2NhbCB2YXJpYWJsZXMgdG8gZ3JhYiBwb2ludCB2YWx1ZXNcbiAgICAgICAgLy8gd2l0aCBtaW5pbWFsIG9iamVjdCBwcm9wZXJ0eSBsb29rdXBzXG4gICAgICAgIHZhciBwb2ludCwgeCwgeTtcblxuICAgICAgICAvLyBHYXRoZXIgdGhlIHN1bSBvZiBhbGwgeCB2YWx1ZXMsIHRoZSBzdW0gb2YgYWxsXG4gICAgICAgIC8vIHkgdmFsdWVzLCBhbmQgdGhlIHN1bSBvZiB4XjIgYW5kICh4KnkpIGZvciBlYWNoXG4gICAgICAgIC8vIHZhbHVlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBJbiBtYXRoIG5vdGF0aW9uLCB0aGVzZSB3b3VsZCBiZSBTU194LCBTU195LCBTU194eCwgYW5kIFNTX3h5XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwb2ludCA9IGRhdGFbaV07XG4gICAgICAgICAgICB4ID0gcG9pbnRbMF07XG4gICAgICAgICAgICB5ID0gcG9pbnRbMV07XG5cbiAgICAgICAgICAgIHN1bVggKz0geDtcbiAgICAgICAgICAgIHN1bVkgKz0geTtcblxuICAgICAgICAgICAgc3VtWFggKz0geCAqIHg7XG4gICAgICAgICAgICBzdW1YWSArPSB4ICogeTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGBtYCBpcyB0aGUgc2xvcGUgb2YgdGhlIHJlZ3Jlc3Npb24gbGluZVxuICAgICAgICBtID0gKChkYXRhTGVuZ3RoICogc3VtWFkpIC0gKHN1bVggKiBzdW1ZKSkgL1xuICAgICAgICAgICAgKChkYXRhTGVuZ3RoICogc3VtWFgpIC0gKHN1bVggKiBzdW1YKSk7XG5cbiAgICAgICAgLy8gYGJgIGlzIHRoZSB5LWludGVyY2VwdCBvZiB0aGUgbGluZS5cbiAgICAgICAgYiA9IChzdW1ZIC8gZGF0YUxlbmd0aCkgLSAoKG0gKiBzdW1YKSAvIGRhdGFMZW5ndGgpO1xuICAgIH1cblxuICAgIC8vIFJldHVybiBib3RoIHZhbHVlcyBhcyBhbiBvYmplY3QuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbTogbSxcbiAgICAgICAgYjogYlxuICAgIH07XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogR2l2ZW4gdGhlIG91dHB1dCBvZiBgbGluZWFyUmVncmVzc2lvbmA6IGFuIG9iamVjdFxuICogd2l0aCBgbWAgYW5kIGBiYCB2YWx1ZXMgaW5kaWNhdGluZyBzbG9wZSBhbmQgaW50ZXJjZXB0LFxuICogcmVzcGVjdGl2ZWx5LCBnZW5lcmF0ZSBhIGxpbmUgZnVuY3Rpb24gdGhhdCB0cmFuc2xhdGVzXG4gKiB4IHZhbHVlcyBpbnRvIHkgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYiBvYmplY3Qgd2l0aCBgbWAgYW5kIGBiYCBtZW1iZXJzLCByZXByZXNlbnRpbmdcbiAqIHNsb3BlIGFuZCBpbnRlcnNlY3Qgb2YgZGVzaXJlZCBsaW5lXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IG1ldGhvZCB0aGF0IGNvbXB1dGVzIHktdmFsdWUgYXQgYW55IGdpdmVuXG4gKiB4LXZhbHVlIG9uIHRoZSBsaW5lLlxuICogQGV4YW1wbGVcbiAqIHZhciBsID0gbGluZWFyUmVncmVzc2lvbkxpbmUobGluZWFyUmVncmVzc2lvbihbWzAsIDBdLCBbMSwgMV1dKSk7XG4gKiBsKDApIC8vID0gMFxuICogbCgyKSAvLyA9IDJcbiAqIGxpbmVhclJlZ3Jlc3Npb25MaW5lKHsgYjogMCwgbTogMSB9KSgxKTsgLy8gPT4gMVxuICogbGluZWFyUmVncmVzc2lvbkxpbmUoeyBiOiAxLCBtOiAxIH0pKDEpOyAvLyA9PiAyXG4gKi9cbmZ1bmN0aW9uIGxpbmVhclJlZ3Jlc3Npb25MaW5lKG1iLyo6IHsgYjogbnVtYmVyLCBtOiBudW1iZXIgfSovKS8qOiBGdW5jdGlvbiAqLyB7XG4gICAgLy8gUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCBjb21wdXRlcyBhIGB5YCB2YWx1ZSBmb3IgZWFjaFxuICAgIC8vIHggdmFsdWUgaXQgaXMgZ2l2ZW4sIGJhc2VkIG9uIHRoZSB2YWx1ZXMgb2YgYGJgIGFuZCBgYWBcbiAgICAvLyB0aGF0IHdlIGp1c3QgY29tcHV0ZWQuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgcmV0dXJuIG1iLmIgKyAobWIubSAqIHgpO1xuICAgIH07XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogT3VyIGRlZmF1bHQgc3VtIGlzIHRoZSBbS2FoYW4tQmFidXNrYSBhbGdvcml0aG1dKGh0dHBzOi8vcGRmcy5zZW1hbnRpY3NjaG9sYXIub3JnLzE3NjAvN2Q0NjdjZGExZDAyNzdhZDI3MmRlYjIxMTM1MzMxMzFkYzA5LnBkZikuXG4gKiBUaGlzIG1ldGhvZCBpcyBhbiBpbXByb3ZlbWVudCBvdmVyIHRoZSBjbGFzc2ljYWxcbiAqIFtLYWhhbiBzdW1tYXRpb24gYWxnb3JpdGhtXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9LYWhhbl9zdW1tYXRpb25fYWxnb3JpdGhtKS5cbiAqIEl0IGFpbXMgYXQgY29tcHV0aW5nIHRoZSBzdW0gb2YgYSBsaXN0IG9mIG51bWJlcnMgd2hpbGUgY29ycmVjdGluZyBmb3JcbiAqIGZsb2F0aW5nLXBvaW50IGVycm9ycy4gVHJhZGl0aW9uYWxseSwgc3VtcyBhcmUgY2FsY3VsYXRlZCBhcyBtYW55XG4gKiBzdWNjZXNzaXZlIGFkZGl0aW9ucywgZWFjaCBvbmUgd2l0aCBpdHMgb3duIGZsb2F0aW5nLXBvaW50IHJvdW5kb2ZmLiBUaGVzZVxuICogbG9zc2VzIGluIHByZWNpc2lvbiBhZGQgdXAgYXMgdGhlIG51bWJlciBvZiBudW1iZXJzIGluY3JlYXNlcy4gVGhpcyBhbHRlcm5hdGl2ZVxuICogYWxnb3JpdGhtIGlzIG1vcmUgYWNjdXJhdGUgdGhhbiB0aGUgc2ltcGxlIHdheSBvZiBjYWxjdWxhdGluZyBzdW1zIGJ5IHNpbXBsZVxuICogYWRkaXRpb24uXG4gKlxuICogVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGlucHV0XG4gKiBAcmV0dXJuIHtudW1iZXJ9IHN1bSBvZiBhbGwgaW5wdXQgbnVtYmVyc1xuICogQGV4YW1wbGVcbiAqIHN1bShbMSwgMiwgM10pOyAvLyA9PiA2XG4gKi9cbmZ1bmN0aW9uIHN1bSh4Lyo6IEFycmF5PG51bWJlcj4gKi8pLyo6IG51bWJlciAqLyB7XG5cbiAgICAvLyBJZiB0aGUgYXJyYXkgaXMgZW1wdHksIHdlIG5lZWRuJ3QgYm90aGVyIGNvbXB1dGluZyBpdHMgc3VtXG4gICAgaWYgKHgubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemluZyB0aGUgc3VtIGFzIHRoZSBmaXJzdCBudW1iZXIgaW4gdGhlIGFycmF5XG4gICAgdmFyIHN1bSA9IHhbMF07XG5cbiAgICAvLyBLZWVwaW5nIHRyYWNrIG9mIHRoZSBmbG9hdGluZy1wb2ludCBlcnJvciBjb3JyZWN0aW9uXG4gICAgdmFyIGNvcnJlY3Rpb24gPSAwO1xuXG4gICAgdmFyIHRyYW5zaXRpb247XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHJhbnNpdGlvbiA9IHN1bSArIHhbaV07XG5cbiAgICAgICAgLy8gSGVyZSB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgY29ycmVjdGlvbiBpbiBhIGRpZmZlcmVudCBmYXNoaW9uXG4gICAgICAgIC8vIGlmIHRoZSBuZXcgYWJzb2x1dGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHRoZSBhYnNvbHV0ZSBzdW1cbiAgICAgICAgaWYgKE1hdGguYWJzKHN1bSkgPj0gTWF0aC5hYnMoeFtpXSkpIHtcbiAgICAgICAgICAgIGNvcnJlY3Rpb24gKz0gKChzdW0gLSB0cmFuc2l0aW9uKSArIHhbaV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29ycmVjdGlvbiArPSAoKHhbaV0gLSB0cmFuc2l0aW9uKSArIHN1bSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdW0gPSB0cmFuc2l0aW9uO1xuICAgIH1cblxuICAgIC8vIFJldHVybmluZyB0aGUgY29ycmVjdGVkIHN1bVxuICAgIHJldHVybiBzdW0gKyBjb3JyZWN0aW9uO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBtZWFuLCBfYWxzbyBrbm93biBhcyBhdmVyYWdlXyxcbiAqIGlzIHRoZSBzdW0gb2YgYWxsIHZhbHVlcyBvdmVyIHRoZSBudW1iZXIgb2YgdmFsdWVzLlxuICogVGhpcyBpcyBhIFttZWFzdXJlIG9mIGNlbnRyYWwgdGVuZGVuY3ldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NlbnRyYWxfdGVuZGVuY3kpOlxuICogYSBtZXRob2Qgb2YgZmluZGluZyBhIHR5cGljYWwgb3IgY2VudHJhbCB2YWx1ZSBvZiBhIHNldCBvZiBudW1iZXJzLlxuICpcbiAqIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IHNhbXBsZSBvZiBvbmUgb3IgbW9yZSBkYXRhIHBvaW50c1xuICogQHRocm93cyB7RXJyb3J9IGlmIHRoZSB0aGUgbGVuZ3RoIG9mIHggaXMgbGVzcyB0aGFuIG9uZVxuICogQHJldHVybnMge251bWJlcn0gbWVhblxuICogQGV4YW1wbGVcbiAqIG1lYW4oWzAsIDEwXSk7IC8vID0+IDVcbiAqL1xuZnVuY3Rpb24gbWVhbih4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOiBudW1iZXIgKi8ge1xuICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21lYW4gcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGRhdGEgcG9pbnQnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3VtKHgpIC8geC5sZW5ndGg7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIHN1bSBvZiBkZXZpYXRpb25zIHRvIHRoZSBOdGggcG93ZXIuXG4gKiBXaGVuIG49MiBpdCdzIHRoZSBzdW0gb2Ygc3F1YXJlZCBkZXZpYXRpb25zLlxuICogV2hlbiBuPTMgaXQncyB0aGUgc3VtIG9mIGN1YmVkIGRldmlhdGlvbnMuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4XG4gKiBAcGFyYW0ge251bWJlcn0gbiBwb3dlclxuICogQHJldHVybnMge251bWJlcn0gc3VtIG9mIG50aCBwb3dlciBkZXZpYXRpb25zXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBpbnB1dCA9IFsxLCAyLCAzXTtcbiAqIC8vIHNpbmNlIHRoZSB2YXJpYW5jZSBvZiBhIHNldCBpcyB0aGUgbWVhbiBzcXVhcmVkXG4gKiAvLyBkZXZpYXRpb25zLCB3ZSBjYW4gY2FsY3VsYXRlIHRoYXQgd2l0aCBzdW1OdGhQb3dlckRldmlhdGlvbnM6XG4gKiBzdW1OdGhQb3dlckRldmlhdGlvbnMoaW5wdXQsIDIpIC8gaW5wdXQubGVuZ3RoO1xuICovXG5mdW5jdGlvbiBzdW1OdGhQb3dlckRldmlhdGlvbnMoeC8qOiBBcnJheTxudW1iZXI+ICovLCBuLyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcbiAgICB2YXIgbWVhblZhbHVlID0gbWVhbih4KSxcbiAgICAgICAgc3VtID0gMCxcbiAgICAgICAgdGVtcFZhbHVlLFxuICAgICAgICBpO1xuXG4gICAgLy8gVGhpcyBpcyBhbiBvcHRpbWl6YXRpb246IHdoZW4gbiBpcyAyICh3ZSdyZSBjb21wdXRpbmcgYSBudW1iZXIgc3F1YXJlZCksXG4gICAgLy8gbXVsdGlwbHlpbmcgdGhlIG51bWJlciBieSBpdHNlbGYgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgdGhhbiB1c2luZ1xuICAgIC8vIHRoZSBNYXRoLnBvdyBtZXRob2QuXG4gICAgaWYgKG4gPT09IDIpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRlbXBWYWx1ZSA9IHhbaV0gLSBtZWFuVmFsdWU7XG4gICAgICAgICAgICBzdW0gKz0gdGVtcFZhbHVlICogdGVtcFZhbHVlO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHN1bSArPSBNYXRoLnBvdyh4W2ldIC0gbWVhblZhbHVlLCBuKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzdW07XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFt2YXJpYW5jZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WYXJpYW5jZSlcbiAqIGlzIHRoZSBzdW0gb2Ygc3F1YXJlZCBkZXZpYXRpb25zIGZyb20gdGhlIG1lYW4uXG4gKlxuICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB2YXJpYW5jZSwgbm90IHNhbXBsZSB2YXJpYW5jZTpcbiAqIHNlZSB0aGUgYHNhbXBsZVZhcmlhbmNlYCBtZXRob2QgaWYgeW91IHdhbnQgYSBzYW1wbGUgbWVhc3VyZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggYSBwb3B1bGF0aW9uIG9mIG9uZSBvciBtb3JlIGRhdGEgcG9pbnRzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB2YXJpYW5jZTogYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby5cbiAqIHplcm8gaW5kaWNhdGVzIHRoYXQgYWxsIHZhbHVlcyBhcmUgaWRlbnRpY2FsLlxuICogQHRocm93cyB7RXJyb3J9IGlmIHgncyBsZW5ndGggaXMgMFxuICogQGV4YW1wbGVcbiAqIHZhcmlhbmNlKFsxLCAyLCAzLCA0LCA1LCA2XSk7IC8vID0+IDIuOTE2NjY2NjY2NjY2NjY2NVxuICovXG5mdW5jdGlvbiB2YXJpYW5jZSh4Lyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuICAgIC8vIFRoZSB2YXJpYW5jZSBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICBpZiAoeC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd2YXJpYW5jZSByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG1lYW4gb2Ygc3F1YXJlZCBkZXZpYXRpb25zIGJldHdlZW4gdGhlXG4gICAgLy8gbWVhbiB2YWx1ZSBhbmQgZWFjaCB2YWx1ZS5cbiAgICByZXR1cm4gc3VtTnRoUG93ZXJEZXZpYXRpb25zKHgsIDIpIC8geC5sZW5ndGg7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFtzdGFuZGFyZCBkZXZpYXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RhbmRhcmRfZGV2aWF0aW9uKVxuICogaXMgdGhlIHNxdWFyZSByb290IG9mIHRoZSB2YXJpYW5jZS4gVGhpcyBpcyBhbHNvIGtub3duIGFzIHRoZSBwb3B1bGF0aW9uXG4gKiBzdGFuZGFyZCBkZXZpYXRpb24uIEl0J3MgdXNlZnVsIGZvciBtZWFzdXJpbmcgdGhlIGFtb3VudFxuICogb2YgdmFyaWF0aW9uIG9yIGRpc3BlcnNpb24gaW4gYSBzZXQgb2YgdmFsdWVzLlxuICpcbiAqIFN0YW5kYXJkIGRldmlhdGlvbiBpcyBvbmx5IGFwcHJvcHJpYXRlIGZvciBmdWxsLXBvcHVsYXRpb24ga25vd2xlZGdlOiBmb3JcbiAqIHNhbXBsZXMgb2YgYSBwb3B1bGF0aW9uLCB7QGxpbmsgc2FtcGxlU3RhbmRhcmREZXZpYXRpb259IGlzXG4gKiBtb3JlIGFwcHJvcHJpYXRlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBpbnB1dFxuICogQHJldHVybnMge251bWJlcn0gc3RhbmRhcmQgZGV2aWF0aW9uXG4gKiBAZXhhbXBsZVxuICogdmFyaWFuY2UoWzIsIDQsIDQsIDQsIDUsIDUsIDcsIDldKTsgLy8gPT4gNFxuICogc3RhbmRhcmREZXZpYXRpb24oWzIsIDQsIDQsIDQsIDUsIDUsIDcsIDldKTsgLy8gPT4gMlxuICovXG5mdW5jdGlvbiBzdGFuZGFyZERldmlhdGlvbih4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcbiAgICBpZiAoeC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHZhciB2ID0gdmFyaWFuY2UoeCk7XG4gICAgcmV0dXJuIE1hdGguc3FydCh2KTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgW1IgU3F1YXJlZF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db2VmZmljaWVudF9vZl9kZXRlcm1pbmF0aW9uKVxuICogdmFsdWUgb2YgZGF0YSBjb21wYXJlZCB3aXRoIGEgZnVuY3Rpb24gYGZgXG4gKiBpcyB0aGUgc3VtIG9mIHRoZSBzcXVhcmVkIGRpZmZlcmVuY2VzIGJldHdlZW4gdGhlIHByZWRpY3Rpb25cbiAqIGFuZCB0aGUgYWN0dWFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHggaW5wdXQgZGF0YTogdGhpcyBzaG91bGQgYmUgZG91Ymx5LW5lc3RlZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBmdW5jdGlvbiBjYWxsZWQgb24gYFtpXVswXWAgdmFsdWVzIHdpdGhpbiB0aGUgZGF0YXNldFxuICogQHJldHVybnMge251bWJlcn0gci1zcXVhcmVkIHZhbHVlXG4gKiBAZXhhbXBsZVxuICogdmFyIHNhbXBsZXMgPSBbWzAsIDBdLCBbMSwgMV1dO1xuICogdmFyIHJlZ3Jlc3Npb25MaW5lID0gbGluZWFyUmVncmVzc2lvbkxpbmUobGluZWFyUmVncmVzc2lvbihzYW1wbGVzKSk7XG4gKiByU3F1YXJlZChzYW1wbGVzLCByZWdyZXNzaW9uTGluZSk7IC8vID0gMSB0aGlzIGxpbmUgaXMgYSBwZXJmZWN0IGZpdFxuICovXG5mdW5jdGlvbiByU3F1YXJlZCh4IC8qOiBBcnJheTxBcnJheTxudW1iZXI+PiAqLywgZnVuYyAvKjogRnVuY3Rpb24gKi8pIC8qOiBudW1iZXIgKi8ge1xuICAgIGlmICh4Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIDE7IH1cblxuICAgIC8vIENvbXB1dGUgdGhlIGF2ZXJhZ2UgeSB2YWx1ZSBmb3IgdGhlIGFjdHVhbFxuICAgIC8vIGRhdGEgc2V0IGluIG9yZGVyIHRvIGNvbXB1dGUgdGhlXG4gICAgLy8gX3RvdGFsIHN1bSBvZiBzcXVhcmVzX1xuICAgIHZhciBzdW0gPSAwLCBhdmVyYWdlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdW0gKz0geFtpXVsxXTtcbiAgICB9XG4gICAgYXZlcmFnZSA9IHN1bSAvIHgubGVuZ3RoO1xuXG4gICAgLy8gQ29tcHV0ZSB0aGUgdG90YWwgc3VtIG9mIHNxdWFyZXMgLSB0aGVcbiAgICAvLyBzcXVhcmVkIGRpZmZlcmVuY2UgYmV0d2VlbiBlYWNoIHBvaW50XG4gICAgLy8gYW5kIHRoZSBhdmVyYWdlIG9mIGFsbCBwb2ludHMuXG4gICAgdmFyIHN1bU9mU3F1YXJlcyA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCB4Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHN1bU9mU3F1YXJlcyArPSBNYXRoLnBvdyhhdmVyYWdlIC0geFtqXVsxXSwgMik7XG4gICAgfVxuXG4gICAgLy8gRmluYWxseSBlc3RpbWF0ZSB0aGUgZXJyb3I6IHRoZSBzcXVhcmVkXG4gICAgLy8gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBlc3RpbWF0ZSBhbmQgdGhlIGFjdHVhbCBkYXRhXG4gICAgLy8gdmFsdWUgYXQgZWFjaCBwb2ludC5cbiAgICB2YXIgZXJyID0gMDtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IHgubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgZXJyICs9IE1hdGgucG93KHhba11bMV0gLSBmdW5jKHhba11bMF0pLCAyKTtcbiAgICB9XG5cbiAgICAvLyBBcyB0aGUgZXJyb3IgZ3Jvd3MgbGFyZ2VyLCBpdHMgcmF0aW8gdG8gdGhlXG4gICAgLy8gc3VtIG9mIHNxdWFyZXMgaW5jcmVhc2VzIGFuZCB0aGUgciBzcXVhcmVkXG4gICAgLy8gdmFsdWUgZ3Jvd3MgbG93ZXIuXG4gICAgcmV0dXJuIDEgLSBlcnIgLyBzdW1PZlNxdWFyZXM7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFttb2RlXShodHRwOi8vYml0Lmx5L1c1SzRZdCkgaXMgdGhlIG51bWJlciB0aGF0IGFwcGVhcnMgaW4gYSBsaXN0IHRoZSBoaWdoZXN0IG51bWJlciBvZiB0aW1lcy5cbiAqIFRoZXJlIGNhbiBiZSBtdWx0aXBsZSBtb2RlcyBpbiBhIGxpc3Q6IGluIHRoZSBldmVudCBvZiBhIHRpZSwgdGhpc1xuICogYWxnb3JpdGhtIHdpbGwgcmV0dXJuIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbW9kZS5cbiAqXG4gKiBUaGlzIGlzIGEgW21lYXN1cmUgb2YgY2VudHJhbCB0ZW5kZW5jeV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2VudHJhbF90ZW5kZW5jeSk6XG4gKiBhIG1ldGhvZCBvZiBmaW5kaW5nIGEgdHlwaWNhbCBvciBjZW50cmFsIHZhbHVlIG9mIGEgc2V0IG9mIG51bWJlcnMuXG4gKlxuICogVGhpcyBydW5zIGluIGBPKG4pYCBiZWNhdXNlIHRoZSBpbnB1dCBpcyBzb3J0ZWQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzb3J0ZWQgYSBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IG1vZGVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBzb3J0ZWQgaXMgZW1wdHlcbiAqIEBleGFtcGxlXG4gKiBtb2RlU29ydGVkKFswLCAwLCAxXSk7IC8vID0+IDBcbiAqL1xuZnVuY3Rpb24gbW9kZVNvcnRlZChzb3J0ZWQgLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuXG4gICAgLy8gSGFuZGxlIGVkZ2UgY2FzZXM6XG4gICAgLy8gVGhlIG1vZGUgb2YgYW4gZW1wdHkgbGlzdCBpcyB1bmRlZmluZWRcbiAgICBpZiAoc29ydGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21vZGUgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGRhdGEgcG9pbnQnKTtcbiAgICB9IGVsc2UgaWYgKHNvcnRlZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHNvcnRlZFswXTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGFzc3VtZXMgaXQgaXMgZGVhbGluZyB3aXRoIGFuIGFycmF5IG9mIHNpemUgPiAxLCBzaW5jZSBzaXplXG4gICAgLy8gMCBhbmQgMSBhcmUgaGFuZGxlZCBpbW1lZGlhdGVseS4gSGVuY2UgaXQgc3RhcnRzIGF0IGluZGV4IDEgaW4gdGhlXG4gICAgLy8gYXJyYXkuXG4gICAgdmFyIGxhc3QgPSBzb3J0ZWRbMF0sXG4gICAgICAgIC8vIHN0b3JlIHRoZSBtb2RlIGFzIHdlIGZpbmQgbmV3IG1vZGVzXG4gICAgICAgIHZhbHVlID0gTmFOLFxuICAgICAgICAvLyBzdG9yZSBob3cgbWFueSB0aW1lcyB3ZSd2ZSBzZWVuIHRoZSBtb2RlXG4gICAgICAgIG1heFNlZW4gPSAwLFxuICAgICAgICAvLyBob3cgbWFueSB0aW1lcyB0aGUgY3VycmVudCBjYW5kaWRhdGUgZm9yIHRoZSBtb2RlXG4gICAgICAgIC8vIGhhcyBiZWVuIHNlZW5cbiAgICAgICAgc2VlblRoaXMgPSAxO1xuXG4gICAgLy8gZW5kIGF0IHNvcnRlZC5sZW5ndGggKyAxIHRvIGZpeCB0aGUgY2FzZSBpbiB3aGljaCB0aGUgbW9kZSBpc1xuICAgIC8vIHRoZSBoaWdoZXN0IG51bWJlciB0aGF0IG9jY3VycyBpbiB0aGUgc2VxdWVuY2UuIHRoZSBsYXN0IGl0ZXJhdGlvblxuICAgIC8vIGNvbXBhcmVzIHNvcnRlZFtpXSwgd2hpY2ggaXMgdW5kZWZpbmVkLCB0byB0aGUgaGlnaGVzdCBudW1iZXJcbiAgICAvLyBpbiB0aGUgc2VyaWVzXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBzb3J0ZWQubGVuZ3RoICsgMTsgaSsrKSB7XG4gICAgICAgIC8vIHdlJ3JlIHNlZWluZyBhIG5ldyBudW1iZXIgcGFzcyBieVxuICAgICAgICBpZiAoc29ydGVkW2ldICE9PSBsYXN0KSB7XG4gICAgICAgICAgICAvLyB0aGUgbGFzdCBudW1iZXIgaXMgdGhlIG5ldyBtb2RlIHNpbmNlIHdlIHNhdyBpdCBtb3JlXG4gICAgICAgICAgICAvLyBvZnRlbiB0aGFuIHRoZSBvbGQgb25lXG4gICAgICAgICAgICBpZiAoc2VlblRoaXMgPiBtYXhTZWVuKSB7XG4gICAgICAgICAgICAgICAgbWF4U2VlbiA9IHNlZW5UaGlzO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbGFzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlZW5UaGlzID0gMTtcbiAgICAgICAgICAgIGxhc3QgPSBzb3J0ZWRbaV07XG4gICAgICAgIC8vIGlmIHRoaXMgaXNuJ3QgYSBuZXcgbnVtYmVyLCBpdCdzIG9uZSBtb3JlIG9jY3VycmVuY2Ugb2ZcbiAgICAgICAgLy8gdGhlIHBvdGVudGlhbCBtb2RlXG4gICAgICAgIH0gZWxzZSB7IHNlZW5UaGlzKys7IH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFNvcnQgYW4gYXJyYXkgb2YgbnVtYmVycyBieSB0aGVpciBudW1lcmljIHZhbHVlLCBlbnN1cmluZyB0aGF0IHRoZVxuICogYXJyYXkgaXMgbm90IGNoYW5nZWQgaW4gcGxhY2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiAuc29ydFxuICogaW4gSmF2YVNjcmlwdCBpcyB0byBzb3J0IGFycmF5cyBhcyBzdHJpbmcgdmFsdWVzXG4gKlxuICogICAgIFsxLCAxMCwgMTIsIDEwMiwgMjBdLnNvcnQoKVxuICogICAgIC8vIG91dHB1dFxuICogICAgIFsxLCAxMCwgMTAyLCAxMiwgMjBdXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGlucHV0IGFycmF5XG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBzb3J0ZWQgYXJyYXlcbiAqIEBwcml2YXRlXG4gKiBAZXhhbXBsZVxuICogbnVtZXJpY1NvcnQoWzMsIDIsIDFdKSAvLyA9PiBbMSwgMiwgM11cbiAqL1xuZnVuY3Rpb24gbnVtZXJpY1NvcnQoeCAvKjogQXJyYXk8bnVtYmVyPiAqLykgLyo6IEFycmF5PG51bWJlcj4gKi8ge1xuICAgIHJldHVybiB4XG4gICAgICAgIC8vIGVuc3VyZSB0aGUgYXJyYXkgaXMgbm90IGNoYW5nZWQgaW4tcGxhY2VcbiAgICAgICAgLnNsaWNlKClcbiAgICAgICAgLy8gY29tcGFyYXRvciBmdW5jdGlvbiB0aGF0IHRyZWF0cyBpbnB1dCBhcyBudW1lcmljXG4gICAgICAgIC5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhIC0gYjtcbiAgICAgICAgfSk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFttb2RlXShodHRwOi8vYml0Lmx5L1c1SzRZdCkgaXMgdGhlIG51bWJlciB0aGF0IGFwcGVhcnMgaW4gYSBsaXN0IHRoZSBoaWdoZXN0IG51bWJlciBvZiB0aW1lcy5cbiAqIFRoZXJlIGNhbiBiZSBtdWx0aXBsZSBtb2RlcyBpbiBhIGxpc3Q6IGluIHRoZSBldmVudCBvZiBhIHRpZSwgdGhpc1xuICogYWxnb3JpdGhtIHdpbGwgcmV0dXJuIHRoZSBtb3N0IHJlY2VudGx5IHNlZW4gbW9kZS5cbiAqXG4gKiBUaGlzIGlzIGEgW21lYXN1cmUgb2YgY2VudHJhbCB0ZW5kZW5jeV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2VudHJhbF90ZW5kZW5jeSk6XG4gKiBhIG1ldGhvZCBvZiBmaW5kaW5nIGEgdHlwaWNhbCBvciBjZW50cmFsIHZhbHVlIG9mIGEgc2V0IG9mIG51bWJlcnMuXG4gKlxuICogVGhpcyBydW5zIG9uIGBPKG5sb2cobikpYCBiZWNhdXNlIGl0IG5lZWRzIHRvIHNvcnQgdGhlIGFycmF5IGludGVybmFsbHlcbiAqIGJlZm9yZSBydW5uaW5nIGFuIGBPKG4pYCBzZWFyY2ggdG8gZmluZCB0aGUgbW9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggaW5wdXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IG1vZGVcbiAqIEBleGFtcGxlXG4gKiBtb2RlKFswLCAwLCAxXSk7IC8vID0+IDBcbiAqL1xuZnVuY3Rpb24gbW9kZSh4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcbiAgICAvLyBTb3J0aW5nIHRoZSBhcnJheSBsZXRzIHVzIGl0ZXJhdGUgdGhyb3VnaCBpdCBiZWxvdyBhbmQgYmUgc3VyZVxuICAgIC8vIHRoYXQgZXZlcnkgdGltZSB3ZSBzZWUgYSBuZXcgbnVtYmVyIGl0J3MgbmV3IGFuZCB3ZSdsbCBuZXZlclxuICAgIC8vIHNlZSB0aGUgc2FtZSBudW1iZXIgdHdpY2VcbiAgICByZXR1cm4gbW9kZVNvcnRlZChudW1lcmljU29ydCh4KSk7XG59XG5cbi8qIEBmbG93ICovXG4vKiBnbG9iYWxzIE1hcDogZmFsc2UgKi9cblxuLyoqXG4gKiBUaGUgW21vZGVdKGh0dHA6Ly9iaXQubHkvVzVLNFl0KSBpcyB0aGUgbnVtYmVyIHRoYXQgYXBwZWFycyBpbiBhIGxpc3QgdGhlIGhpZ2hlc3QgbnVtYmVyIG9mIHRpbWVzLlxuICogVGhlcmUgY2FuIGJlIG11bHRpcGxlIG1vZGVzIGluIGEgbGlzdDogaW4gdGhlIGV2ZW50IG9mIGEgdGllLCB0aGlzXG4gKiBhbGdvcml0aG0gd2lsbCByZXR1cm4gdGhlIG1vc3QgcmVjZW50bHkgc2VlbiBtb2RlLlxuICpcbiAqIG1vZGVGYXN0IHVzZXMgYSBNYXAgb2JqZWN0IHRvIGtlZXAgdHJhY2sgb2YgdGhlIG1vZGUsIGluc3RlYWQgb2YgdGhlIGFwcHJvYWNoXG4gKiB1c2VkIHdpdGggYG1vZGVgLCBhIHNvcnRlZCBhcnJheS4gQXMgYSByZXN1bHQsIGl0IGlzIGZhc3RlclxuICogdGhhbiBgbW9kZWAgYW5kIHN1cHBvcnRzIGFueSBkYXRhIHR5cGUgdGhhdCBjYW4gYmUgY29tcGFyZWQgd2l0aCBgPT1gLlxuICogSXQgYWxzbyByZXF1aXJlcyBhXG4gKiBbSmF2YVNjcmlwdCBlbnZpcm9ubWVudCB3aXRoIHN1cHBvcnQgZm9yIE1hcF0oaHR0cHM6Ly9rYW5nYXguZ2l0aHViLmlvL2NvbXBhdC10YWJsZS9lczYvI3Rlc3QtTWFwKSxcbiAqIGFuZCB3aWxsIHRocm93IGFuIGVycm9yIGlmIE1hcCBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIFRoaXMgaXMgYSBbbWVhc3VyZSBvZiBjZW50cmFsIHRlbmRlbmN5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DZW50cmFsX3RlbmRlbmN5KTpcbiAqIGEgbWV0aG9kIG9mIGZpbmRpbmcgYSB0eXBpY2FsIG9yIGNlbnRyYWwgdmFsdWUgb2YgYSBzZXQgb2YgbnVtYmVycy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSB4IGEgc2FtcGxlIG9mIG9uZSBvciBtb3JlIGRhdGEgcG9pbnRzXG4gKiBAcmV0dXJucyB7Pyp9IG1vZGVcbiAqIEB0aHJvd3Mge1JlZmVyZW5jZUVycm9yfSBpZiB0aGUgSmF2YVNjcmlwdCBlbnZpcm9ubWVudCBkb2Vzbid0IHN1cHBvcnQgTWFwXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBpcyBlbXB0eVxuICogQGV4YW1wbGVcbiAqIG1vZGVGYXN0KFsncmFiYml0cycsICdyYWJiaXRzJywgJ3NxdWlycmVscyddKTsgLy8gPT4gJ3JhYmJpdHMnXG4gKi9cbmZ1bmN0aW9uIG1vZGVGYXN0Lyo6OjxUPiovKHggLyo6IEFycmF5PFQ+ICovKS8qOiA/VCAqLyB7XG5cbiAgICAvLyBUaGlzIGluZGV4IHdpbGwgcmVmbGVjdCB0aGUgaW5jaWRlbmNlIG9mIGRpZmZlcmVudCB2YWx1ZXMsIGluZGV4aW5nXG4gICAgLy8gdGhlbSBsaWtlXG4gICAgLy8geyB2YWx1ZTogY291bnQgfVxuICAgIHZhciBpbmRleCA9IG5ldyBNYXAoKTtcblxuICAgIC8vIEEgcnVubmluZyBgbW9kZWAgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgaXQgaGFzIGJlZW4gZW5jb3VudGVyZWQuXG4gICAgdmFyIG1vZGU7XG4gICAgdmFyIG1vZGVDb3VudCA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5ld0NvdW50ID0gaW5kZXguZ2V0KHhbaV0pO1xuICAgICAgICBpZiAobmV3Q291bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3Q291bnQgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3Q291bnQrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q291bnQgPiBtb2RlQ291bnQpIHtcbiAgICAgICAgICAgIG1vZGUgPSB4W2ldO1xuICAgICAgICAgICAgbW9kZUNvdW50ID0gbmV3Q291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXguc2V0KHhbaV0sIG5ld0NvdW50KTtcbiAgICB9XG5cbiAgICBpZiAobW9kZUNvdW50ID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbW9kZSByZXF1aXJlcyBhdCBsYXN0IG9uZSBkYXRhIHBvaW50Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vZGU7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIG1pbiBpcyB0aGUgbG93ZXN0IG51bWJlciBpbiB0aGUgYXJyYXkuIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IHNhbXBsZSBvZiBvbmUgb3IgbW9yZSBkYXRhIHBvaW50c1xuICogQHRocm93cyB7RXJyb3J9IGlmIHRoZSB0aGUgbGVuZ3RoIG9mIHggaXMgbGVzcyB0aGFuIG9uZVxuICogQHJldHVybnMge251bWJlcn0gbWluaW11bSB2YWx1ZVxuICogQGV4YW1wbGVcbiAqIG1pbihbMSwgNSwgLTEwLCAxMDAsIDJdKTsgLy8gPT4gLTEwXG4gKi9cbmZ1bmN0aW9uIG1pbih4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcblxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21pbiByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHhbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgdGhpcyBsb29wLCBtaW4gaXNcbiAgICAgICAgLy8gdW5kZWZpbmVkIGFuZCBpcyB0aHVzIG1hZGUgdGhlIG1pbmltdW0gZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgaWYgKHhbaV0gPCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSB4W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGlzIGNvbXB1dGVzIHRoZSBtYXhpbXVtIG51bWJlciBpbiBhbiBhcnJheS5cbiAqXG4gKiBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IG1heGltdW0gdmFsdWVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgdGhlIGxlbmd0aCBvZiB4IGlzIGxlc3MgdGhhbiBvbmVcbiAqIEBleGFtcGxlXG4gKiBtYXgoWzEsIDIsIDMsIDRdKTtcbiAqIC8vID0+IDRcbiAqL1xuZnVuY3Rpb24gbWF4KHggLyo6IEFycmF5PG51bWJlcj4gKi8pIC8qOm51bWJlciovIHtcblxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IHhbMF07XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb2YgdGhpcyBsb29wLCBtYXggaXNcbiAgICAgICAgLy8gdW5kZWZpbmVkIGFuZCBpcyB0aHVzIG1hZGUgdGhlIG1heGltdW0gZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAgICAgaWYgKHhbaV0gPiB2YWx1ZSkge1xuICAgICAgICAgICAgdmFsdWUgPSB4W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGlzIGNvbXB1dGVzIHRoZSBtaW5pbXVtICYgbWF4aW11bSBudW1iZXIgaW4gYW4gYXJyYXkuXG4gKlxuICogVGhpcyBydW5zIG9uIGBPKG4pYCwgbGluZWFyIHRpbWUgaW4gcmVzcGVjdCB0byB0aGUgYXJyYXlcbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggc2FtcGxlIG9mIG9uZSBvciBtb3JlIGRhdGEgcG9pbnRzXG4gKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gbWluaW11bSAmIG1heGltdW0gdmFsdWVcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgdGhlIGxlbmd0aCBvZiB4IGlzIGxlc3MgdGhhbiBvbmVcbiAqIEBleGFtcGxlXG4gKiBleHRlbnQoWzEsIDIsIDMsIDRdKTtcbiAqIC8vID0+IFsxLCA0XVxuICovXG5mdW5jdGlvbiBleHRlbnQoeCAvKjogQXJyYXk8bnVtYmVyPiAqLykgLyo6QXJyYXk8bnVtYmVyPiovIHtcblxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4dGVudCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIHZhciBtaW4gPSB4WzBdO1xuICAgIHZhciBtYXggPSB4WzBdO1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoeFtpXSA+IG1heCkge1xuICAgICAgICAgICAgbWF4ID0geFtpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeFtpXSA8IG1pbikge1xuICAgICAgICAgICAgbWluID0geFtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW21pbiwgbWF4XTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgbWluaW11bSBpcyB0aGUgbG93ZXN0IG51bWJlciBpbiB0aGUgYXJyYXkuIFdpdGggYSBzb3J0ZWQgYXJyYXksXG4gKiB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgYXJyYXkgaXMgYWx3YXlzIHRoZSBzbWFsbGVzdCwgc28gdGhpcyBjYWxjdWxhdGlvblxuICogY2FuIGJlIGRvbmUgaW4gb25lIHN0ZXAsIG9yIGNvbnN0YW50IHRpbWUuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGlucHV0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBtaW5pbXVtIHZhbHVlXG4gKiBAZXhhbXBsZVxuICogbWluU29ydGVkKFstMTAwLCAtMTAsIDEsIDIsIDVdKTsgLy8gPT4gLTEwMFxuICovXG5mdW5jdGlvbiBtaW5Tb3J0ZWQoeCAvKjogQXJyYXk8bnVtYmVyPiAqLykvKjogbnVtYmVyICovIHtcbiAgICByZXR1cm4geFswXTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgbWF4aW11bSBpcyB0aGUgaGlnaGVzdCBudW1iZXIgaW4gdGhlIGFycmF5LiBXaXRoIGEgc29ydGVkIGFycmF5LFxuICogdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJyYXkgaXMgYWx3YXlzIHRoZSBsYXJnZXN0LCBzbyB0aGlzIGNhbGN1bGF0aW9uXG4gKiBjYW4gYmUgZG9uZSBpbiBvbmUgc3RlcCwgb3IgY29uc3RhbnQgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggaW5wdXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IG1heGltdW0gdmFsdWVcbiAqIEBleGFtcGxlXG4gKiBtYXhTb3J0ZWQoWy0xMDAsIC0xMCwgMSwgMiwgNV0pOyAvLyA9PiA1XG4gKi9cbmZ1bmN0aW9uIG1heFNvcnRlZCh4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcbiAgICByZXR1cm4geFt4Lmxlbmd0aCAtIDFdO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBleHRlbnQgaXMgdGhlIGxvd2VzdCAmIGhpZ2hlc3QgbnVtYmVyIGluIHRoZSBhcnJheS4gV2l0aCBhIHNvcnRlZCBhcnJheSxcbiAqIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBhcnJheSBpcyBhbHdheXMgdGhlIGxvd2VzdCB3aGlsZSB0aGUgbGFzdCBlbGVtZW50IGlzIGFsd2F5cyB0aGUgbGFyZ2VzdCwgc28gdGhpcyBjYWxjdWxhdGlvblxuICogY2FuIGJlIGRvbmUgaW4gb25lIHN0ZXAsIG9yIGNvbnN0YW50IHRpbWUuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGlucHV0XG4gKiBAcmV0dXJucyB7QXJyYXk8bnVtYmVyPn0gbWluaW11bSAmIG1heGltdW0gdmFsdWVcbiAqIEBleGFtcGxlXG4gKiBleHRlbnRTb3J0ZWQoWy0xMDAsIC0xMCwgMSwgMiwgNV0pOyAvLyA9PiBbLTEwMCwgNV1cbiAqL1xuZnVuY3Rpb24gZXh0ZW50U29ydGVkKHggLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6QXJyYXk8bnVtYmVyPiovIHtcbiAgICByZXR1cm4gW3hbMF0sIHhbeC5sZW5ndGggLSAxXV07XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIHNpbXBsZSBbc3VtXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdW1tYXRpb24pIG9mIGFuIGFycmF5XG4gKiBpcyB0aGUgcmVzdWx0IG9mIGFkZGluZyBhbGwgbnVtYmVycyB0b2dldGhlciwgc3RhcnRpbmcgZnJvbSB6ZXJvLlxuICpcbiAqIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGlucHV0XG4gKiBAcmV0dXJuIHtudW1iZXJ9IHN1bSBvZiBhbGwgaW5wdXQgbnVtYmVyc1xuICogQGV4YW1wbGVcbiAqIHN1bVNpbXBsZShbMSwgMiwgM10pOyAvLyA9PiA2XG4gKi9cbmZ1bmN0aW9uIHN1bVNpbXBsZSh4Lyo6IEFycmF5PG51bWJlcj4gKi8pLyo6IG51bWJlciAqLyB7XG4gICAgdmFyIHZhbHVlID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgKz0geFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbcHJvZHVjdF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJvZHVjdF8obWF0aGVtYXRpY3MpKSBvZiBhbiBhcnJheVxuICogaXMgdGhlIHJlc3VsdCBvZiBtdWx0aXBseWluZyBhbGwgbnVtYmVycyB0b2dldGhlciwgc3RhcnRpbmcgdXNpbmcgb25lIGFzIHRoZSBtdWx0aXBsaWNhdGl2ZSBpZGVudGl0eS5cbiAqXG4gKiBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBpbnB1dFxuICogQHJldHVybiB7bnVtYmVyfSBwcm9kdWN0IG9mIGFsbCBpbnB1dCBudW1iZXJzXG4gKiBAZXhhbXBsZVxuICogcHJvZHVjdChbMSwgMiwgMywgNF0pOyAvLyA9PiAyNFxuICovXG5mdW5jdGlvbiBwcm9kdWN0KHgvKjogQXJyYXk8bnVtYmVyPiAqLykvKjogbnVtYmVyICovIHtcbiAgICB2YXIgdmFsdWUgPSAxO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSAqPSB4W2ldO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgaW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgcXVhbnRpbGVzOiB3aGVuIHlvdSBrbm93XG4gKiB0aGF0IHRoZSBvcmRlciBpcyBzb3J0ZWQsIHlvdSBkb24ndCBuZWVkIHRvIHJlLXNvcnQgaXQsIGFuZCB0aGUgY29tcHV0YXRpb25zXG4gKiBhcmUgZmFzdGVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEBwYXJhbSB7bnVtYmVyfSBwIGRlc2lyZWQgcXVhbnRpbGU6IGEgbnVtYmVyIGJldHdlZW4gMCB0byAxLCBpbmNsdXNpdmVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHF1YW50aWxlIHZhbHVlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgcCBpeCBvdXRzaWRlIG9mIHRoZSByYW5nZSBmcm9tIDAgdG8gMVxuICogQHRocm93cyB7RXJyb3J9IGlmIHggaXMgZW1wdHlcbiAqIEBleGFtcGxlXG4gKiBxdWFudGlsZVNvcnRlZChbMywgNiwgNywgOCwgOCwgOSwgMTAsIDEzLCAxNSwgMTYsIDIwXSwgMC41KTsgLy8gPT4gOVxuICovXG5mdW5jdGlvbiBxdWFudGlsZVNvcnRlZCh4IC8qOiBBcnJheTxudW1iZXI+ICovLCBwIC8qOiBudW1iZXIgKi8pLyo6IG51bWJlciAqLyB7XG4gICAgdmFyIGlkeCA9IHgubGVuZ3RoICogcDtcbiAgICBpZiAoeC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdxdWFudGlsZSByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludC4nKTtcbiAgICB9IGVsc2UgaWYgKHAgPCAwIHx8IHAgPiAxKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncXVhbnRpbGVzIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxJyk7XG4gICAgfSBlbHNlIGlmIChwID09PSAxKSB7XG4gICAgICAgIC8vIElmIHAgaXMgMSwgZGlyZWN0bHkgcmV0dXJuIHRoZSBsYXN0IGVsZW1lbnRcbiAgICAgICAgcmV0dXJuIHhbeC5sZW5ndGggLSAxXTtcbiAgICB9IGVsc2UgaWYgKHAgPT09IDApIHtcbiAgICAgICAgLy8gSWYgcCBpcyAwLCBkaXJlY3RseSByZXR1cm4gdGhlIGZpcnN0IGVsZW1lbnRcbiAgICAgICAgcmV0dXJuIHhbMF07XG4gICAgfSBlbHNlIGlmIChpZHggJSAxICE9PSAwKSB7XG4gICAgICAgIC8vIElmIHAgaXMgbm90IGludGVnZXIsIHJldHVybiB0aGUgbmV4dCBlbGVtZW50IGluIGFycmF5XG4gICAgICAgIHJldHVybiB4W01hdGguY2VpbChpZHgpIC0gMV07XG4gICAgfSBlbHNlIGlmICh4Lmxlbmd0aCAlIDIgPT09IDApIHtcbiAgICAgICAgLy8gSWYgdGhlIGxpc3QgaGFzIGV2ZW4tbGVuZ3RoLCB3ZSdsbCB0YWtlIHRoZSBhdmVyYWdlIG9mIHRoaXMgbnVtYmVyXG4gICAgICAgIC8vIGFuZCB0aGUgbmV4dCB2YWx1ZSwgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgIHJldHVybiAoeFtpZHggLSAxXSArIHhbaWR4XSkgLyAyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbmFsbHksIGluIHRoZSBzaW1wbGUgY2FzZSBvZiBhbiBpbnRlZ2VyIHZhbHVlXG4gICAgICAgIC8vIHdpdGggYW4gb2RkLWxlbmd0aCBsaXN0LCByZXR1cm4gdGhlIHggdmFsdWUgYXQgdGhlIGluZGV4LlxuICAgICAgICByZXR1cm4geFtpZHhdO1xuICAgIH1cbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBSZWFycmFuZ2UgaXRlbXMgaW4gYGFycmAgc28gdGhhdCBhbGwgaXRlbXMgaW4gYFtsZWZ0LCBrXWAgcmFuZ2UgYXJlIHRoZSBzbWFsbGVzdC5cbiAqIFRoZSBga2AtdGggZWxlbWVudCB3aWxsIGhhdmUgdGhlIGAoayAtIGxlZnQgKyAxKWAtdGggc21hbGxlc3QgdmFsdWUgaW4gYFtsZWZ0LCByaWdodF1gLlxuICpcbiAqIEltcGxlbWVudHMgRmxveWQtUml2ZXN0IHNlbGVjdGlvbiBhbGdvcml0aG0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmxveWQtUml2ZXN0X2FsZ29yaXRobVxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYXJyIGlucHV0IGFycmF5XG4gKiBAcGFyYW0ge251bWJlcn0gayBwaXZvdCBpbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IFtsZWZ0XSBsZWZ0IGluZGV4XG4gKiBAcGFyYW0ge251bWJlcn0gW3JpZ2h0XSByaWdodCBpbmRleFxuICogQHJldHVybnMge3ZvaWR9IG11dGF0ZXMgaW5wdXQgYXJyYXlcbiAqIEBleGFtcGxlXG4gKiB2YXIgYXJyID0gWzY1LCAyOCwgNTksIDMzLCAyMSwgNTYsIDIyLCA5NSwgNTAsIDEyLCA5MCwgNTMsIDI4LCA3NywgMzldO1xuICogcXVpY2tzZWxlY3QoYXJyLCA4KTtcbiAqIC8vID0gWzM5LCAyOCwgMjgsIDMzLCAyMSwgMTIsIDIyLCA1MCwgNTMsIDU2LCA1OSwgNjUsIDkwLCA3NywgOTVdXG4gKi9cbmZ1bmN0aW9uIHF1aWNrc2VsZWN0KGFyci8qOiBBcnJheTxudW1iZXI+ICovLCBrLyo6IG51bWJlciAqLywgbGVmdC8qOiA/bnVtYmVyICovLCByaWdodC8qOiA/bnVtYmVyICovKS8qOiB2b2lkICovIHtcbiAgICBsZWZ0ID0gbGVmdCB8fCAwO1xuICAgIHJpZ2h0ID0gcmlnaHQgfHwgKGFyci5sZW5ndGggLSAxKTtcblxuICAgIHdoaWxlIChyaWdodCA+IGxlZnQpIHtcbiAgICAgICAgLy8gNjAwIGFuZCAwLjUgYXJlIGFyYml0cmFyeSBjb25zdGFudHMgY2hvc2VuIGluIHRoZSBvcmlnaW5hbCBwYXBlciB0byBtaW5pbWl6ZSBleGVjdXRpb24gdGltZVxuICAgICAgICBpZiAocmlnaHQgLSBsZWZ0ID4gNjAwKSB7XG4gICAgICAgICAgICB2YXIgbiA9IHJpZ2h0IC0gbGVmdCArIDE7XG4gICAgICAgICAgICB2YXIgbSA9IGsgLSBsZWZ0ICsgMTtcbiAgICAgICAgICAgIHZhciB6ID0gTWF0aC5sb2cobik7XG4gICAgICAgICAgICB2YXIgcyA9IDAuNSAqIE1hdGguZXhwKDIgKiB6IC8gMyk7XG4gICAgICAgICAgICB2YXIgc2QgPSAwLjUgKiBNYXRoLnNxcnQoeiAqIHMgKiAobiAtIHMpIC8gbik7XG4gICAgICAgICAgICBpZiAobSAtIG4gLyAyIDwgMCkgc2QgKj0gLTE7XG4gICAgICAgICAgICB2YXIgbmV3TGVmdCA9IE1hdGgubWF4KGxlZnQsIE1hdGguZmxvb3IoayAtIG0gKiBzIC8gbiArIHNkKSk7XG4gICAgICAgICAgICB2YXIgbmV3UmlnaHQgPSBNYXRoLm1pbihyaWdodCwgTWF0aC5mbG9vcihrICsgKG4gLSBtKSAqIHMgLyBuICsgc2QpKTtcbiAgICAgICAgICAgIHF1aWNrc2VsZWN0KGFyciwgaywgbmV3TGVmdCwgbmV3UmlnaHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHQgPSBhcnJba107XG4gICAgICAgIHZhciBpID0gbGVmdDtcbiAgICAgICAgdmFyIGogPSByaWdodDtcblxuICAgICAgICBzd2FwKGFyciwgbGVmdCwgayk7XG4gICAgICAgIGlmIChhcnJbcmlnaHRdID4gdCkgc3dhcChhcnIsIGxlZnQsIHJpZ2h0KTtcblxuICAgICAgICB3aGlsZSAoaSA8IGopIHtcbiAgICAgICAgICAgIHN3YXAoYXJyLCBpLCBqKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIGotLTtcbiAgICAgICAgICAgIHdoaWxlIChhcnJbaV0gPCB0KSBpKys7XG4gICAgICAgICAgICB3aGlsZSAoYXJyW2pdID4gdCkgai0tO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFycltsZWZ0XSA9PT0gdCkgc3dhcChhcnIsIGxlZnQsIGopO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgIHN3YXAoYXJyLCBqLCByaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaiA8PSBrKSBsZWZ0ID0gaiArIDE7XG4gICAgICAgIGlmIChrIDw9IGopIHJpZ2h0ID0gaiAtIDE7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzd2FwKGFyciwgaSwgaikge1xuICAgIHZhciB0bXAgPSBhcnJbaV07XG4gICAgYXJyW2ldID0gYXJyW2pdO1xuICAgIGFycltqXSA9IHRtcDtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgW3F1YW50aWxlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWFudGlsZSk6XG4gKiB0aGlzIGlzIGEgcG9wdWxhdGlvbiBxdWFudGlsZSwgc2luY2Ugd2UgYXNzdW1lIHRvIGtub3cgdGhlIGVudGlyZVxuICogZGF0YXNldCBpbiB0aGlzIGxpYnJhcnkuIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlXG4gKiBbUXVhbnRpbGVzIG9mIGEgUG9wdWxhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWFudGlsZSNRdWFudGlsZXNfb2ZfYV9wb3B1bGF0aW9uKVxuICogYWxnb3JpdGhtIGZyb20gd2lraXBlZGlhLlxuICpcbiAqIFNhbXBsZSBpcyBhIG9uZS1kaW1lbnNpb25hbCBhcnJheSBvZiBudW1iZXJzLFxuICogYW5kIHAgaXMgZWl0aGVyIGEgZGVjaW1hbCBudW1iZXIgZnJvbSAwIHRvIDEgb3IgYW4gYXJyYXkgb2YgZGVjaW1hbFxuICogbnVtYmVycyBmcm9tIDAgdG8gMS5cbiAqIEluIHRlcm1zIG9mIGEgay9xIHF1YW50aWxlLCBwID0gay9xIC0gaXQncyBqdXN0IGRlYWxpbmcgd2l0aCBmcmFjdGlvbnMgb3IgZGVhbGluZ1xuICogd2l0aCBkZWNpbWFsIHZhbHVlcy5cbiAqIFdoZW4gcCBpcyBhbiBhcnJheSwgdGhlIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gaXMgYWxzbyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBhcHByb3ByaWF0ZVxuICogcXVhbnRpbGVzIGluIGlucHV0IG9yZGVyXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IHNhbXBsZSBvZiBvbmUgb3IgbW9yZSBudW1iZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj4gfCBudW1iZXJ9IHAgdGhlIGRlc2lyZWQgcXVhbnRpbGUsIGFzIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMVxuICogQHJldHVybnMge251bWJlcn0gcXVhbnRpbGVcbiAqIEBleGFtcGxlXG4gKiBxdWFudGlsZShbMywgNiwgNywgOCwgOCwgOSwgMTAsIDEzLCAxNSwgMTYsIDIwXSwgMC41KTsgLy8gPT4gOVxuICovXG5mdW5jdGlvbiBxdWFudGlsZSh4Lyo6IEFycmF5PG51bWJlcj4gKi8sIHAvKjogQXJyYXk8bnVtYmVyPiB8IG51bWJlciAqLykvKjogQXJyYXk8bnVtYmVyPiB8IG51bWJlciAqLyB7XG4gICAgdmFyIGNvcHkgPSB4LnNsaWNlKCk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShwKSkge1xuICAgICAgICAvLyByZWFycmFuZ2UgZWxlbWVudHMgc28gdGhhdCBlYWNoIGVsZW1lbnQgY29ycmVzcG9uZGluZyB0byBhIHJlcXVlc3RlZFxuICAgICAgICAvLyBxdWFudGlsZSBpcyBvbiBhIHBsYWNlIGl0IHdvdWxkIGJlIGlmIHRoZSBhcnJheSB3YXMgZnVsbHkgc29ydGVkXG4gICAgICAgIG11bHRpUXVhbnRpbGVTZWxlY3QoY29weSwgcCk7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc3VsdCBhcnJheVxuICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgICAgICAvLyBGb3IgZWFjaCByZXF1ZXN0ZWQgcXVhbnRpbGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0gcXVhbnRpbGVTb3J0ZWQoY29weSwgcFtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGlkeCA9IHF1YW50aWxlSW5kZXgoY29weS5sZW5ndGgsIHApO1xuICAgICAgICBxdWFudGlsZVNlbGVjdChjb3B5LCBpZHgsIDAsIGNvcHkubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBxdWFudGlsZVNvcnRlZChjb3B5LCBwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHF1YW50aWxlU2VsZWN0KGFyciwgaywgbGVmdCwgcmlnaHQpIHtcbiAgICBpZiAoayAlIDEgPT09IDApIHtcbiAgICAgICAgcXVpY2tzZWxlY3QoYXJyLCBrLCBsZWZ0LCByaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgayA9IE1hdGguZmxvb3Ioayk7XG4gICAgICAgIHF1aWNrc2VsZWN0KGFyciwgaywgbGVmdCwgcmlnaHQpO1xuICAgICAgICBxdWlja3NlbGVjdChhcnIsIGsgKyAxLCBrICsgMSwgcmlnaHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbXVsdGlRdWFudGlsZVNlbGVjdChhcnIsIHApIHtcbiAgICB2YXIgaW5kaWNlcyA9IFswXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaW5kaWNlcy5wdXNoKHF1YW50aWxlSW5kZXgoYXJyLmxlbmd0aCwgcFtpXSkpO1xuICAgIH1cbiAgICBpbmRpY2VzLnB1c2goYXJyLmxlbmd0aCAtIDEpO1xuICAgIGluZGljZXMuc29ydChjb21wYXJlKTtcblxuICAgIHZhciBzdGFjayA9IFswLCBpbmRpY2VzLmxlbmd0aCAtIDFdO1xuXG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICB2YXIgciA9IE1hdGguY2VpbChzdGFjay5wb3AoKSk7XG4gICAgICAgIHZhciBsID0gTWF0aC5mbG9vcihzdGFjay5wb3AoKSk7XG4gICAgICAgIGlmIChyIC0gbCA8PSAxKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgbSA9IE1hdGguZmxvb3IoKGwgKyByKSAvIDIpO1xuICAgICAgICBxdWFudGlsZVNlbGVjdChhcnIsIGluZGljZXNbbV0sIGluZGljZXNbbF0sIGluZGljZXNbcl0pO1xuXG4gICAgICAgIHN0YWNrLnB1c2gobCwgbSwgbSwgcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcbiAgICByZXR1cm4gYSAtIGI7XG59XG5cbmZ1bmN0aW9uIHF1YW50aWxlSW5kZXgobGVuIC8qOiBudW1iZXIgKi8sIHAgLyo6IG51bWJlciAqLykvKjpudW1iZXIqLyB7XG4gICAgdmFyIGlkeCA9IGxlbiAqIHA7XG4gICAgaWYgKHAgPT09IDEpIHtcbiAgICAgICAgLy8gSWYgcCBpcyAxLCBkaXJlY3RseSByZXR1cm4gdGhlIGxhc3QgaW5kZXhcbiAgICAgICAgcmV0dXJuIGxlbiAtIDE7XG4gICAgfSBlbHNlIGlmIChwID09PSAwKSB7XG4gICAgICAgIC8vIElmIHAgaXMgMCwgZGlyZWN0bHkgcmV0dXJuIHRoZSBmaXJzdCBpbmRleFxuICAgICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2UgaWYgKGlkeCAlIDEgIT09IDApIHtcbiAgICAgICAgLy8gSWYgaW5kZXggaXMgbm90IGludGVnZXIsIHJldHVybiB0aGUgbmV4dCBpbmRleCBpbiBhcnJheVxuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGlkeCkgLSAxO1xuICAgIH0gZWxzZSBpZiAobGVuICUgMiA9PT0gMCkge1xuICAgICAgICAvLyBJZiB0aGUgbGlzdCBoYXMgZXZlbi1sZW5ndGgsIHdlJ2xsIHJldHVybiB0aGUgbWlkZGxlIG9mIHR3byBpbmRpY2VzXG4gICAgICAgIC8vIGFyb3VuZCBxdWFudGlsZSB0byBpbmRpY2F0ZSB0aGF0IHdlIG5lZWQgYW4gYXZlcmFnZSB2YWx1ZSBvZiB0aGUgdHdvXG4gICAgICAgIHJldHVybiBpZHggLSAwLjU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmluYWxseSwgaW4gdGhlIHNpbXBsZSBjYXNlIG9mIGFuIGludGVnZXIgaW5kZXhcbiAgICAgICAgLy8gd2l0aCBhbiBvZGQtbGVuZ3RoIGxpc3QsIHJldHVybiB0aGUgaW5kZXhcbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgcXVhbnRpbGUgaW4gd2hpY2ggb25lIHdvdWxkIGZpbmQgdGhlIGdpdmVuIHZhbHVlIGluXG4gKiB0aGUgZ2l2ZW4gYXJyYXkuIFdpdGggYSBzb3J0ZWQgYXJyYXksIGxldmVyYWdpbmcgYmluYXJ5IHNlYXJjaCwgd2UgY2FuIGZpbmRcbiAqIHRoaXMgaW5mb3JtYXRpb24gaW4gbG9nYXJpdGhtaWMgdGltZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggaW5wdXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHZhbHVlIHZhbHVlXG4gKiBAZXhhbXBsZVxuICogcXVhbnRpbGVSYW5rU29ydGVkKFsxLCAyLCAzLCA0XSwgMyk7IC8vID0+IDAuNzVcbiAqIHF1YW50aWxlUmFua1NvcnRlZChbMSwgMiwgMywgMywgNF0sIDMpOyAvLyA9PiAwLjdcbiAqIHF1YW50aWxlUmFua1NvcnRlZChbMSwgMiwgMywgNF0sIDYpOyAvLyA9PiAxXG4gKiBxdWFudGlsZVJhbmtTb3J0ZWQoWzEsIDIsIDMsIDMsIDVdLCA0KTsgLy8gPT4gMC44XG4gKi9cbmZ1bmN0aW9uIHF1YW50aWxlUmFua1NvcnRlZChcbiAgICB4IC8qOiBBcnJheTxudW1iZXI+ICovLFxuICAgIHZhbHVlIC8qOiBudW1iZXIgKi8pLyo6IG51bWJlciAqLyB7XG5cbiAgICAvLyBWYWx1ZSBpcyBsZXNzZXIgdGhhbiBhbnkgdmFsdWUgaW4gdGhlIGFycmF5XG4gICAgaWYgKHZhbHVlIDwgeFswXSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICAvLyBWYWx1ZSBpcyBncmVhdGVyIHRoYW4gYW55IHZhbHVlIGluIHRoZSBhcnJheVxuICAgIGlmICh2YWx1ZSA+IHhbeC5sZW5ndGggLSAxXSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG5cbiAgICB2YXIgbCA9IGxvd2VyQm91bmQoeCwgdmFsdWUpO1xuXG4gICAgLy8gVmFsdWUgaXMgbm90IGluIHRoZSBhcnJheVxuICAgIGlmICh4W2xdICE9PSB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbCAvIHgubGVuZ3RoO1xuICAgIH1cblxuICAgIGwrKztcblxuICAgIHZhciB1ID0gdXBwZXJCb3VuZCh4LCB2YWx1ZSk7XG5cbiAgICAvLyBUaGUgdmFsdWUgZXhpc3RzIG9ubHkgb25jZSBpbiB0aGUgYXJyYXlcbiAgICBpZiAodSA9PT0gbCkge1xuICAgICAgICByZXR1cm4gbCAvIHgubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIEhlcmUsIHdlIGFyZSBiYXNpY2FsbHkgY29tcHV0aW5nIHRoZSBtZWFuIG9mIHRoZSByYW5nZSBvZiBpbmRpY2VzXG4gICAgLy8gY29udGFpbmluZyBvdXIgc2VhcmNoZWQgdmFsdWUuIEJ1dCwgaW5zdGVhZCwgb2YgaW5pdGlhbGl6aW5nIGFuXG4gICAgLy8gYXJyYXkgYW5kIGxvb3Bpbmcgb3ZlciBpdCwgdGhlcmUgaXMgYSBkZWRpY2F0ZWQgbWF0aCBmb3JtdWxhIHRoYXRcbiAgICAvLyB3ZSBhcHBseSBiZWxvdyB0byBnZXQgdGhlIHJlc3VsdC5cbiAgICB2YXIgciA9IHUgLSBsICsgMTtcbiAgICB2YXIgc3VtID0gKHIgKiAodSArIGwpKSAvIDI7XG4gICAgdmFyIG1lYW4gPSBzdW0gLyByO1xuXG4gICAgcmV0dXJuIG1lYW4gLyB4Lmxlbmd0aDtcbn1cblxuZnVuY3Rpb24gbG93ZXJCb3VuZCh4LCB2YWx1ZSkge1xuICAgIHZhciBtaWQgPSAwO1xuICAgIHZhciBsbyA9IDA7XG4gICAgdmFyIGhpID0geC5sZW5ndGg7XG5cbiAgICB3aGlsZSAobG8gPCBoaSkge1xuICAgICAgICBtaWQgPSAobG8gKyBoaSkgPj4+IDE7XG5cbiAgICAgICAgaWYgKHZhbHVlIDw9IHhbbWlkXSkge1xuICAgICAgICAgICAgaGkgPSBtaWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsbyA9IC1+bWlkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxvO1xufVxuXG5mdW5jdGlvbiB1cHBlckJvdW5kKHgsIHZhbHVlKSB7XG4gICAgdmFyIG1pZCA9IDA7XG4gICAgdmFyIGxvID0gMDtcbiAgICB2YXIgaGkgPSB4Lmxlbmd0aDtcblxuICAgIHdoaWxlIChsbyA8IGhpKSB7XG4gICAgICAgIG1pZCA9IChsbyArIGhpKSA+Pj4gMTtcblxuICAgICAgICBpZiAodmFsdWUgPj0geFttaWRdKSB7XG4gICAgICAgICAgICBsbyA9IC1+bWlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGkgPSBtaWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbG87XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBxdWFudGlsZSBpbiB3aGljaCBvbmUgd291bGQgZmluZCB0aGUgZ2l2ZW4gdmFsdWUgaW5cbiAqIHRoZSBnaXZlbiBhcnJheS4gSXQgd2lsbCByZXF1aXJlIHRvIGNvcHkgYW5kIHNvcnQgeW91ciBhcnJheSBiZWZvcmVoYW5kLCBzb1xuICogaWYgeW91IGtub3cgeW91ciBhcnJheSBpcyBhbHJlYWR5IHNvcnRlZCwgeW91IHdvdWxkIHJhdGhlciB1c2VcbiAqIGBxdWFudGlsZVJhbmtTb3J0ZWRgLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBpbnB1dFxuICogQHJldHVybnMge251bWJlcn0gdmFsdWUgdmFsdWVcbiAqIEBleGFtcGxlXG4gKiBxdWFudGlsZVJhbmsoWzQsIDMsIDEsIDJdLCAzKTsgLy8gPT4gMC43NVxuICogcXVhbnRpbGVSYW5rKFs0LCAzLCAyLCAzLCAxXSwgMyk7IC8vID0+IDAuN1xuICogcXVhbnRpbGVSYW5rKFsyLCA0LCAxLCAzXSwgNik7IC8vID0+IDFcbiAqIHF1YW50aWxlUmFuayhbNSwgMywgMSwgMiwgM10sIDQpOyAvLyA9PiAwLjhcbiAqL1xuZnVuY3Rpb24gcXVhbnRpbGVSYW5rKFxuICAgIHggLyo6IEFycmF5PG51bWJlcj4gKi8sXG4gICAgdmFsdWUgLyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcblxuICAgIC8vIENsb25pbmcgYW5kIHNvcnRpbmcgdGhlIGFycmF5XG4gICAgdmFyIHNvcnRlZENvcHkgPSBudW1lcmljU29ydCh4KTtcblxuICAgIHJldHVybiBxdWFudGlsZVJhbmtTb3J0ZWQoc29ydGVkQ29weSwgdmFsdWUpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbSW50ZXJxdWFydGlsZSByYW5nZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JbnRlcnF1YXJ0aWxlX3JhbmdlKSBpc1xuICogYSBtZWFzdXJlIG9mIHN0YXRpc3RpY2FsIGRpc3BlcnNpb24sIG9yIGhvdyBzY2F0dGVyZWQsIHNwcmVhZCwgb3JcbiAqIGNvbmNlbnRyYXRlZCBhIGRpc3RyaWJ1dGlvbiBpcy4gSXQncyBjb21wdXRlZCBhcyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuXG4gKiB0aGUgdGhpcmQgcXVhcnRpbGUgYW5kIGZpcnN0IHF1YXJ0aWxlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgbnVtYmVyc1xuICogQHJldHVybnMge251bWJlcn0gaW50ZXJxdWFydGlsZSByYW5nZTogdGhlIHNwYW4gYmV0d2VlbiBsb3dlciBhbmQgdXBwZXIgcXVhcnRpbGUsXG4gKiAwLjI1IGFuZCAwLjc1XG4gKiBAZXhhbXBsZVxuICogaW50ZXJxdWFydGlsZVJhbmdlKFswLCAxLCAyLCAzXSk7IC8vID0+IDJcbiAqL1xuZnVuY3Rpb24gaW50ZXJxdWFydGlsZVJhbmdlKHgvKjogQXJyYXk8bnVtYmVyPiAqLykge1xuICAgIC8vIEludGVycXVhcnRpbGUgcmFuZ2UgaXMgdGhlIHNwYW4gYmV0d2VlbiB0aGUgdXBwZXIgcXVhcnRpbGUsXG4gICAgLy8gYXQgYDAuNzVgLCBhbmQgbG93ZXIgcXVhcnRpbGUsIGAwLjI1YFxuICAgIHZhciBxMSA9IHF1YW50aWxlKHgsIDAuNzUpLFxuICAgICAgICBxMiA9IHF1YW50aWxlKHgsIDAuMjUpO1xuXG4gICAgaWYgKHR5cGVvZiBxMSA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHEyID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gcTEgLSBxMjtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFttZWRpYW5dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWVkaWFuKSBpc1xuICogdGhlIG1pZGRsZSBudW1iZXIgb2YgYSBsaXN0LiBUaGlzIGlzIG9mdGVuIGEgZ29vZCBpbmRpY2F0b3Igb2YgJ3RoZSBtaWRkbGUnXG4gKiB3aGVuIHRoZXJlIGFyZSBvdXRsaWVycyB0aGF0IHNrZXcgdGhlIGBtZWFuKClgIHZhbHVlLlxuICogVGhpcyBpcyBhIFttZWFzdXJlIG9mIGNlbnRyYWwgdGVuZGVuY3ldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NlbnRyYWxfdGVuZGVuY3kpOlxuICogYSBtZXRob2Qgb2YgZmluZGluZyBhIHR5cGljYWwgb3IgY2VudHJhbCB2YWx1ZSBvZiBhIHNldCBvZiBudW1iZXJzLlxuICpcbiAqIFRoZSBtZWRpYW4gaXNuJ3QgbmVjZXNzYXJpbHkgb25lIG9mIHRoZSBlbGVtZW50cyBpbiB0aGUgbGlzdDogdGhlIHZhbHVlXG4gKiBjYW4gYmUgdGhlIGF2ZXJhZ2Ugb2YgdHdvIGVsZW1lbnRzIGlmIHRoZSBsaXN0IGhhcyBhbiBldmVuIGxlbmd0aFxuICogYW5kIHRoZSB0d28gY2VudHJhbCB2YWx1ZXMgYXJlIGRpZmZlcmVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggaW5wdXRcbiAqIEByZXR1cm5zIHtudW1iZXJ9IG1lZGlhbiB2YWx1ZVxuICogQGV4YW1wbGVcbiAqIG1lZGlhbihbMTAsIDIsIDUsIDEwMCwgMiwgMV0pOyAvLyA9PiAzLjVcbiAqL1xuZnVuY3Rpb24gbWVkaWFuKHggLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6IG51bWJlciAqLyB7XG4gICAgcmV0dXJuICtxdWFudGlsZSh4LCAwLjUpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbTWVkaWFuIEFic29sdXRlIERldmlhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWRpYW5fYWJzb2x1dGVfZGV2aWF0aW9uKSBpc1xuICogYSByb2J1c3QgbWVhc3VyZSBvZiBzdGF0aXN0aWNhbFxuICogZGlzcGVyc2lvbi4gSXQgaXMgbW9yZSByZXNpbGllbnQgdG8gb3V0bGllcnMgdGhhbiB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBpbnB1dCBhcnJheVxuICogQHJldHVybnMge251bWJlcn0gbWVkaWFuIGFic29sdXRlIGRldmlhdGlvblxuICogQGV4YW1wbGVcbiAqIG1lZGlhbkFic29sdXRlRGV2aWF0aW9uKFsxLCAxLCAyLCAyLCA0LCA2LCA5XSk7IC8vID0+IDFcbiAqL1xuZnVuY3Rpb24gbWVkaWFuQWJzb2x1dGVEZXZpYXRpb24oeC8qOiBBcnJheTxudW1iZXI+ICovKS8qOiBudW1iZXIgKi8ge1xuICAgIC8vIFRoZSBtYWQgb2Ygbm90aGluZyBpcyBudWxsXG4gICAgdmFyIG1lZGlhblZhbHVlID0gbWVkaWFuKHgpLFxuICAgICAgICBtZWRpYW5BYnNvbHV0ZURldmlhdGlvbnMgPSBbXTtcblxuICAgIC8vIE1ha2UgYSBsaXN0IG9mIGFic29sdXRlIGRldmlhdGlvbnMgZnJvbSB0aGUgbWVkaWFuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1lZGlhbkFic29sdXRlRGV2aWF0aW9ucy5wdXNoKE1hdGguYWJzKHhbaV0gLSBtZWRpYW5WYWx1ZSkpO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIG1lZGlhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICByZXR1cm4gbWVkaWFuKG1lZGlhbkFic29sdXRlRGV2aWF0aW9ucyk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogU3BsaXQgYW4gYXJyYXkgaW50byBjaHVua3Mgb2YgYSBzcGVjaWZpZWQgc2l6ZS4gVGhpcyBmdW5jdGlvblxuICogaGFzIHRoZSBzYW1lIGJlaGF2aW9yIGFzIFtQSFAncyBhcnJheV9jaHVua10oaHR0cDovL3BocC5uZXQvbWFudWFsL2VuL2Z1bmN0aW9uLmFycmF5LWNodW5rLnBocClcbiAqIGZ1bmN0aW9uLCBhbmQgdGh1cyB3aWxsIGluc2VydCBzbWFsbGVyLXNpemVkIGNodW5rcyBhdCB0aGUgZW5kIGlmXG4gKiB0aGUgaW5wdXQgc2l6ZSBpcyBub3QgZGl2aXNpYmxlIGJ5IHRoZSBjaHVuayBzaXplLlxuICpcbiAqIGB4YCBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheSwgYW5kIGBjaHVua1NpemVgIGEgbnVtYmVyLlxuICogVGhlIGB4YCBhcnJheSBjYW4gY29udGFpbiBhbnkga2luZCBvZiBkYXRhLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHggYSBzYW1wbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjaHVua1NpemUgc2l6ZSBvZiBlYWNoIG91dHB1dCBhcnJheS4gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJcbiAqIEByZXR1cm5zIHtBcnJheTxBcnJheT59IGEgY2h1bmtlZCBhcnJheVxuICogQHRocm93cyB7RXJyb3J9IGlmIGNodW5rIHNpemUgaXMgbGVzcyB0aGFuIDEgb3Igbm90IGFuIGludGVnZXJcbiAqIEBleGFtcGxlXG4gKiBjaHVuayhbMSwgMiwgMywgNCwgNSwgNl0sIDIpO1xuICogLy8gPT4gW1sxLCAyXSwgWzMsIDRdLCBbNSwgNl1dXG4gKi9cbmZ1bmN0aW9uIGNodW5rKHgvKjpBcnJheTxhbnk+Ki8sIGNodW5rU2l6ZS8qOm51bWJlciovKS8qOj9BcnJheTxBcnJheTxhbnk+PiovIHtcblxuICAgIC8vIGEgbGlzdCBvZiByZXN1bHQgY2h1bmtzLCBhcyBhcnJheXMgaW4gYW4gYXJyYXlcbiAgICB2YXIgb3V0cHV0ID0gW107XG5cbiAgICAvLyBgY2h1bmtTaXplYCBtdXN0IGJlIHplcm8gb3IgaGlnaGVyIC0gb3RoZXJ3aXNlIHRoZSBsb29wIGJlbG93LFxuICAgIC8vIGluIHdoaWNoIHdlIGNhbGwgYHN0YXJ0ICs9IGNodW5rU2l6ZWAsIHdpbGwgbG9vcCBpbmZpbml0ZWx5LlxuICAgIC8vIFNvLCB3ZSdsbCBkZXRlY3QgYW5kIHRocm93IGluIHRoYXQgY2FzZSB0byBpbmRpY2F0ZVxuICAgIC8vIGludmFsaWQgaW5wdXQuXG4gICAgaWYgKGNodW5rU2l6ZSA8IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaHVuayBzaXplIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgICB9XG5cbiAgICBpZiAoTWF0aC5mbG9vcihjaHVua1NpemUpICE9PSBjaHVua1NpemUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjaHVuayBzaXplIG11c3QgYmUgYW4gaW50ZWdlcicpO1xuICAgIH1cblxuICAgIC8vIGBzdGFydGAgaXMgdGhlIGluZGV4IGF0IHdoaWNoIGAuc2xpY2VgIHdpbGwgc3RhcnQgc2VsZWN0aW5nXG4gICAgLy8gbmV3IGFycmF5IGVsZW1lbnRzXG4gICAgZm9yICh2YXIgc3RhcnQgPSAwOyBzdGFydCA8IHgubGVuZ3RoOyBzdGFydCArPSBjaHVua1NpemUpIHtcblxuICAgICAgICAvLyBmb3IgZWFjaCBjaHVuaywgc2xpY2UgdGhhdCBwYXJ0IG9mIHRoZSBhcnJheSBhbmQgYWRkIGl0XG4gICAgICAgIC8vIHRvIHRoZSBvdXRwdXQuIFRoZSBgLnNsaWNlYCBmdW5jdGlvbiBkb2VzIG5vdCBjaGFuZ2VcbiAgICAgICAgLy8gdGhlIG9yaWdpbmFsIGFycmF5LlxuICAgICAgICBvdXRwdXQucHVzaCh4LnNsaWNlKHN0YXJ0LCBzdGFydCArIGNodW5rU2l6ZSkpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFNhbXBsaW5nIHdpdGggcmVwbGFjZW1lbnQgaXMgYSB0eXBlIG9mIHNhbXBsaW5nIHRoYXQgYWxsb3dzIHRoZSBzYW1lXG4gKiBpdGVtIHRvIGJlIHBpY2tlZCBvdXQgb2YgYSBwb3B1bGF0aW9uIG1vcmUgdGhhbiBvbmNlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHggYW4gYXJyYXkgb2YgYW55IGtpbmQgb2YgdmFsdWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIGNvdW50IG9mIGhvdyBtYW55IGVsZW1lbnRzIHRvIHRha2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtyYW5kb21Tb3VyY2U9TWF0aC5yYW5kb21dIGFuIG9wdGlvbmFsIGVudHJvcHkgc291cmNlIHRoYXRcbiAqIHJldHVybnMgbnVtYmVycyBiZXR3ZWVuIDAgaW5jbHVzaXZlIGFuZCAxIGV4Y2x1c2l2ZTogdGhlIHJhbmdlIFswLCAxKVxuICogQHJldHVybiB7QXJyYXl9IG4gc2FtcGxlZCBpdGVtcyBmcm9tIHRoZSBwb3B1bGF0aW9uXG4gKiBAZXhhbXBsZVxuICogdmFyIHZhbHVlcyA9IFsxLCAyLCAzLCA0XTtcbiAqIHNhbXBsZVdpdGhSZXBsYWNlbWVudCh2YWx1ZXMsIDIpOyAvLyByZXR1cm5zIDIgcmFuZG9tIHZhbHVlcywgbGlrZSBbMiwgNF07XG4gKi9cbmZ1bmN0aW9uIHNhbXBsZVdpdGhSZXBsYWNlbWVudC8qOjo8VD4qLyhcbiAgICB4Lyo6IEFycmF5PFQ+ICovLFxuICAgIG4vKjogbnVtYmVyICovLFxuICAgIHJhbmRvbVNvdXJjZS8qOiA/RnVuY3Rpb24gKi8pIHtcblxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gYSBjdXN0b20gcmFuZG9tIG51bWJlciBzb3VyY2UgY2FuIGJlIHByb3ZpZGVkIGlmIHlvdSB3YW50IHRvIHVzZVxuICAgIC8vIGEgZml4ZWQgc2VlZCBvciBhbm90aGVyIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLCBsaWtlXG4gICAgLy8gW3JhbmRvbS1qc10oaHR0cHM6Ly93d3cubnBtanMub3JnL3BhY2thZ2UvcmFuZG9tLWpzKVxuICAgIHJhbmRvbVNvdXJjZSA9IHJhbmRvbVNvdXJjZSB8fCBNYXRoLnJhbmRvbTtcblxuICAgIHZhciBsZW5ndGggPSB4Lmxlbmd0aDtcbiAgICB2YXIgc2FtcGxlID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgaW5kZXggPSBNYXRoLmZsb29yKHJhbmRvbVNvdXJjZSgpICogbGVuZ3RoKTtcblxuICAgICAgICBzYW1wbGUucHVzaCh4W2luZGV4XSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNhbXBsZTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBBIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXIlRTIlODAlOTNZYXRlc19zaHVmZmxlKVxuICogaW4tcGxhY2UgLSB3aGljaCBtZWFucyB0aGF0IGl0ICoqd2lsbCBjaGFuZ2UgdGhlIG9yZGVyIG9mIHRoZSBvcmlnaW5hbFxuICogYXJyYXkgYnkgcmVmZXJlbmNlKiouXG4gKlxuICogVGhpcyBpcyBhbiBhbGdvcml0aG0gdGhhdCBnZW5lcmF0ZXMgYSByYW5kb20gW3Blcm11dGF0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QZXJtdXRhdGlvbilcbiAqIG9mIGEgc2V0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHggc2FtcGxlIG9mIG9uZSBvciBtb3JlIG51bWJlcnNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtyYW5kb21Tb3VyY2U9TWF0aC5yYW5kb21dIGFuIG9wdGlvbmFsIGVudHJvcHkgc291cmNlIHRoYXRcbiAqIHJldHVybnMgbnVtYmVycyBiZXR3ZWVuIDAgaW5jbHVzaXZlIGFuZCAxIGV4Y2x1c2l2ZTogdGhlIHJhbmdlIFswLCAxKVxuICogQHJldHVybnMge0FycmF5fSB4XG4gKiBAZXhhbXBsZVxuICogdmFyIHggPSBbMSwgMiwgMywgNF07XG4gKiBzaHVmZmxlSW5QbGFjZSh4KTtcbiAqIC8vIHggaXMgc2h1ZmZsZWQgdG8gYSB2YWx1ZSBsaWtlIFsyLCAxLCA0LCAzXVxuICovXG5mdW5jdGlvbiBzaHVmZmxlSW5QbGFjZSh4Lyo6IEFycmF5PGFueT4gKi8sIHJhbmRvbVNvdXJjZS8qOiA/RnVuY3Rpb24gKi8pLyo6IEFycmF5PGFueT4gKi8ge1xuXG4gICAgLy8gYSBjdXN0b20gcmFuZG9tIG51bWJlciBzb3VyY2UgY2FuIGJlIHByb3ZpZGVkIGlmIHlvdSB3YW50IHRvIHVzZVxuICAgIC8vIGEgZml4ZWQgc2VlZCBvciBhbm90aGVyIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLCBsaWtlXG4gICAgLy8gW3JhbmRvbS1qc10oaHR0cHM6Ly93d3cubnBtanMub3JnL3BhY2thZ2UvcmFuZG9tLWpzKVxuICAgIHJhbmRvbVNvdXJjZSA9IHJhbmRvbVNvdXJjZSB8fCBNYXRoLnJhbmRvbTtcblxuICAgIC8vIHN0b3JlIHRoZSBjdXJyZW50IGxlbmd0aCBvZiB0aGUgeCB0byBkZXRlcm1pbmVcbiAgICAvLyB3aGVuIG5vIGVsZW1lbnRzIHJlbWFpbiB0byBzaHVmZmxlLlxuICAgIHZhciBsZW5ndGggPSB4Lmxlbmd0aDtcblxuICAgIC8vIHRlbXBvcmFyeSBpcyB1c2VkIHRvIGhvbGQgYW4gaXRlbSB3aGVuIGl0IGlzIGJlaW5nXG4gICAgLy8gc3dhcHBlZCBiZXR3ZWVuIGluZGljZXMuXG4gICAgdmFyIHRlbXBvcmFyeTtcblxuICAgIC8vIFRoZSBpbmRleCB0byBzd2FwIGF0IGVhY2ggc3RhZ2UuXG4gICAgdmFyIGluZGV4O1xuXG4gICAgLy8gV2hpbGUgdGhlcmUgYXJlIHN0aWxsIGl0ZW1zIHRvIHNodWZmbGVcbiAgICB3aGlsZSAobGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBjaG9zZSBhIHJhbmRvbSBpbmRleCB3aXRoaW4gdGhlIHN1YnNldCBvZiB0aGUgYXJyYXlcbiAgICAgICAgLy8gdGhhdCBpcyBub3QgeWV0IHNodWZmbGVkXG4gICAgICAgIGluZGV4ID0gTWF0aC5mbG9vcihyYW5kb21Tb3VyY2UoKSAqIGxlbmd0aC0tKTtcblxuICAgICAgICAvLyBzdG9yZSB0aGUgdmFsdWUgdGhhdCB3ZSdsbCBtb3ZlIHRlbXBvcmFyaWx5XG4gICAgICAgIHRlbXBvcmFyeSA9IHhbbGVuZ3RoXTtcblxuICAgICAgICAvLyBzd2FwIHRoZSB2YWx1ZSBhdCBgeFtsZW5ndGhdYCB3aXRoIGB4W2luZGV4XWBcbiAgICAgICAgeFtsZW5ndGhdID0geFtpbmRleF07XG4gICAgICAgIHhbaW5kZXhdID0gdGVtcG9yYXJ5O1xuICAgIH1cblxuICAgIHJldHVybiB4O1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIEEgW0Zpc2hlci1ZYXRlcyBzaHVmZmxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlciVFMiU4MCU5M1lhdGVzX3NodWZmbGUpXG4gKiBpcyBhIGZhc3Qgd2F5IHRvIGNyZWF0ZSBhIHJhbmRvbSBwZXJtdXRhdGlvbiBvZiBhIGZpbml0ZSBzZXQuIFRoaXMgaXNcbiAqIGEgZnVuY3Rpb24gYXJvdW5kIGBzaHVmZmxlX2luX3BsYWNlYCB0aGF0IGFkZHMgdGhlIGd1YXJhbnRlZSB0aGF0XG4gKiBpdCB3aWxsIG5vdCBtb2RpZnkgaXRzIGlucHV0LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHggc2FtcGxlIG9mIDAgb3IgbW9yZSBudW1iZXJzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmFuZG9tU291cmNlPU1hdGgucmFuZG9tXSBhbiBvcHRpb25hbCBlbnRyb3B5IHNvdXJjZSB0aGF0XG4gKiByZXR1cm5zIG51bWJlcnMgYmV0d2VlbiAwIGluY2x1c2l2ZSBhbmQgMSBleGNsdXNpdmU6IHRoZSByYW5nZSBbMCwgMSlcbiAqIEByZXR1cm4ge0FycmF5fSBzaHVmZmxlZCB2ZXJzaW9uIG9mIGlucHV0XG4gKiBAZXhhbXBsZVxuICogdmFyIHNodWZmbGVkID0gc2h1ZmZsZShbMSwgMiwgMywgNF0pO1xuICogc2h1ZmZsZWQ7IC8vID0gWzIsIDMsIDEsIDRdIG9yIGFueSBvdGhlciByYW5kb20gcGVybXV0YXRpb25cbiAqL1xuZnVuY3Rpb24gc2h1ZmZsZS8qOjo8VD4qLyh4Lyo6IEFycmF5PFQ+ICovLCByYW5kb21Tb3VyY2UvKjogP0Z1bmN0aW9uICovKSB7XG4gICAgLy8gc2xpY2UgdGhlIG9yaWdpbmFsIGFycmF5IHNvIHRoYXQgaXQgaXMgbm90IG1vZGlmaWVkXG4gICAgdmFyIHNhbXBsZSA9IHguc2xpY2UoKTtcblxuICAgIC8vIGFuZCB0aGVuIHNodWZmbGUgdGhhdCBzaGFsbG93LWNvcGllZCBhcnJheSwgaW4gcGxhY2VcbiAgICByZXR1cm4gc2h1ZmZsZUluUGxhY2Uoc2FtcGxlLnNsaWNlKCksIHJhbmRvbVNvdXJjZSk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogQ3JlYXRlIGEgW3NpbXBsZSByYW5kb20gc2FtcGxlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NpbXBsZV9yYW5kb21fc2FtcGxlKVxuICogZnJvbSBhIGdpdmVuIGFycmF5IG9mIGBuYCBlbGVtZW50cy5cbiAqXG4gKiBUaGUgc2FtcGxlZCB2YWx1ZXMgd2lsbCBiZSBpbiBhbnkgb3JkZXIsIG5vdCBuZWNlc3NhcmlseSB0aGUgb3JkZXJcbiAqIHRoZXkgYXBwZWFyIGluIHRoZSBpbnB1dC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGFueT59IHggaW5wdXQgYXJyYXkuIGNhbiBjb250YWluIGFueSB0eXBlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBjb3VudCBvZiBob3cgbWFueSBlbGVtZW50cyB0byB0YWtlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmFuZG9tU291cmNlPU1hdGgucmFuZG9tXSBhbiBvcHRpb25hbCBlbnRyb3B5IHNvdXJjZSB0aGF0XG4gKiByZXR1cm5zIG51bWJlcnMgYmV0d2VlbiAwIGluY2x1c2l2ZSBhbmQgMSBleGNsdXNpdmU6IHRoZSByYW5nZSBbMCwgMSlcbiAqIEByZXR1cm4ge0FycmF5fSBzdWJzZXQgb2YgbiBlbGVtZW50cyBpbiBvcmlnaW5hbCBhcnJheVxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgdmFsdWVzID0gWzEsIDIsIDQsIDUsIDYsIDcsIDgsIDldO1xuICogc2FtcGxlKHZhbHVlcywgMyk7IC8vIHJldHVybnMgMyByYW5kb20gdmFsdWVzLCBsaWtlIFsyLCA1LCA4XTtcbiAqL1xuZnVuY3Rpb24gc2FtcGxlLyo6OiA8VD4gKi8oXG4gICAgeCAvKjogQXJyYXk8VD4gKi8sXG4gICAgbiAvKjogbnVtYmVyICovLFxuICAgIHJhbmRvbVNvdXJjZSAvKjogP0Z1bmN0aW9uICovKSAvKjogQXJyYXk8VD4gKi8ge1xuICAgIC8vIHNodWZmbGUgdGhlIG9yaWdpbmFsIGFycmF5IHVzaW5nIGEgZmlzaGVyLXlhdGVzIHNodWZmbGVcbiAgICB2YXIgc2h1ZmZsZWQgPSBzaHVmZmxlKHgsIHJhbmRvbVNvdXJjZSk7XG5cbiAgICAvLyBhbmQgdGhlbiByZXR1cm4gYSBzdWJzZXQgb2YgaXQgLSB0aGUgZmlyc3QgYG5gIGVsZW1lbnRzLlxuICAgIHJldHVybiBzaHVmZmxlZC5zbGljZSgwLCBuKTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBGb3IgYSBzb3J0ZWQgaW5wdXQsIGNvdW50aW5nIHRoZSBudW1iZXIgb2YgdW5pcXVlIHZhbHVlc1xuICogaXMgcG9zc2libGUgaW4gY29uc3RhbnQgdGltZSBhbmQgY29uc3RhbnQgbWVtb3J5LiBUaGlzIGlzXG4gKiBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgYWxnb3JpdGhtLlxuICpcbiAqIFZhbHVlcyBhcmUgY29tcGFyZWQgd2l0aCBgPT09YCwgc28gb2JqZWN0cyBhbmQgbm9uLXByaW1pdGl2ZSBvYmplY3RzXG4gKiBhcmUgbm90IGhhbmRsZWQgaW4gYW55IHNwZWNpYWwgd2F5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IHggYW4gYXJyYXkgb2YgYW55IGtpbmQgb2YgdmFsdWVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGNvdW50IG9mIHVuaXF1ZSB2YWx1ZXNcbiAqIEBleGFtcGxlXG4gKiB1bmlxdWVDb3VudFNvcnRlZChbMSwgMiwgM10pOyAvLyA9PiAzXG4gKiB1bmlxdWVDb3VudFNvcnRlZChbMSwgMSwgMV0pOyAvLyA9PiAxXG4gKi9cbmZ1bmN0aW9uIHVuaXF1ZUNvdW50U29ydGVkKHgvKjogQXJyYXk8YW55PiovKS8qOiBudW1iZXIgKi8ge1xuICAgIHZhciB1bmlxdWVWYWx1ZUNvdW50ID0gMCxcbiAgICAgICAgbGFzdFNlZW5WYWx1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgPT09IDAgfHwgeFtpXSAhPT0gbGFzdFNlZW5WYWx1ZSkge1xuICAgICAgICAgICAgbGFzdFNlZW5WYWx1ZSA9IHhbaV07XG4gICAgICAgICAgICB1bmlxdWVWYWx1ZUNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuaXF1ZVZhbHVlQ291bnQ7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGNvbHVtbiB4IHJvdyBtYXRyaXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW5zXG4gKiBAcGFyYW0ge251bWJlcn0gcm93c1xuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IG1hdHJpeFxuICogQGV4YW1wbGVcbiAqIG1ha2VNYXRyaXgoMTAsIDEwKTtcbiAqL1xuZnVuY3Rpb24gbWFrZU1hdHJpeChjb2x1bW5zLCByb3dzKSB7XG4gICAgdmFyIG1hdHJpeCA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sdW1uczsgaSsrKSB7XG4gICAgICAgIHZhciBjb2x1bW4gPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3dzOyBqKyspIHtcbiAgICAgICAgICAgIGNvbHVtbi5wdXNoKDApO1xuICAgICAgICB9XG4gICAgICAgIG1hdHJpeC5wdXNoKGNvbHVtbik7XG4gICAgfVxuICAgIHJldHVybiBtYXRyaXg7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGluY3JlbWVudGFsbHkgY29tcHV0ZWQgdmFsdWVzIGJhc2VkIG9uIHRoZSBzdW1zIGFuZCBzdW1zIG9mXG4gKiBzcXVhcmVzIGZvciB0aGUgZGF0YSBhcnJheVxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0galxuICogQHBhcmFtIHtudW1iZXJ9IGlcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc3Vtc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzdW1zT2ZTcXVhcmVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKiBAZXhhbXBsZVxuICogc3NxKDAsIDEsIFstMSwgMCwgMl0sIFsxLCAxLCA1XSk7XG4gKi9cbmZ1bmN0aW9uIHNzcShqLCBpLCBzdW1zLCBzdW1zT2ZTcXVhcmVzKSB7XG4gICAgdmFyIHNqaTsgLy8gcyhqLCBpKVxuICAgIGlmIChqID4gMCkge1xuICAgICAgICB2YXIgbXVqaSA9IChzdW1zW2ldIC0gc3Vtc1tqIC0gMV0pIC8gKGkgLSBqICsgMSk7IC8vIG11KGosIGkpXG4gICAgICAgIHNqaSA9IHN1bXNPZlNxdWFyZXNbaV0gLSBzdW1zT2ZTcXVhcmVzW2ogLSAxXSAtIChpIC0gaiArIDEpICogbXVqaSAqIG11amk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2ppID0gc3Vtc09mU3F1YXJlc1tpXSAtIHN1bXNbaV0gKiBzdW1zW2ldIC8gKGkgKyAxKTtcbiAgICB9XG4gICAgaWYgKHNqaSA8IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBzamk7XG59XG5cbi8qKlxuICogRnVuY3Rpb24gdGhhdCByZWN1cnNpdmVseSBkaXZpZGVzIGFuZCBjb25xdWVycyBjb21wdXRhdGlvbnNcbiAqIGZvciBjbHVzdGVyIGpcbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGlNaW4gTWluaW11bSBpbmRleCBpbiBjbHVzdGVyIHRvIGJlIGNvbXB1dGVkXG4gKiBAcGFyYW0ge251bWJlcn0gaU1heCBNYXhpbXVtIGluZGV4IGluIGNsdXN0ZXIgdG8gYmUgY29tcHV0ZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBjbHVzdGVyIEluZGV4IG9mIHRoZSBjbHVzdGVyIGN1cnJlbnRseSBiZWluZyBjb21wdXRlZFxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0cml4XG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBiYWNrdHJhY2tNYXRyaXhcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc3Vtc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzdW1zT2ZTcXVhcmVzXG4gKi9cbmZ1bmN0aW9uIGZpbGxNYXRyaXhDb2x1bW4oaU1pbiwgaU1heCwgY2x1c3RlciwgbWF0cml4LCBiYWNrdHJhY2tNYXRyaXgsIHN1bXMsIHN1bXNPZlNxdWFyZXMpIHtcbiAgICBpZiAoaU1pbiA+IGlNYXgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IGF0IG1pZHBvaW50IGJldHdlZW4gaU1pbiBhbmQgaU1heFxuICAgIHZhciBpID0gTWF0aC5mbG9vcigoaU1pbiArIGlNYXgpIC8gMik7XG5cbiAgICBtYXRyaXhbY2x1c3Rlcl1baV0gPSBtYXRyaXhbY2x1c3RlciAtIDFdW2kgLSAxXTtcbiAgICBiYWNrdHJhY2tNYXRyaXhbY2x1c3Rlcl1baV0gPSBpO1xuXG4gICAgdmFyIGpsb3cgPSBjbHVzdGVyOyAvLyB0aGUgbG93ZXIgZW5kIGZvciBqXG5cbiAgICBpZiAoaU1pbiA+IGNsdXN0ZXIpIHtcbiAgICAgICAgamxvdyA9IE1hdGgubWF4KGpsb3csIGJhY2t0cmFja01hdHJpeFtjbHVzdGVyXVtpTWluIC0gMV0gfHwgMCk7XG4gICAgfVxuICAgIGpsb3cgPSBNYXRoLm1heChqbG93LCBiYWNrdHJhY2tNYXRyaXhbY2x1c3RlciAtIDFdW2ldIHx8IDApO1xuXG4gICAgdmFyIGpoaWdoID0gaSAtIDE7IC8vIHRoZSB1cHBlciBlbmQgZm9yIGpcbiAgICBpZiAoaU1heCA8IG1hdHJpeC5sZW5ndGggLSAxKSB7XG4gICAgICAgIGpoaWdoID0gTWF0aC5taW4oamhpZ2gsIGJhY2t0cmFja01hdHJpeFtjbHVzdGVyXVtpTWF4ICsgMV0gfHwgMCk7XG4gICAgfVxuXG4gICAgdmFyIHNqaTtcbiAgICB2YXIgc2psb3dpO1xuICAgIHZhciBzc3FqbG93O1xuICAgIHZhciBzc3FqO1xuICAgIGZvciAodmFyIGogPSBqaGlnaDsgaiA+PSBqbG93OyAtLWopIHtcbiAgICAgICAgc2ppID0gc3NxKGosIGksIHN1bXMsIHN1bXNPZlNxdWFyZXMpO1xuXG4gICAgICAgIGlmIChzamkgKyBtYXRyaXhbY2x1c3RlciAtIDFdW2psb3cgLSAxXSA+PSBtYXRyaXhbY2x1c3Rlcl1baV0pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXhhbWluZSB0aGUgbG93ZXIgYm91bmQgb2YgdGhlIGNsdXN0ZXIgYm9yZGVyXG4gICAgICAgIHNqbG93aSA9IHNzcShqbG93LCBpLCBzdW1zLCBzdW1zT2ZTcXVhcmVzKTtcblxuICAgICAgICBzc3FqbG93ID0gc2psb3dpICsgbWF0cml4W2NsdXN0ZXIgLSAxXVtqbG93IC0gMV07XG5cbiAgICAgICAgaWYgKHNzcWpsb3cgPCBtYXRyaXhbY2x1c3Rlcl1baV0pIHtcbiAgICAgICAgICAgIC8vIFNocmluayB0aGUgbG93ZXIgYm91bmRcbiAgICAgICAgICAgIG1hdHJpeFtjbHVzdGVyXVtpXSA9IHNzcWpsb3c7XG4gICAgICAgICAgICBiYWNrdHJhY2tNYXRyaXhbY2x1c3Rlcl1baV0gPSBqbG93O1xuICAgICAgICB9XG4gICAgICAgIGpsb3crKztcblxuICAgICAgICBzc3FqID0gc2ppICsgbWF0cml4W2NsdXN0ZXIgLSAxXVtqIC0gMV07XG4gICAgICAgIGlmIChzc3FqIDwgbWF0cml4W2NsdXN0ZXJdW2ldKSB7XG4gICAgICAgICAgICBtYXRyaXhbY2x1c3Rlcl1baV0gPSBzc3FqO1xuICAgICAgICAgICAgYmFja3RyYWNrTWF0cml4W2NsdXN0ZXJdW2ldID0gajtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZpbGxNYXRyaXhDb2x1bW4oaU1pbiwgaSAtIDEsIGNsdXN0ZXIsIG1hdHJpeCwgYmFja3RyYWNrTWF0cml4LCBzdW1zLCBzdW1zT2ZTcXVhcmVzKTtcbiAgICBmaWxsTWF0cml4Q29sdW1uKGkgKyAxLCBpTWF4LCBjbHVzdGVyLCBtYXRyaXgsIGJhY2t0cmFja01hdHJpeCwgc3Vtcywgc3Vtc09mU3F1YXJlcyk7XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgdGhlIG1haW4gbWF0cmljZXMgdXNlZCBpbiBDa21lYW5zIGFuZCBraWNrc1xuICogb2ZmIHRoZSBkaXZpZGUgYW5kIGNvbnF1ZXIgY2x1c3RlciBjb21wdXRhdGlvbiBzdHJhdGVneVxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGRhdGEgc29ydGVkIGFycmF5IG9mIHZhbHVlc1xuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0cml4XG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBiYWNrdHJhY2tNYXRyaXhcbiAqL1xuZnVuY3Rpb24gZmlsbE1hdHJpY2VzKGRhdGEsIG1hdHJpeCwgYmFja3RyYWNrTWF0cml4KSB7XG4gICAgdmFyIG5WYWx1ZXMgPSBtYXRyaXhbMF0ubGVuZ3RoO1xuXG4gICAgLy8gU2hpZnQgdmFsdWVzIGJ5IHRoZSBtZWRpYW4gdG8gaW1wcm92ZSBudW1lcmljIHN0YWJpbGl0eVxuICAgIHZhciBzaGlmdCA9IGRhdGFbTWF0aC5mbG9vcihuVmFsdWVzIC8gMildO1xuXG4gICAgLy8gQ3VtdWxhdGl2ZSBzdW0gYW5kIGN1bXVsYXRpdmUgc3VtIG9mIHNxdWFyZXMgZm9yIGFsbCB2YWx1ZXMgaW4gZGF0YSBhcnJheVxuICAgIHZhciBzdW1zID0gW107XG4gICAgdmFyIHN1bXNPZlNxdWFyZXMgPSBbXTtcblxuICAgIC8vIEluaXRpYWxpemUgZmlyc3QgY29sdW1uIGluIG1hdHJpeCAmIGJhY2t0cmFja01hdHJpeFxuICAgIGZvciAodmFyIGkgPSAwLCBzaGlmdGVkVmFsdWU7IGkgPCBuVmFsdWVzOyArK2kpIHtcbiAgICAgICAgc2hpZnRlZFZhbHVlID0gZGF0YVtpXSAtIHNoaWZ0O1xuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgc3Vtcy5wdXNoKHNoaWZ0ZWRWYWx1ZSk7XG4gICAgICAgICAgICBzdW1zT2ZTcXVhcmVzLnB1c2goc2hpZnRlZFZhbHVlICogc2hpZnRlZFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1bXMucHVzaChzdW1zW2kgLSAxXSArIHNoaWZ0ZWRWYWx1ZSk7XG4gICAgICAgICAgICBzdW1zT2ZTcXVhcmVzLnB1c2goc3Vtc09mU3F1YXJlc1tpIC0gMV0gKyBzaGlmdGVkVmFsdWUgKiBzaGlmdGVkVmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBmb3IgY2x1c3RlciA9IDBcbiAgICAgICAgbWF0cml4WzBdW2ldID0gc3NxKDAsIGksIHN1bXMsIHN1bXNPZlNxdWFyZXMpO1xuICAgICAgICBiYWNrdHJhY2tNYXRyaXhbMF1baV0gPSAwO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc3Qgb2YgdGhlIGNvbHVtbnNcbiAgICB2YXIgaU1pbjtcbiAgICBmb3IgKHZhciBjbHVzdGVyID0gMTsgY2x1c3RlciA8IG1hdHJpeC5sZW5ndGg7ICsrY2x1c3Rlcikge1xuICAgICAgICBpZiAoY2x1c3RlciA8IG1hdHJpeC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpTWluID0gY2x1c3RlcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gY29tcHV0ZSBtYXRyaXhbSy0xXVswXSAuLi4gbWF0cml4W0stMV1bTi0yXVxuICAgICAgICAgICAgaU1pbiA9IG5WYWx1ZXMgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlsbE1hdHJpeENvbHVtbihpTWluLCBuVmFsdWVzIC0gMSwgY2x1c3RlciwgbWF0cml4LCBiYWNrdHJhY2tNYXRyaXgsIHN1bXMsIHN1bXNPZlNxdWFyZXMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDa21lYW5zIGNsdXN0ZXJpbmcgaXMgYW4gaW1wcm92ZW1lbnQgb24gaGV1cmlzdGljLWJhc2VkIGNsdXN0ZXJpbmdcbiAqIGFwcHJvYWNoZXMgbGlrZSBKZW5rcy4gVGhlIGFsZ29yaXRobSB3YXMgZGV2ZWxvcGVkIGluXG4gKiBbSGFpemhvdSBXYW5nIGFuZCBNaW5nemhvdSBTb25nXShodHRwOi8vam91cm5hbC5yLXByb2plY3Qub3JnL2FyY2hpdmUvMjAxMS0yL1JKb3VybmFsXzIwMTEtMl9XYW5nK1NvbmcucGRmKVxuICogYXMgYSBbZHluYW1pYyBwcm9ncmFtbWluZ10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRHluYW1pY19wcm9ncmFtbWluZykgYXBwcm9hY2hcbiAqIHRvIHRoZSBwcm9ibGVtIG9mIGNsdXN0ZXJpbmcgbnVtZXJpYyBkYXRhIGludG8gZ3JvdXBzIHdpdGggdGhlIGxlYXN0XG4gKiB3aXRoaW4tZ3JvdXAgc3VtLW9mLXNxdWFyZWQtZGV2aWF0aW9ucy5cbiAqXG4gKiBNaW5pbWl6aW5nIHRoZSBkaWZmZXJlbmNlIHdpdGhpbiBncm91cHMgLSB3aGF0IFdhbmcgJiBTb25nIHJlZmVyIHRvIGFzXG4gKiBgd2l0aGluc3NgLCBvciB3aXRoaW4gc3VtLW9mLXNxdWFyZXMsIG1lYW5zIHRoYXQgZ3JvdXBzIGFyZSBvcHRpbWFsbHlcbiAqIGhvbW9nZW5vdXMgd2l0aGluIGFuZCB0aGUgZGF0YSBpcyBzcGxpdCBpbnRvIHJlcHJlc2VudGF0aXZlIGdyb3Vwcy5cbiAqIFRoaXMgaXMgdmVyeSB1c2VmdWwgZm9yIHZpc3VhbGl6YXRpb24sIHdoZXJlIHlvdSBtYXkgd2FudCB0byByZXByZXNlbnRcbiAqIGEgY29udGludW91cyB2YXJpYWJsZSBpbiBkaXNjcmV0ZSBjb2xvciBvciBzdHlsZSBncm91cHMuIFRoaXMgZnVuY3Rpb25cbiAqIGNhbiBwcm92aWRlIGdyb3VwcyB0aGF0IGVtcGhhc2l6ZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGRhdGEuXG4gKlxuICogQmVpbmcgYSBkeW5hbWljIGFwcHJvYWNoLCB0aGlzIGFsZ29yaXRobSBpcyBiYXNlZCBvbiB0d28gbWF0cmljZXMgdGhhdFxuICogc3RvcmUgaW5jcmVtZW50YWxseS1jb21wdXRlZCB2YWx1ZXMgZm9yIHNxdWFyZWQgZGV2aWF0aW9ucyBhbmQgYmFja3RyYWNraW5nXG4gKiBpbmRleGVzLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gaXMgYmFzZWQgb24gQ2ttZWFucyAzLjQuNiwgd2hpY2ggaW50cm9kdWNlZCBhIG5ldyBkaXZpZGVcbiAqIGFuZCBjb25xdWVyIGFwcHJvYWNoIHRoYXQgaW1wcm92ZWQgcnVudGltZSBmcm9tIE8oa25eMikgdG8gTyhrbiBsb2cobikpLlxuICpcbiAqIFVubGlrZSB0aGUgW29yaWdpbmFsIGltcGxlbWVudGF0aW9uXShodHRwczovL2NyYW4uci1wcm9qZWN0Lm9yZy93ZWIvcGFja2FnZXMvQ2ttZWFucy4xZC5kcC9pbmRleC5odG1sKSxcbiAqIHRoaXMgaW1wbGVtZW50YXRpb24gZG9lcyBub3QgaW5jbHVkZSBhbnkgY29kZSB0byBhdXRvbWF0aWNhbGx5IGRldGVybWluZVxuICogdGhlIG9wdGltYWwgbnVtYmVyIG9mIGNsdXN0ZXJzOiB0aGlzIGluZm9ybWF0aW9uIG5lZWRzIHRvIGJlIGV4cGxpY2l0bHlcbiAqIHByb3ZpZGVkLlxuICpcbiAqICMjIyBSZWZlcmVuY2VzXG4gKiBfQ2ttZWFucy4xZC5kcDogT3B0aW1hbCBrLW1lYW5zIENsdXN0ZXJpbmcgaW4gT25lIERpbWVuc2lvbiBieSBEeW5hbWljXG4gKiBQcm9ncmFtbWluZ18gSGFpemhvdSBXYW5nIGFuZCBNaW5nemhvdSBTb25nIElTU04gMjA3My00ODU5XG4gKlxuICogZnJvbSBUaGUgUiBKb3VybmFsIFZvbC4gMy8yLCBEZWNlbWJlciAyMDExXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggaW5wdXQgZGF0YSwgYXMgYW4gYXJyYXkgb2YgbnVtYmVyIHZhbHVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5DbHVzdGVycyBudW1iZXIgb2YgZGVzaXJlZCBjbGFzc2VzLiBUaGlzIGNhbm5vdCBiZVxuICogZ3JlYXRlciB0aGFuIHRoZSBudW1iZXIgb2YgdmFsdWVzIGluIHRoZSBkYXRhIGFycmF5LlxuICogQHJldHVybnMge0FycmF5PEFycmF5PG51bWJlcj4+fSBjbHVzdGVyZWQgaW5wdXRcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgbnVtYmVyIG9mIHJlcXVlc3RlZCBjbHVzdGVycyBpcyBoaWdoZXIgdGhhbiB0aGUgc2l6ZSBvZiB0aGUgZGF0YVxuICogQGV4YW1wbGVcbiAqIGNrbWVhbnMoWy0xLCAyLCAtMSwgMiwgNCwgNSwgNiwgLTEsIDIsIC0xXSwgMyk7XG4gKiAvLyBUaGUgaW5wdXQsIGNsdXN0ZXJlZCBpbnRvIGdyb3VwcyBvZiBzaW1pbGFyIG51bWJlcnMuXG4gKiAvLz0gW1stMSwgLTEsIC0xLCAtMV0sIFsyLCAyLCAyXSwgWzQsIDUsIDZdXSk7XG4gKi9cbmZ1bmN0aW9uIGNrbWVhbnMoXG4gICAgeC8qOiBBcnJheTxudW1iZXI+ICovLFxuICAgIG5DbHVzdGVycy8qOiBudW1iZXIgKi8pLyo6IEFycmF5PEFycmF5PG51bWJlcj4+ICovIHtcblxuICAgIGlmIChuQ2x1c3RlcnMgPiB4Lmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBnZW5lcmF0ZSBtb3JlIGNsYXNzZXMgdGhhbiB0aGVyZSBhcmUgZGF0YSB2YWx1ZXMnKTtcbiAgICB9XG5cbiAgICB2YXIgc29ydGVkID0gbnVtZXJpY1NvcnQoeCksXG4gICAgICAgIC8vIHdlJ2xsIHVzZSB0aGlzIGFzIHRoZSBtYXhpbXVtIG51bWJlciBvZiBjbHVzdGVyc1xuICAgICAgICB1bmlxdWVDb3VudCA9IHVuaXF1ZUNvdW50U29ydGVkKHNvcnRlZCk7XG5cbiAgICAvLyBpZiBhbGwgb2YgdGhlIGlucHV0IHZhbHVlcyBhcmUgaWRlbnRpY2FsLCB0aGVyZSdzIG9uZSBjbHVzdGVyXG4gICAgLy8gd2l0aCBhbGwgb2YgdGhlIGlucHV0IGluIGl0LlxuICAgIGlmICh1bmlxdWVDb3VudCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gW3NvcnRlZF07XG4gICAgfVxuXG4gICAgLy8gbmFtZWQgJ1MnIG9yaWdpbmFsbHlcbiAgICB2YXIgbWF0cml4ID0gbWFrZU1hdHJpeChuQ2x1c3RlcnMsIHNvcnRlZC5sZW5ndGgpLFxuICAgICAgICAvLyBuYW1lZCAnSicgb3JpZ2luYWxseVxuICAgICAgICBiYWNrdHJhY2tNYXRyaXggPSBtYWtlTWF0cml4KG5DbHVzdGVycywgc29ydGVkLmxlbmd0aCk7XG5cbiAgICAvLyBUaGlzIGlzIGEgZHluYW1pYyBwcm9ncmFtbWluZyB3YXkgdG8gc29sdmUgdGhlIHByb2JsZW0gb2YgbWluaW1pemluZ1xuICAgIC8vIHdpdGhpbi1jbHVzdGVyIHN1bSBvZiBzcXVhcmVzLiBJdCdzIHNpbWlsYXIgdG8gbGluZWFyIHJlZ3Jlc3Npb25cbiAgICAvLyBpbiB0aGlzIHdheSwgYW5kIHRoaXMgY2FsY3VsYXRpb24gaW5jcmVtZW50YWxseSBjb21wdXRlcyB0aGVcbiAgICAvLyBzdW0gb2Ygc3F1YXJlcyB0aGF0IGFyZSBsYXRlciByZWFkLlxuICAgIGZpbGxNYXRyaWNlcyhzb3J0ZWQsIG1hdHJpeCwgYmFja3RyYWNrTWF0cml4KTtcblxuICAgIC8vIFRoZSByZWFsIHdvcmsgb2YgQ2ttZWFucyBjbHVzdGVyaW5nIGhhcHBlbnMgaW4gdGhlIG1hdHJpeCBnZW5lcmF0aW9uOlxuICAgIC8vIHRoZSBnZW5lcmF0ZWQgbWF0cmljZXMgZW5jb2RlIGFsbCBwb3NzaWJsZSBjbHVzdGVyaW5nIGNvbWJpbmF0aW9ucywgYW5kXG4gICAgLy8gb25jZSB0aGV5J3JlIGdlbmVyYXRlZCB3ZSBjYW4gc29sdmUgZm9yIHRoZSBiZXN0IGNsdXN0ZXJpbmcgZ3JvdXBzXG4gICAgLy8gdmVyeSBxdWlja2x5LlxuICAgIHZhciBjbHVzdGVycyA9IFtdLFxuICAgICAgICBjbHVzdGVyUmlnaHQgPSBiYWNrdHJhY2tNYXRyaXhbMF0ubGVuZ3RoIC0gMTtcblxuICAgIC8vIEJhY2t0cmFjayB0aGUgY2x1c3RlcnMgZnJvbSB0aGUgZHluYW1pYyBwcm9ncmFtbWluZyBtYXRyaXguIFRoaXNcbiAgICAvLyBzdGFydHMgYXQgdGhlIGJvdHRvbS1yaWdodCBjb3JuZXIgb2YgdGhlIG1hdHJpeCAoaWYgdGhlIHRvcC1sZWZ0IGlzIDAsIDApLFxuICAgIC8vIGFuZCBtb3ZlcyB0aGUgY2x1c3RlciB0YXJnZXQgd2l0aCB0aGUgbG9vcC5cbiAgICBmb3IgKHZhciBjbHVzdGVyID0gYmFja3RyYWNrTWF0cml4Lmxlbmd0aCAtIDE7IGNsdXN0ZXIgPj0gMDsgY2x1c3Rlci0tKSB7XG5cbiAgICAgICAgdmFyIGNsdXN0ZXJMZWZ0ID0gYmFja3RyYWNrTWF0cml4W2NsdXN0ZXJdW2NsdXN0ZXJSaWdodF07XG5cbiAgICAgICAgLy8gZmlsbCB0aGUgY2x1c3RlciBmcm9tIHRoZSBzb3J0ZWQgaW5wdXQgYnkgdGFraW5nIGEgc2xpY2Ugb2YgdGhlXG4gICAgICAgIC8vIGFycmF5LiB0aGUgYmFja3RyYWNrIG1hdHJpeCBtYWtlcyB0aGlzIGVhc3kgLSBpdCBzdG9yZXMgdGhlXG4gICAgICAgIC8vIGluZGV4ZXMgd2hlcmUgdGhlIGNsdXN0ZXIgc2hvdWxkIHN0YXJ0IGFuZCBlbmQuXG4gICAgICAgIGNsdXN0ZXJzW2NsdXN0ZXJdID0gc29ydGVkLnNsaWNlKGNsdXN0ZXJMZWZ0LCBjbHVzdGVyUmlnaHQgKyAxKTtcblxuICAgICAgICBpZiAoY2x1c3RlciA+IDApIHtcbiAgICAgICAgICAgIGNsdXN0ZXJSaWdodCA9IGNsdXN0ZXJMZWZ0IC0gMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbHVzdGVycztcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBHaXZlbiBhbiBhcnJheSBvZiB4LCB0aGlzIHdpbGwgZmluZCB0aGUgZXh0ZW50IG9mIHRoZVxuICogeCBhbmQgcmV0dXJuIGFuIGFycmF5IG9mIGJyZWFrcyB0aGF0IGNhbiBiZSB1c2VkXG4gKiB0byBjYXRlZ29yaXplIHRoZSB4IGludG8gYSBudW1iZXIgb2YgY2xhc3Nlcy4gVGhlXG4gKiByZXR1cm5lZCBhcnJheSB3aWxsIGFsd2F5cyBiZSAxIGxvbmdlciB0aGFuIHRoZSBudW1iZXIgb2ZcbiAqIGNsYXNzZXMgYmVjYXVzZSBpdCBpbmNsdWRlcyB0aGUgbWluaW11bSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggYW4gYXJyYXkgb2YgbnVtYmVyIHZhbHVlc1xuICogQHBhcmFtIHtudW1iZXJ9IG5DbGFzc2VzIG51bWJlciBvZiBkZXNpcmVkIGNsYXNzZXNcbiAqIEByZXR1cm5zIHtBcnJheTxudW1iZXI+fSBhcnJheSBvZiBjbGFzcyBicmVhayBwb3NpdGlvbnNcbiAqIEBleGFtcGxlXG4gKiBlcXVhbEludGVydmFsQnJlYWtzKFsxLCAyLCAzLCA0LCA1LCA2XSwgNCk7IC8vID0+IFsxLCAyLjI1LCAzLjUsIDQuNzUsIDZdXG4gKi9cbmZ1bmN0aW9uIGVxdWFsSW50ZXJ2YWxCcmVha3MoeC8qOiBBcnJheTxudW1iZXI+ICovLCBuQ2xhc3Nlcy8qOm51bWJlciovKS8qOiBBcnJheTxudW1iZXI+ICovIHtcblxuICAgIGlmICh4Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgfVxuXG4gICAgdmFyIHRoZU1pbiA9IG1pbih4KTtcbiAgICB2YXIgdGhlTWF4ID0gbWF4KHgpO1xuXG4gICAgLy8gdGhlIGZpcnN0IGJyZWFrIHdpbGwgYWx3YXlzIGJlIHRoZSBtaW5pbXVtIHZhbHVlXG4gICAgLy8gaW4gdGhlIHhzZXRcbiAgICB2YXIgYnJlYWtzID0gW3RoZU1pbl07XG5cbiAgICAvLyBUaGUgc2l6ZSBvZiBlYWNoIGJyZWFrIGlzIHRoZSBmdWxsIHJhbmdlIG9mIHRoZSB4XG4gICAgLy8gZGl2aWRlZCBieSB0aGUgbnVtYmVyIG9mIGNsYXNzZXMgcmVxdWVzdGVkXG4gICAgdmFyIGJyZWFrU2l6ZSA9ICh0aGVNYXggLSB0aGVNaW4pIC8gbkNsYXNzZXM7XG5cbiAgICAvLyBJbiB0aGUgY2FzZSBvZiBuQ2xhc3NlcyA9IDEsIHRoaXMgbG9vcCB3b24ndCBydW5cbiAgICAvLyBhbmQgdGhlIHJldHVybmVkIGJyZWFrcyB3aWxsIGJlIFttaW4sIG1heF1cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IG5DbGFzc2VzOyBpKyspIHtcbiAgICAgICAgYnJlYWtzLnB1c2goYnJlYWtzWzBdICsgYnJlYWtTaXplICogaSk7XG4gICAgfVxuXG4gICAgLy8gdGhlIGxhc3QgYnJlYWsgd2lsbCBhbHdheXMgYmUgdGhlXG4gICAgLy8gbWF4aW11bS5cbiAgICBicmVha3MucHVzaCh0aGVNYXgpO1xuXG4gICAgcmV0dXJuIGJyZWFrcztcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBbU2FtcGxlIGNvdmFyaWFuY2VdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NhbXBsZV9tZWFuX2FuZF9zYW1wbGVDb3ZhcmlhbmNlKSBvZiB0d28gZGF0YXNldHM6XG4gKiBob3cgbXVjaCBkbyB0aGUgdHdvIGRhdGFzZXRzIG1vdmUgdG9nZXRoZXI/XG4gKiB4IGFuZCB5IGFyZSB0d28gZGF0YXNldHMsIHJlcHJlc2VudGVkIGFzIGFycmF5cyBvZiBudW1iZXJzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBhIHNhbXBsZSBvZiB0d28gb3IgbW9yZSBkYXRhIHBvaW50c1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB5IGEgc2FtcGxlIG9mIHR3byBvciBtb3JlIGRhdGEgcG9pbnRzXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBhbmQgeSBkbyBub3QgaGF2ZSBlcXVhbCBsZW5ndGhzXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBvciB5IGhhdmUgbGVuZ3RoIG9mIG9uZSBvciBsZXNzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBzYW1wbGUgY292YXJpYW5jZVxuICogQGV4YW1wbGVcbiAqIHNhbXBsZUNvdmFyaWFuY2UoWzEsIDIsIDMsIDQsIDUsIDZdLCBbNiwgNSwgNCwgMywgMiwgMV0pOyAvLyA9PiAtMy41XG4gKi9cbmZ1bmN0aW9uIHNhbXBsZUNvdmFyaWFuY2UoeCAvKjpBcnJheTxudW1iZXI+Ki8sIHkgLyo6QXJyYXk8bnVtYmVyPiovKS8qOm51bWJlciovIHtcblxuICAgIC8vIFRoZSB0d28gZGF0YXNldHMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aCB3aGljaCBtdXN0IGJlIG1vcmUgdGhhbiAxXG4gICAgaWYgKHgubGVuZ3RoICE9PSB5Lmxlbmd0aCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NhbXBsZUNvdmFyaWFuY2UgcmVxdWlyZXMgc2FtcGxlcyB3aXRoIGVxdWFsIGxlbmd0aHMnKTtcbiAgICB9XG5cbiAgICBpZiAoeC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc2FtcGxlQ292YXJpYW5jZSByZXF1aXJlcyBhdCBsZWFzdCB0d28gZGF0YSBwb2ludHMgaW4gZWFjaCBzYW1wbGUnKTtcbiAgICB9XG5cbiAgICAvLyBkZXRlcm1pbmUgdGhlIG1lYW4gb2YgZWFjaCBkYXRhc2V0IHNvIHRoYXQgd2UgY2FuIGp1ZGdlIGVhY2hcbiAgICAvLyB2YWx1ZSBvZiB0aGUgZGF0YXNldCBmYWlybHkgYXMgdGhlIGRpZmZlcmVuY2UgZnJvbSB0aGUgbWVhbi4gdGhpc1xuICAgIC8vIHdheSwgaWYgb25lIGRhdGFzZXQgaXMgWzEsIDIsIDNdIGFuZCBbMiwgMywgNF0sIHRoZWlyIGNvdmFyaWFuY2VcbiAgICAvLyBkb2VzIG5vdCBzdWZmZXIgYmVjYXVzZSBvZiB0aGUgZGlmZmVyZW5jZSBpbiBhYnNvbHV0ZSB2YWx1ZXNcbiAgICB2YXIgeG1lYW4gPSBtZWFuKHgpLFxuICAgICAgICB5bWVhbiA9IG1lYW4oeSksXG4gICAgICAgIHN1bSA9IDA7XG5cbiAgICAvLyBmb3IgZWFjaCBwYWlyIG9mIHZhbHVlcywgdGhlIGNvdmFyaWFuY2UgaW5jcmVhc2VzIHdoZW4gdGhlaXJcbiAgICAvLyBkaWZmZXJlbmNlIGZyb20gdGhlIG1lYW4gaXMgYXNzb2NpYXRlZCAtIGlmIGJvdGggYXJlIHdlbGwgYWJvdmVcbiAgICAvLyBvciBpZiBib3RoIGFyZSB3ZWxsIGJlbG93XG4gICAgLy8gdGhlIG1lYW4sIHRoZSBjb3ZhcmlhbmNlIGluY3JlYXNlcyBzaWduaWZpY2FudGx5LlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdW0gKz0gKHhbaV0gLSB4bWVhbikgKiAoeVtpXSAtIHltZWFuKTtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGlzIEJlc3NlbHMnIENvcnJlY3Rpb246IGFuIGFkanVzdG1lbnQgbWFkZSB0byBzYW1wbGUgc3RhdGlzdGljc1xuICAgIC8vIHRoYXQgYWxsb3dzIGZvciB0aGUgcmVkdWNlZCBkZWdyZWUgb2YgZnJlZWRvbSBlbnRhaWxlZCBpbiBjYWxjdWxhdGluZ1xuICAgIC8vIHZhbHVlcyBmcm9tIHNhbXBsZXMgcmF0aGVyIHRoYW4gY29tcGxldGUgcG9wdWxhdGlvbnMuXG4gICAgdmFyIGJlc3NlbHNDb3JyZWN0aW9uID0geC5sZW5ndGggLSAxO1xuXG4gICAgLy8gdGhlIGNvdmFyaWFuY2UgaXMgd2VpZ2h0ZWQgYnkgdGhlIGxlbmd0aCBvZiB0aGUgZGF0YXNldHMuXG4gICAgcmV0dXJuIHN1bSAvIGJlc3NlbHNDb3JyZWN0aW9uO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbc2FtcGxlIHZhcmlhbmNlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9WYXJpYW5jZSNTYW1wbGVfdmFyaWFuY2UpXG4gKiBpcyB0aGUgc3VtIG9mIHNxdWFyZWQgZGV2aWF0aW9ucyBmcm9tIHRoZSBtZWFuLiBUaGUgc2FtcGxlIHZhcmlhbmNlXG4gKiBpcyBkaXN0aW5ndWlzaGVkIGZyb20gdGhlIHZhcmlhbmNlIGJ5IHRoZSB1c2FnZSBvZiBbQmVzc2VsJ3MgQ29ycmVjdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmVzc2VsJ3NfY29ycmVjdGlvbik6XG4gKiBpbnN0ZWFkIG9mIGRpdmlkaW5nIHRoZSBzdW0gb2Ygc3F1YXJlZCBkZXZpYXRpb25zIGJ5IHRoZSBsZW5ndGggb2YgdGhlIGlucHV0LFxuICogaXQgaXMgZGl2aWRlZCBieSB0aGUgbGVuZ3RoIG1pbnVzIG9uZS4gVGhpcyBjb3JyZWN0cyB0aGUgYmlhcyBpbiBlc3RpbWF0aW5nXG4gKiBhIHZhbHVlIGZyb20gYSBzZXQgdGhhdCB5b3UgZG9uJ3Qga25vdyBpZiBmdWxsLlxuICpcbiAqIFJlZmVyZW5jZXM6XG4gKiAqIFtXb2xmcmFtIE1hdGhXb3JsZCBvbiBTYW1wbGUgVmFyaWFuY2VdKGh0dHA6Ly9tYXRod29ybGQud29sZnJhbS5jb20vU2FtcGxlVmFyaWFuY2UuaHRtbClcbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHggYSBzYW1wbGUgb2YgdHdvIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB0aGUgbGVuZ3RoIG9mIHggaXMgbGVzcyB0aGFuIDJcbiAqIEByZXR1cm4ge251bWJlcn0gc2FtcGxlIHZhcmlhbmNlXG4gKiBAZXhhbXBsZVxuICogc2FtcGxlVmFyaWFuY2UoWzEsIDIsIDMsIDQsIDVdKTsgLy8gPT4gMi41XG4gKi9cbmZ1bmN0aW9uIHNhbXBsZVZhcmlhbmNlKHggLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuICAgIC8vIFRoZSB2YXJpYW5jZSBvZiBubyBudW1iZXJzIGlzIG51bGxcbiAgICBpZiAoeC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc2FtcGxlVmFyaWFuY2UgcmVxdWlyZXMgYXQgbGVhc3QgdHdvIGRhdGEgcG9pbnRzJyk7XG4gICAgfVxuXG4gICAgdmFyIHN1bVNxdWFyZWREZXZpYXRpb25zVmFsdWUgPSBzdW1OdGhQb3dlckRldmlhdGlvbnMoeCwgMik7XG5cbiAgICAvLyB0aGlzIGlzIEJlc3NlbHMnIENvcnJlY3Rpb246IGFuIGFkanVzdG1lbnQgbWFkZSB0byBzYW1wbGUgc3RhdGlzdGljc1xuICAgIC8vIHRoYXQgYWxsb3dzIGZvciB0aGUgcmVkdWNlZCBkZWdyZWUgb2YgZnJlZWRvbSBlbnRhaWxlZCBpbiBjYWxjdWxhdGluZ1xuICAgIC8vIHZhbHVlcyBmcm9tIHNhbXBsZXMgcmF0aGVyIHRoYW4gY29tcGxldGUgcG9wdWxhdGlvbnMuXG4gICAgdmFyIGJlc3NlbHNDb3JyZWN0aW9uID0geC5sZW5ndGggLSAxO1xuXG4gICAgLy8gRmluZCB0aGUgbWVhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICByZXR1cm4gc3VtU3F1YXJlZERldmlhdGlvbnNWYWx1ZSAvIGJlc3NlbHNDb3JyZWN0aW9uO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbc2FtcGxlIHN0YW5kYXJkIGRldmlhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdGFuZGFyZF9kZXZpYXRpb24jU2FtcGxlX3N0YW5kYXJkX2RldmlhdGlvbilcbiAqIGlzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgc2FtcGxlIHZhcmlhbmNlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBpbnB1dCBhcnJheVxuICogQHJldHVybnMge251bWJlcn0gc2FtcGxlIHN0YW5kYXJkIGRldmlhdGlvblxuICogQGV4YW1wbGVcbiAqIHNhbXBsZVN0YW5kYXJkRGV2aWF0aW9uKFsyLCA0LCA0LCA0LCA1LCA1LCA3LCA5XSkudG9GaXhlZCgyKTtcbiAqIC8vID0+ICcyLjE0J1xuICovXG5mdW5jdGlvbiBzYW1wbGVTdGFuZGFyZERldmlhdGlvbih4Lyo6QXJyYXk8bnVtYmVyPiovKS8qOm51bWJlciovIHtcbiAgICAvLyBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgIHZhciBzYW1wbGVWYXJpYW5jZVggPSBzYW1wbGVWYXJpYW5jZSh4KTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHNhbXBsZVZhcmlhbmNlWCk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFtjb3JyZWxhdGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Db3JyZWxhdGlvbl9hbmRfZGVwZW5kZW5jZSkgaXNcbiAqIGEgbWVhc3VyZSBvZiBob3cgY29ycmVsYXRlZCB0d28gZGF0YXNldHMgYXJlLCBiZXR3ZWVuIC0xIGFuZCAxXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGZpcnN0IGlucHV0XG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHkgc2Vjb25kIGlucHV0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBzYW1wbGUgY29ycmVsYXRpb25cbiAqIEBleGFtcGxlXG4gKiBzYW1wbGVDb3JyZWxhdGlvbihbMSwgMiwgMywgNCwgNSwgNl0sIFsyLCAyLCAzLCA0LCA1LCA2MF0pLnRvRml4ZWQoMik7XG4gKiAvLyA9PiAnMC42OSdcbiAqL1xuZnVuY3Rpb24gc2FtcGxlQ29ycmVsYXRpb24oeC8qOiBBcnJheTxudW1iZXI+ICovLCB5Lyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuICAgIHZhciBjb3YgPSBzYW1wbGVDb3ZhcmlhbmNlKHgsIHkpLFxuICAgICAgICB4c3RkID0gc2FtcGxlU3RhbmRhcmREZXZpYXRpb24oeCksXG4gICAgICAgIHlzdGQgPSBzYW1wbGVTdGFuZGFyZERldmlhdGlvbih5KTtcblxuICAgIHJldHVybiBjb3YgLyB4c3RkIC8geXN0ZDtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBbU2tld25lc3NdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2tld25lc3MpIGlzXG4gKiBhIG1lYXN1cmUgb2YgdGhlIGV4dGVudCB0byB3aGljaCBhIHByb2JhYmlsaXR5IGRpc3RyaWJ1dGlvbiBvZiBhXG4gKiByZWFsLXZhbHVlZCByYW5kb20gdmFyaWFibGUgXCJsZWFuc1wiIHRvIG9uZSBzaWRlIG9mIHRoZSBtZWFuLlxuICogVGhlIHNrZXduZXNzIHZhbHVlIGNhbiBiZSBwb3NpdGl2ZSBvciBuZWdhdGl2ZSwgb3IgZXZlbiB1bmRlZmluZWQuXG4gKlxuICogSW1wbGVtZW50YXRpb24gaXMgYmFzZWQgb24gdGhlIGFkanVzdGVkIEZpc2hlci1QZWFyc29uIHN0YW5kYXJkaXplZFxuICogbW9tZW50IGNvZWZmaWNpZW50LCB3aGljaCBpcyB0aGUgdmVyc2lvbiBmb3VuZCBpbiBFeGNlbCBhbmQgc2V2ZXJhbFxuICogc3RhdGlzdGljYWwgcGFja2FnZXMgaW5jbHVkaW5nIE1pbml0YWIsIFNBUyBhbmQgU1BTUy5cbiAqXG4gKiBAc2luY2UgNC4xLjBcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBhIHNhbXBsZSBvZiAzIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IHNhbXBsZSBza2V3bmVzc1xuICogQHRocm93cyB7RXJyb3J9IGlmIHggaGFzIGxlbmd0aCBsZXNzIHRoYW4gM1xuICogQGV4YW1wbGVcbiAqIHNhbXBsZVNrZXduZXNzKFsyLCA0LCA2LCAzLCAxXSk7IC8vID0+IDAuNTkwMTI4NjU2Mzg0MzY1XG4gKi9cbmZ1bmN0aW9uIHNhbXBsZVNrZXduZXNzKHggLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuXG4gICAgaWYgKHgubGVuZ3RoIDwgMykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NhbXBsZVNrZXduZXNzIHJlcXVpcmVzIGF0IGxlYXN0IHRocmVlIGRhdGEgcG9pbnRzJyk7XG4gICAgfVxuXG4gICAgdmFyIG1lYW5WYWx1ZSA9IG1lYW4oeCk7XG4gICAgdmFyIHRlbXBWYWx1ZTtcbiAgICB2YXIgc3VtU3F1YXJlZERldmlhdGlvbnMgPSAwO1xuICAgIHZhciBzdW1DdWJlZERldmlhdGlvbnMgPSAwO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRlbXBWYWx1ZSA9IHhbaV0gLSBtZWFuVmFsdWU7XG4gICAgICAgIHN1bVNxdWFyZWREZXZpYXRpb25zICs9IHRlbXBWYWx1ZSAqIHRlbXBWYWx1ZTtcbiAgICAgICAgc3VtQ3ViZWREZXZpYXRpb25zICs9IHRlbXBWYWx1ZSAqIHRlbXBWYWx1ZSAqIHRlbXBWYWx1ZTtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGlzIEJlc3NlbHMnIENvcnJlY3Rpb246IGFuIGFkanVzdG1lbnQgbWFkZSB0byBzYW1wbGUgc3RhdGlzdGljc1xuICAgIC8vIHRoYXQgYWxsb3dzIGZvciB0aGUgcmVkdWNlZCBkZWdyZWUgb2YgZnJlZWRvbSBlbnRhaWxlZCBpbiBjYWxjdWxhdGluZ1xuICAgIC8vIHZhbHVlcyBmcm9tIHNhbXBsZXMgcmF0aGVyIHRoYW4gY29tcGxldGUgcG9wdWxhdGlvbnMuXG4gICAgdmFyIGJlc3NlbHNDb3JyZWN0aW9uID0geC5sZW5ndGggLSAxO1xuXG4gICAgLy8gRmluZCB0aGUgbWVhbiB2YWx1ZSBvZiB0aGF0IGxpc3RcbiAgICB2YXIgdGhlU2FtcGxlU3RhbmRhcmREZXZpYXRpb24gPSBNYXRoLnNxcnQoc3VtU3F1YXJlZERldmlhdGlvbnMgLyBiZXNzZWxzQ29ycmVjdGlvbik7XG5cbiAgICB2YXIgbiA9IHgubGVuZ3RoLFxuICAgICAgICBjdWJlZFMgPSBNYXRoLnBvdyh0aGVTYW1wbGVTdGFuZGFyZERldmlhdGlvbiwgMyk7XG5cbiAgICByZXR1cm4gbiAqIHN1bUN1YmVkRGV2aWF0aW9ucyAvICgobiAtIDEpICogKG4gLSAyKSAqIGN1YmVkUyk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogW0t1cnRvc2lzXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0t1cnRvc2lzKSBpc1xuICogYSBtZWFzdXJlIG9mIHRoZSBoZWF2aW5lc3Mgb2YgYSBkaXN0cmlidXRpb24ncyB0YWlscyByZWxhdGl2ZSB0byBpdHNcbiAqIHZhcmlhbmNlLiBUaGUga3VydG9zaXMgdmFsdWUgY2FuIGJlIHBvc2l0aXZlIG9yIG5lZ2F0aXZlLCBvciBldmVuIHVuZGVmaW5lZC5cbiAqXG4gKiBJbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBvbiBGaXNoZXIncyBleGNlc3Mga3VydG9zaXMgZGVmaW5pdGlvbiBhbmQgdXNlc1xuICogdW5iaWFzZWQgbW9tZW50IGVzdGltYXRvcnMuIFRoaXMgaXMgdGhlIHZlcnNpb24gZm91bmQgaW4gRXhjZWwgYW5kIGF2YWlsYWJsZVxuICogaW4gc2V2ZXJhbCBzdGF0aXN0aWNhbCBwYWNrYWdlcywgaW5jbHVkaW5nIFNBUyBhbmQgU2NpUHkuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGEgc2FtcGxlIG9mIDQgb3IgbW9yZSBkYXRhIHBvaW50c1xuICogQHJldHVybnMge251bWJlcn0gc2FtcGxlIGt1cnRvc2lzXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBoYXMgbGVuZ3RoIGxlc3MgdGhhbiA0XG4gKiBAZXhhbXBsZVxuICogc2FtcGxlS3VydG9zaXMoWzEsIDIsIDIsIDMsIDVdKTsgLy8gPT4gMS40NTU1NzY1NTk1NDYzMTIyXG4gKi9cbmZ1bmN0aW9uIHNhbXBsZUt1cnRvc2lzKHggLyo6IEFycmF5PG51bWJlcj4gKi8pLyo6bnVtYmVyKi8ge1xuXG4gICAgdmFyIG4gPSB4Lmxlbmd0aDtcblxuICAgIGlmIChuIDwgNCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NhbXBsZUt1cnRvc2lzIHJlcXVpcmVzIGF0IGxlYXN0IGZvdXIgZGF0YSBwb2ludHMnKTtcbiAgICB9XG5cbiAgICB2YXIgbWVhblZhbHVlID0gbWVhbih4KTtcbiAgICB2YXIgdGVtcFZhbHVlO1xuICAgIHZhciBzZWNvbmRDZW50cmFsTW9tZW50ID0gMDtcbiAgICB2YXIgZm91cnRoQ2VudHJhbE1vbWVudCA9IDA7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB0ZW1wVmFsdWUgPSB4W2ldIC0gbWVhblZhbHVlO1xuICAgICAgICBzZWNvbmRDZW50cmFsTW9tZW50ICs9IHRlbXBWYWx1ZSAqIHRlbXBWYWx1ZTtcbiAgICAgICAgZm91cnRoQ2VudHJhbE1vbWVudCArPSB0ZW1wVmFsdWUgKiB0ZW1wVmFsdWUgKiB0ZW1wVmFsdWUgKiB0ZW1wVmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIChuIC0gMSkgLyAoKG4gLSAyKSAqIChuIC0gMykpICpcbiAgICAgICAgKG4gKiAobiArIDEpICogZm91cnRoQ2VudHJhbE1vbWVudCAvIChzZWNvbmRDZW50cmFsTW9tZW50ICogc2Vjb25kQ2VudHJhbE1vbWVudCkgLSAzICogKG4gLSAxKSk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogSW1wbGVtZW50YXRpb24gb2YgW0hlYXAncyBBbGdvcml0aG1dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hlYXAlMjdzX2FsZ29yaXRobSlcbiAqIGZvciBnZW5lcmF0aW5nIHBlcm11dGF0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50cyBhbnkgdHlwZSBvZiBkYXRhXG4gKiBAcmV0dXJucyB7QXJyYXk8QXJyYXk+fSBhcnJheSBvZiBwZXJtdXRhdGlvbnNcbiAqL1xuZnVuY3Rpb24gcGVybXV0YXRpb25zSGVhcC8qOjogPFQ+ICovKGVsZW1lbnRzIC8qOiBBcnJheTxUPiAqLykvKjogQXJyYXk8QXJyYXk8VD4+ICovIHtcbiAgICB2YXIgaW5kZXhlcyA9IG5ldyBBcnJheShlbGVtZW50cy5sZW5ndGgpO1xuICAgIHZhciBwZXJtdXRhdGlvbnMgPSBbZWxlbWVudHMuc2xpY2UoKV07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGluZGV4ZXNbaV0gPSAwO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7KSB7XG4gICAgICAgIGlmIChpbmRleGVzW2ldIDwgaSkge1xuXG4gICAgICAgICAgICAvLyBBdCBvZGQgaW5kZXhlcywgc3dhcCBmcm9tIGluZGV4ZXNbaV0gaW5zdGVhZFxuICAgICAgICAgICAgLy8gb2YgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheVxuICAgICAgICAgICAgdmFyIHN3YXBGcm9tID0gMDtcbiAgICAgICAgICAgIGlmIChpICUgMiAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN3YXBGcm9tID0gaW5kZXhlc1tpXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gc3dhcCBiZXR3ZWVuIHN3YXBGcm9tIGFuZCBpLCB1c2luZ1xuICAgICAgICAgICAgLy8gYSB0ZW1wb3JhcnkgdmFyaWFibGUgYXMgc3RvcmFnZS5cbiAgICAgICAgICAgIHZhciB0ZW1wID0gZWxlbWVudHNbc3dhcEZyb21dO1xuICAgICAgICAgICAgZWxlbWVudHNbc3dhcEZyb21dID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBlbGVtZW50c1tpXSA9IHRlbXA7XG5cbiAgICAgICAgICAgIHBlcm11dGF0aW9ucy5wdXNoKGVsZW1lbnRzLnNsaWNlKCkpO1xuICAgICAgICAgICAgaW5kZXhlc1tpXSsrO1xuICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4ZXNbaV0gPSAwO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHBlcm11dGF0aW9ucztcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBDb21iaW5hdGlvbnNcbiAqIENvbWJpbmF0aW9ucyBhcmUgdW5pcXVlIHN1YnNldHMgb2YgYSBjb2xsZWN0aW9uIC0gaW4gdGhpcyBjYXNlLCBrIHggZnJvbSBhIGNvbGxlY3Rpb24gYXQgYSB0aW1lLlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ29tYmluYXRpb25cbiAqIEBwYXJhbSB7QXJyYXl9IHggYW55IHR5cGUgb2YgZGF0YVxuICogQHBhcmFtIHtpbnR9IGsgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIGVhY2ggZ3JvdXAgKHdpdGhvdXQgcmVwbGFjZW1lbnQpXG4gKiBAcmV0dXJucyB7QXJyYXk8QXJyYXk+fSBhcnJheSBvZiBwZXJtdXRhdGlvbnNcbiAqIEBleGFtcGxlXG4gKiBjb21iaW5hdGlvbnMoWzEsIDIsIDNdLCAyKTsgLy8gPT4gW1sxLDJdLCBbMSwzXSwgWzIsM11dXG4gKi9cblxuZnVuY3Rpb24gY29tYmluYXRpb25zKFxuICAgIHgvKjogQXJyYXk8YW55PiAqLyxcbiAgICBrLyo6IG51bWJlciAqLykvKjogQXJyYXk8QXJyYXk8YW55Pj4gKi8ge1xuICAgIHZhciBpO1xuICAgIHZhciBzdWJJO1xuICAgIHZhciBjb21iaW5hdGlvbkxpc3QgPSBbXTtcbiAgICB2YXIgc3Vic2V0Q29tYmluYXRpb25zO1xuICAgIHZhciBuZXh0O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGsgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbWJpbmF0aW9uTGlzdC5wdXNoKFt4W2ldXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJzZXRDb21iaW5hdGlvbnMgPSBjb21iaW5hdGlvbnMoeC5zbGljZSggaSArIDEsIHgubGVuZ3RoICksIGsgLSAxKTtcbiAgICAgICAgICAgIGZvciAoc3ViSSA9IDA7IHN1YkkgPCBzdWJzZXRDb21iaW5hdGlvbnMubGVuZ3RoOyBzdWJJKyspIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gc3Vic2V0Q29tYmluYXRpb25zW3N1YkldO1xuICAgICAgICAgICAgICAgIG5leHQudW5zaGlmdCh4W2ldKTtcbiAgICAgICAgICAgICAgICBjb21iaW5hdGlvbkxpc3QucHVzaChuZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29tYmluYXRpb25MaXN0O1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIFtDb21iaW5hdGlvbnNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbWJpbmF0aW9uKSB3aXRoIHJlcGxhY2VtZW50XG4gKiBDb21iaW5hdGlvbnMgYXJlIHVuaXF1ZSBzdWJzZXRzIG9mIGEgY29sbGVjdGlvbiAtIGluIHRoaXMgY2FzZSwgayB4IGZyb20gYSBjb2xsZWN0aW9uIGF0IGEgdGltZS5cbiAqICdXaXRoIHJlcGxhY2VtZW50JyBtZWFucyB0aGF0IGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgY2hvc2VuIG11bHRpcGxlIHRpbWVzLlxuICogVW5saWtlIHBlcm11dGF0aW9uLCBvcmRlciBkb2Vzbid0IG1hdHRlciBmb3IgY29tYmluYXRpb25zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHggYW55IHR5cGUgb2YgZGF0YVxuICogQHBhcmFtIHtpbnR9IGsgdGhlIG51bWJlciBvZiBvYmplY3RzIGluIGVhY2ggZ3JvdXAgKHdpdGhvdXQgcmVwbGFjZW1lbnQpXG4gKiBAcmV0dXJucyB7QXJyYXk8QXJyYXk+fSBhcnJheSBvZiBwZXJtdXRhdGlvbnNcbiAqIEBleGFtcGxlXG4gKiBjb21iaW5hdGlvbnNSZXBsYWNlbWVudChbMSwgMl0sIDIpOyAvLyA9PiBbWzEsIDFdLCBbMSwgMl0sIFsyLCAyXV1cbiAqL1xuZnVuY3Rpb24gY29tYmluYXRpb25zUmVwbGFjZW1lbnQoXG4gICAgeCAvKjogQXJyYXk8YW55PiAqLyxcbiAgICBrIC8qOiBudW1iZXIgKi8pLyo6IEFycmF5PEFycmF5PGFueT4+ICovIHtcblxuICAgIHZhciBjb21iaW5hdGlvbkxpc3QgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoayA9PT0gMSkge1xuICAgICAgICAgICAgLy8gSWYgd2UncmUgcmVxdWVzdGVkIHRvIGZpbmQgb25seSBvbmUgZWxlbWVudCwgd2UgZG9uJ3QgbmVlZFxuICAgICAgICAgICAgLy8gdG8gcmVjdXJzZToganVzdCBwdXNoIGB4W2ldYCBvbnRvIHRoZSBsaXN0IG9mIGNvbWJpbmF0aW9ucy5cbiAgICAgICAgICAgIGNvbWJpbmF0aW9uTGlzdC5wdXNoKFt4W2ldXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHJlY3Vyc2l2ZWx5IGZpbmQgY29tYmluYXRpb25zLCBnaXZlbiBgayAtIDFgLiBOb3RlIHRoYXRcbiAgICAgICAgICAgIC8vIHdlIHJlcXVlc3QgYGsgLSAxYCwgc28gaWYgeW91IHdlcmUgbG9va2luZyBmb3Igaz0zIGNvbWJpbmF0aW9ucywgd2UncmVcbiAgICAgICAgICAgIC8vIHJlcXVlc3Rpbmcgaz0yLiBUaGlzIC0xIGdldHMgcmV2ZXJzZWQgaW4gdGhlIGZvciBsb29wIHJpZ2h0IGFmdGVyIHRoaXNcbiAgICAgICAgICAgIC8vIGNvZGUsIHNpbmNlIHdlIGNvbmNhdGVuYXRlIGB4W2ldYCBvbnRvIHRoZSBzZWxlY3RlZCBjb21iaW5hdGlvbnMsXG4gICAgICAgICAgICAvLyBicmluZ2luZyBga2AgYmFjayB1cCB0byB5b3VyIHJlcXVlc3RlZCBsZXZlbC5cbiAgICAgICAgICAgIC8vIFRoaXMgcmVjdXJzaW9uIG1heSBnbyBtYW55IGxldmVscyBkZWVwLCBzaW5jZSBpdCBvbmx5IHN0b3BzIG9uY2VcbiAgICAgICAgICAgIC8vIGs9MS5cbiAgICAgICAgICAgIHZhciBzdWJzZXRDb21iaW5hdGlvbnMgPSBjb21iaW5hdGlvbnNSZXBsYWNlbWVudChcbiAgICAgICAgICAgICAgICB4LnNsaWNlKGksIHgubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICBrIC0gMSk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3Vic2V0Q29tYmluYXRpb25zLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29tYmluYXRpb25MaXN0LnB1c2goW3hbaV1dXG4gICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc3Vic2V0Q29tYmluYXRpb25zW2pdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29tYmluYXRpb25MaXN0O1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFdoZW4gYWRkaW5nIGEgbmV3IHZhbHVlIHRvIGEgbGlzdCwgb25lIGRvZXMgbm90IGhhdmUgdG8gbmVjZXNzYXJ5XG4gKiByZWNvbXB1dGUgdGhlIG1lYW4gb2YgdGhlIGxpc3QgaW4gbGluZWFyIHRpbWUuIFRoZXkgY2FuIGluc3RlYWQgdXNlXG4gKiB0aGlzIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIG5ldyBtZWFuIGJ5IHByb3ZpZGluZyB0aGUgY3VycmVudCBtZWFuLFxuICogdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgbGlzdCB0aGF0IHByb2R1Y2VkIGl0IGFuZCB0aGUgbmV3XG4gKiB2YWx1ZSB0byBhZGQuXG4gKlxuICogQHNpbmNlIDIuNS4wXG4gKiBAcGFyYW0ge251bWJlcn0gbWVhbiBjdXJyZW50IG1lYW5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuICogQHBhcmFtIHtudW1iZXJ9IG5ld1ZhbHVlIHRoZSBhZGRlZCB2YWx1ZVxuICogQHJldHVybnMge251bWJlcn0gdGhlIG5ldyBtZWFuXG4gKlxuICogQGV4YW1wbGVcbiAqIGFkZFRvTWVhbigxNCwgNSwgNTMpOyAvLyA9PiAyMC41XG4gKi9cbmZ1bmN0aW9uIGFkZFRvTWVhbihtZWFuIC8qOiBudW1iZXIqLywgbi8qOiBudW1iZXIgKi8sIG5ld1ZhbHVlLyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcbiAgICByZXR1cm4gbWVhbiArICgobmV3VmFsdWUgLSBtZWFuKSAvIChuICsgMSkpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFdoZW4gY29tYmluaW5nIHR3byBsaXN0cyBvZiB2YWx1ZXMgZm9yIHdoaWNoIG9uZSBhbHJlYWR5IGtub3dzIHRoZSBtZWFucyxcbiAqIG9uZSBkb2VzIG5vdCBoYXZlIHRvIG5lY2Vzc2FyeSByZWNvbXB1dGUgdGhlIG1lYW4gb2YgdGhlIGNvbWJpbmVkIGxpc3RzIGluXG4gKiBsaW5lYXIgdGltZS4gVGhleSBjYW4gaW5zdGVhZCB1c2UgdGhpcyBmdW5jdGlvbiB0byBjb21wdXRlIHRoZSBjb21iaW5lZFxuICogbWVhbiBieSBwcm92aWRpbmcgdGhlIG1lYW4gJiBudW1iZXIgb2YgdmFsdWVzIG9mIHRoZSBmaXJzdCBsaXN0IGFuZCB0aGUgbWVhblxuICogJiBudW1iZXIgb2YgdmFsdWVzIG9mIHRoZSBzZWNvbmQgbGlzdC5cbiAqXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBwYXJhbSB7bnVtYmVyfSBtZWFuMSBtZWFuIG9mIHRoZSBmaXJzdCBsaXN0XG4gKiBAcGFyYW0ge251bWJlcn0gbjEgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSBmaXJzdCBsaXN0XG4gKiBAcGFyYW0ge251bWJlcn0gbWVhbjIgbWVhbiBvZiB0aGUgc2Vjb25kIGxpc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBuMiBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHNlY29uZCBsaXN0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29tYmluZWQgbWVhblxuICpcbiAqIEBleGFtcGxlXG4gKiBjb21iaW5lTWVhbnMoNSwgMywgNCwgMyk7IC8vID0+IDQuNVxuICovXG5mdW5jdGlvbiBjb21iaW5lTWVhbnMobWVhbjEgLyo6IG51bWJlciovLCBuMS8qOiBudW1iZXIgKi8sIG1lYW4yIC8qOiBudW1iZXIqLywgbjIvKjogbnVtYmVyICovKS8qOiBudW1iZXIgKi8ge1xuICAgIHJldHVybiAobWVhbjEgKiBuMSArIG1lYW4yICogbjIpIC8gKG4xICsgbjIpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFdoZW4gY29tYmluaW5nIHR3byBsaXN0cyBvZiB2YWx1ZXMgZm9yIHdoaWNoIG9uZSBhbHJlYWR5IGtub3dzIHRoZSB2YXJpYW5jZXMsXG4gKiBvbmUgZG9lcyBub3QgaGF2ZSB0byBuZWNlc3NhcnkgcmVjb21wdXRlIHRoZSB2YXJpYW5jZSBvZiB0aGUgY29tYmluZWQgbGlzdHNcbiAqIGluIGxpbmVhciB0aW1lLiBUaGV5IGNhbiBpbnN0ZWFkIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbWJpbmVkXG4gKiB2YXJpYW5jZSBieSBwcm92aWRpbmcgdGhlIHZhcmlhbmNlLCBtZWFuICYgbnVtYmVyIG9mIHZhbHVlcyBvZiB0aGUgZmlyc3QgbGlzdFxuICogYW5kIHRoZSB2YXJpYW5jZSwgbWVhbiAmIG51bWJlciBvZiB2YWx1ZXMgb2YgdGhlIHNlY29uZCBsaXN0LlxuICpcbiAqIEBzaW5jZSAzLjAuMFxuICogQHBhcmFtIHtudW1iZXJ9IHZhcmlhbmNlMSB2YXJpYW5jZSBvZiB0aGUgZmlyc3QgbGlzdFxuICogQHBhcmFtIHtudW1iZXJ9IG1lYW4xIG1lYW4gb2YgdGhlIGZpcnN0IGxpc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBuMSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGZpcnN0IGxpc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YXJpYW5jZTIgdmFyaWFuY2Ugb2YgdGhlIHNlY29uZCBsaXN0XG4gKiBAcGFyYW0ge251bWJlcn0gbWVhbjIgbWVhbiBvZiB0aGUgc2Vjb25kIGxpc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSBuMiBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHNlY29uZCBsaXN0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgY29tYmluZWQgbWVhblxuICpcbiAqIEBleGFtcGxlXG4gKiBjb21iaW5lVmFyaWFuY2VzKDE0IC8gMywgNSwgMywgOCAvIDMsIDQsIDMpOyAvLyA9PiA0NyAvIDEyXG4gKi9cbmZ1bmN0aW9uIGNvbWJpbmVWYXJpYW5jZXMoXG4gICAgdmFyaWFuY2UxIC8qOiBudW1iZXIqLyxcbiAgICBtZWFuMSAvKjogbnVtYmVyKi8sXG4gICAgbjEvKjogbnVtYmVyICovLFxuICAgIHZhcmlhbmNlMiAvKjogbnVtYmVyKi8sXG4gICAgbWVhbjIgLyo6IG51bWJlciovLFxuICAgIG4yLyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcblxuICAgIHZhciBuZXdNZWFuID0gY29tYmluZU1lYW5zKG1lYW4xLCBuMSwgbWVhbjIsIG4yKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIG4xICogKHZhcmlhbmNlMSArIE1hdGgucG93KG1lYW4xIC0gbmV3TWVhbiwgMikpICtcbiAgICAgICAgbjIgKiAodmFyaWFuY2UyICsgTWF0aC5wb3cobWVhbjIgLSBuZXdNZWFuLCAyKSlcbiAgICApIC8gKG4xICsgbjIpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbR2VvbWV0cmljIE1lYW5dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dlb21ldHJpY19tZWFuKSBpc1xuICogYSBtZWFuIGZ1bmN0aW9uIHRoYXQgaXMgbW9yZSB1c2VmdWwgZm9yIG51bWJlcnMgaW4gZGlmZmVyZW50XG4gKiByYW5nZXMuXG4gKlxuICogVGhpcyBpcyB0aGUgbnRoIHJvb3Qgb2YgdGhlIGlucHV0IG51bWJlcnMgbXVsdGlwbGllZCBieSBlYWNoIG90aGVyLlxuICpcbiAqIFRoZSBnZW9tZXRyaWMgbWVhbiBpcyBvZnRlbiB1c2VmdWwgZm9yXG4gKiAqKltwcm9wb3J0aW9uYWwgZ3Jvd3RoXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HZW9tZXRyaWNfbWVhbiNQcm9wb3J0aW9uYWxfZ3Jvd3RoKSoqOiBnaXZlblxuICogZ3Jvd3RoIHJhdGVzIGZvciBtdWx0aXBsZSB5ZWFycywgbGlrZSBfODAlLCAxNi42NiUgYW5kIDQyLjg1JV8sIGEgc2ltcGxlXG4gKiBtZWFuIHdpbGwgaW5jb3JyZWN0bHkgZXN0aW1hdGUgYW4gYXZlcmFnZSBncm93dGggcmF0ZSwgd2hlcmVhcyBhIGdlb21ldHJpY1xuICogbWVhbiB3aWxsIGNvcnJlY3RseSBlc3RpbWF0ZSBhIGdyb3d0aCByYXRlIHRoYXQsIG92ZXIgdGhvc2UgeWVhcnMsXG4gKiB3aWxsIHlpZWxkIHRoZSBzYW1lIGVuZCB2YWx1ZS5cbiAqXG4gKiBUaGlzIHJ1bnMgb24gYE8obilgLCBsaW5lYXIgdGltZSBpbiByZXNwZWN0IHRvIHRoZSBhcnJheVxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGdlb21ldHJpYyBtZWFuXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBpcyBlbXB0eVxuICogQHRocm93cyB7RXJyb3J9IGlmIHggY29udGFpbnMgYSBuZWdhdGl2ZSBudW1iZXJcbiAqIEBleGFtcGxlXG4gKiB2YXIgZ3Jvd3RoUmF0ZXMgPSBbMS44MCwgMS4xNjY2NjYsIDEuNDI4NTcxXTtcbiAqIHZhciBhdmVyYWdlR3Jvd3RoID0gc3MuZ2VvbWV0cmljTWVhbihncm93dGhSYXRlcyk7XG4gKiB2YXIgYXZlcmFnZUdyb3d0aFJhdGVzID0gW2F2ZXJhZ2VHcm93dGgsIGF2ZXJhZ2VHcm93dGgsIGF2ZXJhZ2VHcm93dGhdO1xuICogdmFyIHN0YXJ0aW5nVmFsdWUgPSAxMDtcbiAqIHZhciBzdGFydGluZ1ZhbHVlTWVhbiA9IDEwO1xuICogZ3Jvd3RoUmF0ZXMuZm9yRWFjaChmdW5jdGlvbihyYXRlKSB7XG4gKiAgIHN0YXJ0aW5nVmFsdWUgKj0gcmF0ZTtcbiAqIH0pO1xuICogYXZlcmFnZUdyb3d0aFJhdGVzLmZvckVhY2goZnVuY3Rpb24ocmF0ZSkge1xuICogICBzdGFydGluZ1ZhbHVlTWVhbiAqPSByYXRlO1xuICogfSk7XG4gKiBzdGFydGluZ1ZhbHVlTWVhbiA9PT0gc3RhcnRpbmdWYWx1ZTtcbiAqL1xuZnVuY3Rpb24gZ2VvbWV0cmljTWVhbih4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOiBudW1iZXIgKi8ge1xuICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpY01lYW4gcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGRhdGEgcG9pbnQnKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgc3RhcnRpbmcgdmFsdWUuXG4gICAgdmFyIHZhbHVlID0gMTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyB0aGUgZ2VvbWV0cmljIG1lYW4gaXMgb25seSB2YWxpZCBmb3IgcG9zaXRpdmUgbnVtYmVyc1xuICAgICAgICBpZiAoeFtpXSA8PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2dlb21ldHJpY01lYW4gcmVxdWlyZXMgb25seSBwb3NpdGl2ZSBudW1iZXJzIGFzIGlucHV0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXBlYXRlZGx5IG11bHRpcGx5IHRoZSB2YWx1ZSBieSBlYWNoIG51bWJlclxuICAgICAgICB2YWx1ZSAqPSB4W2ldO1xuICAgIH1cblxuICAgIHJldHVybiBNYXRoLnBvdyh2YWx1ZSwgMSAvIHgubGVuZ3RoKTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgW0hhcm1vbmljIE1lYW5dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhcm1vbmljX21lYW4pIGlzXG4gKiBhIG1lYW4gZnVuY3Rpb24gdHlwaWNhbGx5IHVzZWQgdG8gZmluZCB0aGUgYXZlcmFnZSBvZiByYXRlcy5cbiAqIFRoaXMgbWVhbiBpcyBjYWxjdWxhdGVkIGJ5IHRha2luZyB0aGUgcmVjaXByb2NhbCBvZiB0aGUgYXJpdGhtZXRpYyBtZWFuXG4gKiBvZiB0aGUgcmVjaXByb2NhbHMgb2YgdGhlIGlucHV0IG51bWJlcnMuXG4gKlxuICogVGhpcyBpcyBhIFttZWFzdXJlIG9mIGNlbnRyYWwgdGVuZGVuY3ldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NlbnRyYWxfdGVuZGVuY3kpOlxuICogYSBtZXRob2Qgb2YgZmluZGluZyBhIHR5cGljYWwgb3IgY2VudHJhbCB2YWx1ZSBvZiBhIHNldCBvZiBudW1iZXJzLlxuICpcbiAqIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geCBzYW1wbGUgb2Ygb25lIG9yIG1vcmUgZGF0YSBwb2ludHNcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGhhcm1vbmljIG1lYW5cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiB4IGlzIGVtcHR5XG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBjb250YWlucyBhIG5lZ2F0aXZlIG51bWJlclxuICogQGV4YW1wbGVcbiAqIGhhcm1vbmljTWVhbihbMiwgM10pLnRvRml4ZWQoMikgLy8gPT4gJzIuNDAnXG4gKi9cbmZ1bmN0aW9uIGhhcm1vbmljTWVhbih4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOiBudW1iZXIgKi8ge1xuICAgIC8vIFRoZSBtZWFuIG9mIG5vIG51bWJlcnMgaXMgbnVsbFxuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2hhcm1vbmljTWVhbiByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIHZhciByZWNpcHJvY2FsU3VtID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyB0aGUgaGFybW9uaWMgbWVhbiBpcyBvbmx5IHZhbGlkIGZvciBwb3NpdGl2ZSBudW1iZXJzXG4gICAgICAgIGlmICh4W2ldIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaGFybW9uaWNNZWFuIHJlcXVpcmVzIG9ubHkgcG9zaXRpdmUgbnVtYmVycyBhcyBpbnB1dCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVjaXByb2NhbFN1bSArPSAxIC8geFtpXTtcbiAgICB9XG5cbiAgICAvLyBkaXZpZGUgbiBieSB0aGUgdGhlIHJlY2lwcm9jYWwgc3VtXG4gICAgcmV0dXJuIHgubGVuZ3RoIC8gcmVjaXByb2NhbFN1bTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgW21lZGlhbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NZWRpYW4pIGlzXG4gKiB0aGUgbWlkZGxlIG51bWJlciBvZiBhIGxpc3QuIFRoaXMgaXMgb2Z0ZW4gYSBnb29kIGluZGljYXRvciBvZiAndGhlIG1pZGRsZSdcbiAqIHdoZW4gdGhlcmUgYXJlIG91dGxpZXJzIHRoYXQgc2tldyB0aGUgYG1lYW4oKWAgdmFsdWUuXG4gKiBUaGlzIGlzIGEgW21lYXN1cmUgb2YgY2VudHJhbCB0ZW5kZW5jeV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2VudHJhbF90ZW5kZW5jeSk6XG4gKiBhIG1ldGhvZCBvZiBmaW5kaW5nIGEgdHlwaWNhbCBvciBjZW50cmFsIHZhbHVlIG9mIGEgc2V0IG9mIG51bWJlcnMuXG4gKlxuICogVGhlIG1lZGlhbiBpc24ndCBuZWNlc3NhcmlseSBvbmUgb2YgdGhlIGVsZW1lbnRzIGluIHRoZSBsaXN0OiB0aGUgdmFsdWVcbiAqIGNhbiBiZSB0aGUgYXZlcmFnZSBvZiB0d28gZWxlbWVudHMgaWYgdGhlIGxpc3QgaGFzIGFuIGV2ZW4gbGVuZ3RoXG4gKiBhbmQgdGhlIHR3byBjZW50cmFsIHZhbHVlcyBhcmUgZGlmZmVyZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc29ydGVkIGlucHV0XG4gKiBAcmV0dXJucyB7bnVtYmVyfSBtZWRpYW4gdmFsdWVcbiAqIEBleGFtcGxlXG4gKiBtZWRpYW5Tb3J0ZWQoWzEwLCAyLCA1LCAxMDAsIDIsIDFdKTsgLy8gPT4gNTIuNVxuICovXG5mdW5jdGlvbiBtZWRpYW5Tb3J0ZWQoc29ydGVkIC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcbiAgICByZXR1cm4gcXVhbnRpbGVTb3J0ZWQoc29ydGVkLCAwLjUpO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFdoZW4gcmVtb3ZpbmcgYSB2YWx1ZSBmcm9tIGEgbGlzdCwgb25lIGRvZXMgbm90IGhhdmUgdG8gbmVjZXNzYXJ5XG4gKiByZWNvbXB1dGUgdGhlIG1lYW4gb2YgdGhlIGxpc3QgaW4gbGluZWFyIHRpbWUuIFRoZXkgY2FuIGluc3RlYWQgdXNlXG4gKiB0aGlzIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIG5ldyBtZWFuIGJ5IHByb3ZpZGluZyB0aGUgY3VycmVudCBtZWFuLFxuICogdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgbGlzdCB0aGF0IHByb2R1Y2VkIGl0IGFuZCB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICpcbiAqIEBzaW5jZSAzLjAuMFxuICogQHBhcmFtIHtudW1iZXJ9IG1lYW4gY3VycmVudCBtZWFuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIGxpc3RcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSB0aGUgdmFsdWUgdG8gcmVtb3ZlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgbmV3IG1lYW5cbiAqXG4gKiBAZXhhbXBsZVxuICogc3VidHJhY3RGcm9tTWVhbigyMC41LCA2LCA1Myk7IC8vID0+IDE0XG4gKi9cbmZ1bmN0aW9uIHN1YnRyYWN0RnJvbU1lYW4obWVhbiAvKjogbnVtYmVyKi8sIG4vKjogbnVtYmVyICovLCB2YWx1ZS8qOiBudW1iZXIgKi8pLyo6IG51bWJlciAqLyB7XG4gICAgcmV0dXJuICgobWVhbiAqIG4pIC0gdmFsdWUpIC8gKG4gLSAxKTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgUm9vdCBNZWFuIFNxdWFyZSAoUk1TKSBpc1xuICogYSBtZWFuIGZ1bmN0aW9uIHVzZWQgYXMgYSBtZWFzdXJlIG9mIHRoZSBtYWduaXR1ZGUgb2YgYSBzZXRcbiAqIG9mIG51bWJlcnMsIHJlZ2FyZGxlc3Mgb2YgdGhlaXIgc2lnbi5cbiAqIFRoaXMgaXMgdGhlIHNxdWFyZSByb290IG9mIHRoZSBtZWFuIG9mIHRoZSBzcXVhcmVzIG9mIHRoZVxuICogaW5wdXQgbnVtYmVycy5cbiAqIFRoaXMgcnVucyBvbiBgTyhuKWAsIGxpbmVhciB0aW1lIGluIHJlc3BlY3QgdG8gdGhlIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IGEgc2FtcGxlIG9mIG9uZSBvciBtb3JlIGRhdGEgcG9pbnRzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSByb290IG1lYW4gc3F1YXJlXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgeCBpcyBlbXB0eVxuICogQGV4YW1wbGVcbiAqIHJvb3RNZWFuU3F1YXJlKFstMSwgMSwgLTEsIDFdKTsgLy8gPT4gMVxuICovXG5mdW5jdGlvbiByb290TWVhblNxdWFyZSh4IC8qOiBBcnJheTxudW1iZXI+ICovKS8qOm51bWJlciovIHtcbiAgICBpZiAoeC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyb290TWVhblNxdWFyZSByZXF1aXJlcyBhdCBsZWFzdCBvbmUgZGF0YSBwb2ludCcpO1xuICAgIH1cblxuICAgIHZhciBzdW1PZlNxdWFyZXMgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgeC5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdW1PZlNxdWFyZXMgKz0gTWF0aC5wb3coeFtpXSwgMik7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGguc3FydChzdW1PZlNxdWFyZXMgLyB4Lmxlbmd0aCk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhpcyBpcyB0byBjb21wdXRlIFthIG9uZS1zYW1wbGUgdC10ZXN0XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHVkZW50JTI3c190LXRlc3QjT25lLXNhbXBsZV90LXRlc3QpLCBjb21wYXJpbmcgdGhlIG1lYW5cbiAqIG9mIGEgc2FtcGxlIHRvIGEga25vd24gdmFsdWUsIHguXG4gKlxuICogaW4gdGhpcyBjYXNlLCB3ZSdyZSB0cnlpbmcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlXG4gKiBwb3B1bGF0aW9uIG1lYW4gaXMgZXF1YWwgdG8gdGhlIHZhbHVlIHRoYXQgd2Uga25vdywgd2hpY2ggaXMgYHhgXG4gKiBoZXJlLiB1c3VhbGx5IHRoZSByZXN1bHRzIGhlcmUgYXJlIHVzZWQgdG8gbG9vayB1cCBhXG4gKiBbcC12YWx1ZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QLXZhbHVlKSwgd2hpY2gsIGZvclxuICogYSBjZXJ0YWluIGxldmVsIG9mIHNpZ25pZmljYW5jZSwgd2lsbCBsZXQgeW91IGRldGVybWluZSB0aGF0IHRoZVxuICogbnVsbCBoeXBvdGhlc2lzIGNhbiBvciBjYW5ub3QgYmUgcmVqZWN0ZWQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4IHNhbXBsZSBvZiBvbmUgb3IgbW9yZSBudW1iZXJzXG4gKiBAcGFyYW0ge251bWJlcn0gZXhwZWN0ZWRWYWx1ZSBleHBlY3RlZCB2YWx1ZSBvZiB0aGUgcG9wdWxhdGlvbiBtZWFuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSB2YWx1ZVxuICogQGV4YW1wbGVcbiAqIHRUZXN0KFsxLCAyLCAzLCA0LCA1LCA2XSwgMy4zODUpLnRvRml4ZWQoMik7IC8vID0+ICcwLjE2J1xuICovXG5mdW5jdGlvbiB0VGVzdCh4Lyo6IEFycmF5PG51bWJlcj4gKi8sIGV4cGVjdGVkVmFsdWUvKjogbnVtYmVyICovKS8qOm51bWJlciovIHtcbiAgICAvLyBUaGUgbWVhbiBvZiB0aGUgc2FtcGxlXG4gICAgdmFyIHNhbXBsZU1lYW4gPSBtZWFuKHgpO1xuXG4gICAgLy8gVGhlIHN0YW5kYXJkIGRldmlhdGlvbiBvZiB0aGUgc2FtcGxlXG4gICAgdmFyIHNkID0gc3RhbmRhcmREZXZpYXRpb24oeCk7XG5cbiAgICAvLyBTcXVhcmUgcm9vdCB0aGUgbGVuZ3RoIG9mIHRoZSBzYW1wbGVcbiAgICB2YXIgcm9vdE4gPSBNYXRoLnNxcnQoeC5sZW5ndGgpO1xuXG4gICAgLy8gcmV0dXJuaW5nIHRoZSB0IHZhbHVlXG4gICAgcmV0dXJuIChzYW1wbGVNZWFuIC0gZXhwZWN0ZWRWYWx1ZSkgLyAoc2QgLyByb290Tik7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhpcyBpcyB0byBjb21wdXRlIFt0d28gc2FtcGxlIHQtdGVzdF0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TdHVkZW50J3NfdC10ZXN0KS5cbiAqIFRlc3RzIHdoZXRoZXIgXCJtZWFuKFgpLW1lYW4oWSkgPSBkaWZmZXJlbmNlXCIsIChcbiAqIGluIHRoZSBtb3N0IGNvbW1vbiBjYXNlLCB3ZSBvZnRlbiBoYXZlIGBkaWZmZXJlbmNlID09IDBgIHRvIHRlc3QgaWYgdHdvIHNhbXBsZXNcbiAqIGFyZSBsaWtlbHkgdG8gYmUgdGFrZW4gZnJvbSBwb3B1bGF0aW9ucyB3aXRoIHRoZSBzYW1lIG1lYW4gdmFsdWUpIHdpdGhcbiAqIG5vIHByaW9yIGtub3dsZWRnZSBvbiBzdGFuZGFyZCBkZXZpYXRpb25zIG9mIGJvdGggc2FtcGxlc1xuICogb3RoZXIgdGhhbiB0aGUgZmFjdCB0aGF0IHRoZXkgaGF2ZSB0aGUgc2FtZSBzdGFuZGFyZCBkZXZpYXRpb24uXG4gKlxuICogVXN1YWxseSB0aGUgcmVzdWx0cyBoZXJlIGFyZSB1c2VkIHRvIGxvb2sgdXAgYVxuICogW3AtdmFsdWVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUC12YWx1ZSksIHdoaWNoLCBmb3JcbiAqIGEgY2VydGFpbiBsZXZlbCBvZiBzaWduaWZpY2FuY2UsIHdpbGwgbGV0IHlvdSBkZXRlcm1pbmUgdGhhdCB0aGVcbiAqIG51bGwgaHlwb3RoZXNpcyBjYW4gb3IgY2Fubm90IGJlIHJlamVjdGVkLlxuICpcbiAqIGBkaWZmYCBjYW4gYmUgb21pdHRlZCBpZiBpdCBlcXVhbHMgMC5cbiAqXG4gKiBbVGhpcyBpcyB1c2VkIHRvIGNvbmZpcm0gb3IgZGVueV0oaHR0cDovL3d3dy5tb25hcmNobGFiLm9yZy9MYWIvUmVzZWFyY2gvU3RhdHMvMlNhbXBsZVQuYXNweClcbiAqIGEgbnVsbCBoeXBvdGhlc2lzIHRoYXQgdGhlIHR3byBwb3B1bGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzYW1wbGVkIGludG9cbiAqIGBzYW1wbGVYYCBhbmQgYHNhbXBsZVlgIGFyZSBlcXVhbCB0byBlYWNoIG90aGVyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2FtcGxlWCBhIHNhbXBsZSBhcyBhbiBhcnJheSBvZiBudW1iZXJzXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNhbXBsZVkgYSBzYW1wbGUgYXMgYW4gYXJyYXkgb2YgbnVtYmVyc1xuICogQHBhcmFtIHtudW1iZXJ9IFtkaWZmZXJlbmNlPTBdXG4gKiBAcmV0dXJucyB7bnVtYmVyfG51bGx9IHRlc3QgcmVzdWx0XG4gKlxuICogQGV4YW1wbGVcbiAqIHRUZXN0VHdvU2FtcGxlKFsxLCAyLCAzLCA0XSwgWzMsIDQsIDUsIDZdLCAwKTsgLy8gPT4gLTIuMTkwODkwMjMwMDIwNjY0M1xuICovXG5mdW5jdGlvbiB0VGVzdFR3b1NhbXBsZShcbiAgICBzYW1wbGVYLyo6IEFycmF5PG51bWJlcj4gKi8sXG4gICAgc2FtcGxlWS8qOiBBcnJheTxudW1iZXI+ICovLFxuICAgIGRpZmZlcmVuY2UvKjogP251bWJlciAqLykvKjogP251bWJlciAqLyB7XG4gICAgdmFyIG4gPSBzYW1wbGVYLmxlbmd0aCxcbiAgICAgICAgbSA9IHNhbXBsZVkubGVuZ3RoO1xuXG4gICAgLy8gSWYgZWl0aGVyIHNhbXBsZSBkb2Vzbid0IGFjdHVhbGx5IGhhdmUgYW55IHZhbHVlcywgd2UgY2FuJ3RcbiAgICAvLyBjb21wdXRlIHRoaXMgYXQgYWxsLCBzbyB3ZSByZXR1cm4gYG51bGxgLlxuICAgIGlmICghbiB8fCAhbSkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgLy8gZGVmYXVsdCBkaWZmZXJlbmNlIChtdSkgaXMgemVyb1xuICAgIGlmICghZGlmZmVyZW5jZSkge1xuICAgICAgICBkaWZmZXJlbmNlID0gMDtcbiAgICB9XG5cbiAgICB2YXIgbWVhblggPSBtZWFuKHNhbXBsZVgpLFxuICAgICAgICBtZWFuWSA9IG1lYW4oc2FtcGxlWSksXG4gICAgICAgIHNhbXBsZVZhcmlhbmNlWCA9IHNhbXBsZVZhcmlhbmNlKHNhbXBsZVgpLFxuICAgICAgICBzYW1wbGVWYXJpYW5jZVkgPSBzYW1wbGVWYXJpYW5jZShzYW1wbGVZKTtcblxuICAgIGlmICh0eXBlb2YgbWVhblggPT09ICdudW1iZXInICYmXG4gICAgICAgIHR5cGVvZiBtZWFuWSA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgdHlwZW9mIHNhbXBsZVZhcmlhbmNlWCA9PT0gJ251bWJlcicgJiZcbiAgICAgICAgdHlwZW9mIHNhbXBsZVZhcmlhbmNlWSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIHdlaWdodGVkVmFyaWFuY2UgPSAoKG4gLSAxKSAqIHNhbXBsZVZhcmlhbmNlWCArXG4gICAgICAgICAgICAobSAtIDEpICogc2FtcGxlVmFyaWFuY2VZKSAvIChuICsgbSAtIDIpO1xuXG4gICAgICAgIHJldHVybiAobWVhblggLSBtZWFuWSAtIGRpZmZlcmVuY2UpIC9cbiAgICAgICAgICAgIE1hdGguc3FydCh3ZWlnaHRlZFZhcmlhbmNlICogKDEgLyBuICsgMSAvIG0pKTtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogW0JheWVzaWFuIENsYXNzaWZpZXJdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTmFpdmVfQmF5ZXNfY2xhc3NpZmllcilcbiAqXG4gKiBUaGlzIGlzIGEgbmHDr3ZlIGJheWVzaWFuIGNsYXNzaWZpZXIgdGhhdCB0YWtlc1xuICogc2luZ2x5LW5lc3RlZCBvYmplY3RzLlxuICpcbiAqIEBjbGFzc1xuICogQGV4YW1wbGVcbiAqIHZhciBiYXllcyA9IG5ldyBCYXllc2lhbkNsYXNzaWZpZXIoKTtcbiAqIGJheWVzLnRyYWluKHtcbiAqICAgc3BlY2llczogJ0NhdCdcbiAqIH0sICdhbmltYWwnKTtcbiAqIHZhciByZXN1bHQgPSBiYXllcy5zY29yZSh7XG4gKiAgIHNwZWNpZXM6ICdDYXQnXG4gKiB9KVxuICogLy8gcmVzdWx0XG4gKiAvLyB7XG4gKiAvLyAgIGFuaW1hbDogMVxuICogLy8gfVxuICovXG5mdW5jdGlvbiBCYXllc2lhbkNsYXNzaWZpZXIoKSB7XG4gICAgLy8gVGhlIG51bWJlciBvZiBpdGVtcyB0aGF0IGFyZSBjdXJyZW50bHlcbiAgICAvLyBjbGFzc2lmaWVkIGluIHRoZSBtb2RlbFxuICAgIHRoaXMudG90YWxDb3VudCA9IDA7XG4gICAgLy8gRXZlcnkgaXRlbSBjbGFzc2lmaWVkIGluIHRoZSBtb2RlbFxuICAgIHRoaXMuZGF0YSA9IHt9O1xufVxuXG4vKipcbiAqIFRyYWluIHRoZSBjbGFzc2lmaWVyIHdpdGggYSBuZXcgaXRlbSwgd2hpY2ggaGFzIGEgc2luZ2xlXG4gKiBkaW1lbnNpb24gb2YgSmF2YXNjcmlwdCBsaXRlcmFsIGtleXMgYW5kIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaXRlbSBhbiBvYmplY3Qgd2l0aCBzaW5nbHktZGVlcCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnkgdGhlIGNhdGVnb3J5IHRoaXMgaXRlbSBiZWxvbmdzIHRvXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9IGFkZHMgdGhlIGl0ZW0gdG8gdGhlIGNsYXNzaWZpZXJcbiAqL1xuQmF5ZXNpYW5DbGFzc2lmaWVyLnByb3RvdHlwZS50cmFpbiA9IGZ1bmN0aW9uKGl0ZW0sIGNhdGVnb3J5KSB7XG4gICAgLy8gSWYgdGhlIGRhdGEgb2JqZWN0IGRvZXNuJ3QgaGF2ZSBhbnkgdmFsdWVzXG4gICAgLy8gZm9yIHRoaXMgY2F0ZWdvcnksIGNyZWF0ZSBhIG5ldyBvYmplY3QgZm9yIGl0LlxuICAgIGlmICghdGhpcy5kYXRhW2NhdGVnb3J5XSkge1xuICAgICAgICB0aGlzLmRhdGFbY2F0ZWdvcnldID0ge307XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGVhY2gga2V5IGluIHRoZSBpdGVtLlxuICAgIGZvciAodmFyIGsgaW4gaXRlbSkge1xuICAgICAgICB2YXIgdiA9IGl0ZW1ba107XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIG5lc3RlZCBvYmplY3QgYGRhdGFbY2F0ZWdvcnldW2tdW2l0ZW1ba11dYFxuICAgICAgICAvLyB3aXRoIGFuIG9iamVjdCBvZiBrZXlzIHRoYXQgZXF1YWwgMC5cbiAgICAgICAgaWYgKHRoaXMuZGF0YVtjYXRlZ29yeV1ba10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2NhdGVnb3J5XVtrXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGFbY2F0ZWdvcnldW2tdW3ZdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVtjYXRlZ29yeV1ba11bdl0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQW5kIGluY3JlbWVudCB0aGUga2V5IGZvciB0aGlzIGtleS92YWx1ZSBjb21iaW5hdGlvbi5cbiAgICAgICAgdGhpcy5kYXRhW2NhdGVnb3J5XVtrXVt2XSsrO1xuICAgIH1cblxuICAgIC8vIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGl0ZW1zIGNsYXNzaWZpZWRcbiAgICB0aGlzLnRvdGFsQ291bnQrKztcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgYSBzY29yZSBvZiBob3cgd2VsbCB0aGlzIGl0ZW0gbWF0Y2hlcyBhbGxcbiAqIHBvc3NpYmxlIGNhdGVnb3JpZXMgYmFzZWQgb24gaXRzIGF0dHJpYnV0ZXNcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaXRlbSBhbiBpdGVtIGluIHRoZSBzYW1lIGZvcm1hdCBhcyB3aXRoIHRyYWluXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBvZiBwcm9iYWJpbGl0aWVzIHRoYXQgdGhpcyBpdGVtIGJlbG9uZ3MgdG8gYVxuICogZ2l2ZW4gY2F0ZWdvcnkuXG4gKi9cbkJheWVzaWFuQ2xhc3NpZmllci5wcm90b3R5cGUuc2NvcmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgLy8gSW5pdGlhbGl6ZSBhbiBlbXB0eSBhcnJheSBvZiBvZGRzIHBlciBjYXRlZ29yeS5cbiAgICB2YXIgb2RkcyA9IHt9LCBjYXRlZ29yeTtcbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggZWFjaCBrZXkgaW4gdGhlIGl0ZW0sXG4gICAgLy8gdGhlbiBpdGVyYXRlIHRocm91Z2ggZWFjaCBjYXRlZ29yeSB0aGF0IGhhcyBiZWVuIHVzZWRcbiAgICAvLyBpbiBwcmV2aW91cyBjYWxscyB0byBgLnRyYWluKClgXG4gICAgZm9yICh2YXIgayBpbiBpdGVtKSB7XG4gICAgICAgIHZhciB2ID0gaXRlbVtrXTtcbiAgICAgICAgZm9yIChjYXRlZ29yeSBpbiB0aGlzLmRhdGEpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhbiBlbXB0eSBvYmplY3QgZm9yIHN0b3Jpbmcga2V5IC0gdmFsdWUgY29tYmluYXRpb25zXG4gICAgICAgICAgICAvLyBmb3IgdGhpcyBjYXRlZ29yeS5cbiAgICAgICAgICAgIG9kZHNbY2F0ZWdvcnldID0ge307XG5cbiAgICAgICAgICAgIC8vIElmIHRoaXMgaXRlbSBkb2Vzbid0IGV2ZW4gaGF2ZSBhIHByb3BlcnR5LCBpdCBjb3VudHMgZm9yIG5vdGhpbmcsXG4gICAgICAgICAgICAvLyBidXQgaWYgaXQgZG9lcyBoYXZlIHRoZSBwcm9wZXJ0eSB0aGF0IHdlJ3JlIGxvb2tpbmcgZm9yIGZyb21cbiAgICAgICAgICAgIC8vIHRoZSBpdGVtIHRvIGNhdGVnb3JpemUsIGl0IGNvdW50cyBiYXNlZCBvbiBob3cgcG9wdWxhciBpdCBpc1xuICAgICAgICAgICAgLy8gdmVyc3VzIHRoZSB3aG9sZSBwb3B1bGF0aW9uLlxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtjYXRlZ29yeV1ba10pIHtcbiAgICAgICAgICAgICAgICBvZGRzW2NhdGVnb3J5XVtrICsgJ18nICsgdl0gPSAodGhpcy5kYXRhW2NhdGVnb3J5XVtrXVt2XSB8fCAwKSAvIHRoaXMudG90YWxDb3VudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb2Rkc1tjYXRlZ29yeV1bayArICdfJyArIHZdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB1cCBhIG5ldyBvYmplY3QgdGhhdCB3aWxsIGNvbnRhaW4gc3VtcyBvZiB0aGVzZSBvZGRzIGJ5IGNhdGVnb3J5XG4gICAgdmFyIG9kZHNTdW1zID0ge307XG5cbiAgICBmb3IgKGNhdGVnb3J5IGluIG9kZHMpIHtcbiAgICAgICAgLy8gVGFsbHkgYWxsIG9mIHRoZSBvZGRzIGZvciBlYWNoIGNhdGVnb3J5LWNvbWJpbmF0aW9uIHBhaXIgLVxuICAgICAgICAvLyB0aGUgbm9uLWV4aXN0ZW5jZSBvZiBhIGNhdGVnb3J5IGRvZXMgbm90IGFkZCBhbnl0aGluZyB0byB0aGVcbiAgICAgICAgLy8gc2NvcmUuXG4gICAgICAgIG9kZHNTdW1zW2NhdGVnb3J5XSA9IDA7XG4gICAgICAgIGZvciAodmFyIGNvbWJpbmF0aW9uIGluIG9kZHNbY2F0ZWdvcnldKSB7XG4gICAgICAgICAgICBvZGRzU3Vtc1tjYXRlZ29yeV0gKz0gb2Rkc1tjYXRlZ29yeV1bY29tYmluYXRpb25dO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9kZHNTdW1zO1xufTtcblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGlzIGlzIGEgc2luZ2xlLWxheWVyIFtQZXJjZXB0cm9uIENsYXNzaWZpZXJdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGVyY2VwdHJvbikgdGhhdCB0YWtlc1xuICogYXJyYXlzIG9mIG51bWJlcnMgYW5kIHByZWRpY3RzIHdoZXRoZXIgdGhleSBzaG91bGQgYmUgY2xhc3NpZmllZFxuICogYXMgZWl0aGVyIDAgb3IgMSAobmVnYXRpdmUgb3IgcG9zaXRpdmUgZXhhbXBsZXMpLlxuICogQGNsYXNzXG4gKiBAZXhhbXBsZVxuICogLy8gQ3JlYXRlIHRoZSBtb2RlbFxuICogdmFyIHAgPSBuZXcgUGVyY2VwdHJvbk1vZGVsKCk7XG4gKiAvLyBUcmFpbiB0aGUgbW9kZWwgd2l0aCBpbnB1dCB3aXRoIGEgZGlhZ29uYWwgYm91bmRhcnkuXG4gKiBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICogICAgIHAudHJhaW4oWzEsIDFdLCAxKTtcbiAqICAgICBwLnRyYWluKFswLCAxXSwgMCk7XG4gKiAgICAgcC50cmFpbihbMSwgMF0sIDApO1xuICogICAgIHAudHJhaW4oWzAsIDBdLCAwKTtcbiAqIH1cbiAqIHAucHJlZGljdChbMCwgMF0pOyAvLyAwXG4gKiBwLnByZWRpY3QoWzAsIDFdKTsgLy8gMFxuICogcC5wcmVkaWN0KFsxLCAwXSk7IC8vIDBcbiAqIHAucHJlZGljdChbMSwgMV0pOyAvLyAxXG4gKi9cbmZ1bmN0aW9uIFBlcmNlcHRyb25Nb2RlbCgpIHtcbiAgICAvLyBUaGUgd2VpZ2h0cywgb3IgY29lZmZpY2llbnRzIG9mIHRoZSBtb2RlbDtcbiAgICAvLyB3ZWlnaHRzIGFyZSBvbmx5IHBvcHVsYXRlZCB3aGVuIHRyYWluaW5nIHdpdGggZGF0YS5cbiAgICB0aGlzLndlaWdodHMgPSBbXTtcbiAgICAvLyBUaGUgYmlhcyB0ZXJtLCBvciBpbnRlcmNlcHQ7IGl0IGlzIGFsc28gYSB3ZWlnaHQgYnV0XG4gICAgLy8gaXQncyBzdG9yZWQgc2VwYXJhdGVseSBmb3IgY29udmVuaWVuY2UgYXMgaXQgaXMgYWx3YXlzXG4gICAgLy8gbXVsdGlwbGllZCBieSBvbmUuXG4gICAgdGhpcy5iaWFzID0gMDtcbn1cblxuLyoqXG4gKiAqKlByZWRpY3QqKjogVXNlIGFuIGFycmF5IG9mIGZlYXR1cmVzIHdpdGggdGhlIHdlaWdodCBhcnJheSBhbmQgYmlhc1xuICogdG8gcHJlZGljdCB3aGV0aGVyIGFuIGV4YW1wbGUgaXMgbGFiZWxlZCAwIG9yIDEuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmZWF0dXJlcyBhbiBhcnJheSBvZiBmZWF0dXJlcyBhcyBudW1iZXJzXG4gKiBAcmV0dXJucyB7bnVtYmVyfSAxIGlmIHRoZSBzY29yZSBpcyBvdmVyIDAsIG90aGVyd2lzZSAwXG4gKi9cblBlcmNlcHRyb25Nb2RlbC5wcm90b3R5cGUucHJlZGljdCA9IGZ1bmN0aW9uKGZlYXR1cmVzKSB7XG5cbiAgICAvLyBPbmx5IHByZWRpY3QgaWYgcHJldmlvdXNseSB0cmFpbmVkXG4gICAgLy8gb24gdGhlIHNhbWUgc2l6ZSBmZWF0dXJlIGFycmF5KHMpLlxuICAgIGlmIChmZWF0dXJlcy5sZW5ndGggIT09IHRoaXMud2VpZ2h0cy5sZW5ndGgpIHsgcmV0dXJuIG51bGw7IH1cblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgc3VtIG9mIGZlYXR1cmVzIHRpbWVzIHdlaWdodHMsXG4gICAgLy8gd2l0aCB0aGUgYmlhcyBhZGRlZCAoaW1wbGljaXRseSB0aW1lcyBvbmUpLlxuICAgIHZhciBzY29yZSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLndlaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2NvcmUgKz0gdGhpcy53ZWlnaHRzW2ldICogZmVhdHVyZXNbaV07XG4gICAgfVxuICAgIHNjb3JlICs9IHRoaXMuYmlhcztcblxuICAgIC8vIENsYXNzaWZ5IGFzIDEgaWYgdGhlIHNjb3JlIGlzIG92ZXIgMCwgb3RoZXJ3aXNlIDAuXG4gICAgaWYgKHNjb3JlID4gMCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqICoqVHJhaW4qKiB0aGUgY2xhc3NpZmllciB3aXRoIGEgbmV3IGV4YW1wbGUsIHdoaWNoIGlzXG4gKiBhIG51bWVyaWMgYXJyYXkgb2YgZmVhdHVyZXMgYW5kIGEgMCBvciAxIGxhYmVsLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmVhdHVyZXMgYW4gYXJyYXkgb2YgZmVhdHVyZXMgYXMgbnVtYmVyc1xuICogQHBhcmFtIHtudW1iZXJ9IGxhYmVsIGVpdGhlciAwIG9yIDFcbiAqIEByZXR1cm5zIHtQZXJjZXB0cm9uTW9kZWx9IHRoaXNcbiAqL1xuUGVyY2VwdHJvbk1vZGVsLnByb3RvdHlwZS50cmFpbiA9IGZ1bmN0aW9uKGZlYXR1cmVzLCBsYWJlbCkge1xuICAgIC8vIFJlcXVpcmUgdGhhdCBvbmx5IGxhYmVscyBvZiAwIG9yIDEgYXJlIGNvbnNpZGVyZWQuXG4gICAgaWYgKGxhYmVsICE9PSAwICYmIGxhYmVsICE9PSAxKSB7IHJldHVybiBudWxsOyB9XG4gICAgLy8gVGhlIGxlbmd0aCBvZiB0aGUgZmVhdHVyZSBhcnJheSBkZXRlcm1pbmVzXG4gICAgLy8gdGhlIGxlbmd0aCBvZiB0aGUgd2VpZ2h0IGFycmF5LlxuICAgIC8vIFRoZSBwZXJjZXB0cm9uIHdpbGwgY29udGludWUgbGVhcm5pbmcgYXMgbG9uZyBhc1xuICAgIC8vIGl0IGtlZXBzIHNlZWluZyBmZWF0dXJlIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGguXG4gICAgLy8gV2hlbiBpdCBzZWVzIGEgbmV3IGRhdGEgc2hhcGUsIGl0IGluaXRpYWxpemVzLlxuICAgIGlmIChmZWF0dXJlcy5sZW5ndGggIT09IHRoaXMud2VpZ2h0cy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy53ZWlnaHRzID0gZmVhdHVyZXM7XG4gICAgICAgIHRoaXMuYmlhcyA9IDE7XG4gICAgfVxuICAgIC8vIE1ha2UgYSBwcmVkaWN0aW9uIGJhc2VkIG9uIGN1cnJlbnQgd2VpZ2h0cy5cbiAgICB2YXIgcHJlZGljdGlvbiA9IHRoaXMucHJlZGljdChmZWF0dXJlcyk7XG4gICAgLy8gVXBkYXRlIHRoZSB3ZWlnaHRzIGlmIHRoZSBwcmVkaWN0aW9uIGlzIHdyb25nLlxuICAgIGlmIChwcmVkaWN0aW9uICE9PSBsYWJlbCkge1xuICAgICAgICB2YXIgZ3JhZGllbnQgPSBsYWJlbCAtIHByZWRpY3Rpb247XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy53ZWlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLndlaWdodHNbaV0gKz0gZ3JhZGllbnQgKiBmZWF0dXJlc1tpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpYXMgKz0gZ3JhZGllbnQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBXZSB1c2UgYM61YCwgZXBzaWxvbiwgYXMgYSBzdG9wcGluZyBjcml0ZXJpb24gd2hlbiB3ZSB3YW50IHRvIGl0ZXJhdGVcbiAqIHVudGlsIHdlJ3JlIFwiY2xvc2UgZW5vdWdoXCIuIEVwc2lsb24gaXMgYSB2ZXJ5IHNtYWxsIG51bWJlcjogZm9yXG4gKiBzaW1wbGUgc3RhdGlzdGljcywgdGhhdCBudW1iZXIgaXMgKiowLjAwMDEqKlxuICpcbiAqIFRoaXMgaXMgdXNlZCBpbiBjYWxjdWxhdGlvbnMgbGlrZSB0aGUgYmlub21pYWxEaXN0cmlidXRpb24sIGluIHdoaWNoXG4gKiB0aGUgcHJvY2VzcyBvZiBmaW5kaW5nIGEgdmFsdWUgaXMgW2l0ZXJhdGl2ZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSXRlcmF0aXZlX21ldGhvZCk6XG4gKiBpdCBwcm9ncmVzc2VzIHVudGlsIGl0IGlzIGNsb3NlIGVub3VnaC5cbiAqXG4gKiBCZWxvdyBpcyBhbiBleGFtcGxlIG9mIHVzaW5nIGVwc2lsb24gaW4gW2dyYWRpZW50IGRlc2NlbnRdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyYWRpZW50X2Rlc2NlbnQpLFxuICogd2hlcmUgd2UncmUgdHJ5aW5nIHRvIGZpbmQgYSBsb2NhbCBtaW5pbXVtIG9mIGEgZnVuY3Rpb24ncyBkZXJpdmF0aXZlLFxuICogZ2l2ZW4gYnkgdGhlIGBmRGVyaXZhdGl2ZWAgbWV0aG9kLlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBGcm9tIGNhbGN1bGF0aW9uLCB3ZSBleHBlY3QgdGhhdCB0aGUgbG9jYWwgbWluaW11bSBvY2N1cnMgYXQgeD05LzRcbiAqIHZhciB4X29sZCA9IDA7XG4gKiAvLyBUaGUgYWxnb3JpdGhtIHN0YXJ0cyBhdCB4PTZcbiAqIHZhciB4X25ldyA9IDY7XG4gKiB2YXIgc3RlcFNpemUgPSAwLjAxO1xuICpcbiAqIGZ1bmN0aW9uIGZEZXJpdmF0aXZlKHgpIHtcbiAqICAgcmV0dXJuIDQgKiBNYXRoLnBvdyh4LCAzKSAtIDkgKiBNYXRoLnBvdyh4LCAyKTtcbiAqIH1cbiAqXG4gKiAvLyBUaGUgbG9vcCBydW5zIHVudGlsIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHByZXZpb3VzXG4gKiAvLyB2YWx1ZSBhbmQgdGhlIGN1cnJlbnQgdmFsdWUgaXMgc21hbGxlciB0aGFuIGVwc2lsb24gLSBhIHJvdWdoXG4gKiAvLyBtZWF1cmUgb2YgJ2Nsb3NlIGVub3VnaCdcbiAqIHdoaWxlIChNYXRoLmFicyh4X25ldyAtIHhfb2xkKSA+IHNzLmVwc2lsb24pIHtcbiAqICAgeF9vbGQgPSB4X25ldztcbiAqICAgeF9uZXcgPSB4X29sZCAtIHN0ZXBTaXplICogZkRlcml2YXRpdmUoeF9vbGQpO1xuICogfVxuICpcbiAqIGNvbnNvbGUubG9nKCdMb2NhbCBtaW5pbXVtIG9jY3VycyBhdCcsIHhfbmV3KTtcbiAqL1xudmFyIGVwc2lsb24gPSAwLjAwMDE7XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogQSBbRmFjdG9yaWFsXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GYWN0b3JpYWwpLCB1c3VhbGx5IHdyaXR0ZW4gbiEsIGlzIHRoZSBwcm9kdWN0IG9mIGFsbCBwb3NpdGl2ZVxuICogaW50ZWdlcnMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIG4uIE9mdGVuIGZhY3RvcmlhbCBpcyBpbXBsZW1lbnRlZFxuICogcmVjdXJzaXZlbHksIGJ1dCB0aGlzIGl0ZXJhdGl2ZSBhcHByb2FjaCBpcyBzaWduaWZpY2FudGx5IGZhc3RlclxuICogYW5kIHNpbXBsZXIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IG4gaW5wdXQsIG11c3QgYmUgYW4gaW50ZWdlciBudW1iZXIgMSBvciBncmVhdGVyXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBmYWN0b3JpYWw6IG4hXG4gKiBAdGhyb3dzIHtFcnJvcn0gaWYgbiBpcyBsZXNzIHRoYW4gMCBvciBub3QgYW4gaW50ZWdlclxuICogQGV4YW1wbGVcbiAqIGZhY3RvcmlhbCg1KTsgLy8gPT4gMTIwXG4gKi9cbmZ1bmN0aW9uIGZhY3RvcmlhbChuIC8qOiBudW1iZXIgKi8pLyo6IG51bWJlciAqLyB7XG5cbiAgICAvLyBmYWN0b3JpYWwgaXMgbWF0aGVtYXRpY2FsbHkgdW5kZWZpbmVkIGZvciBuZWdhdGl2ZSBudW1iZXJzXG4gICAgaWYgKG4gPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignZmFjdG9yaWFsIHJlcXVpcmVzIGEgbm9uLW5lZ2F0aXZlIHZhbHVlJyk7XG4gICAgfVxuXG4gICAgaWYgKE1hdGguZmxvb3IobikgIT09IG4pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdmYWN0b3JpYWwgcmVxdWlyZXMgYW4gaW50ZWdlciBpbnB1dCcpO1xuICAgIH1cblxuICAgIC8vIHR5cGljYWxseSB5b3UnbGwgZXhwYW5kIHRoZSBmYWN0b3JpYWwgZnVuY3Rpb24gZ29pbmcgZG93biwgbGlrZVxuICAgIC8vIDUhID0gNSAqIDQgKiAzICogMiAqIDEuIFRoaXMgaXMgZ29pbmcgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbixcbiAgICAvLyBjb3VudGluZyBmcm9tIDIgdXAgdG8gdGhlIG51bWJlciBpbiBxdWVzdGlvbiwgYW5kIHNpbmNlIGFueXRoaW5nXG4gICAgLy8gbXVsdGlwbGllZCBieSAxIGlzIGl0c2VsZiwgdGhlIGxvb3Agb25seSBuZWVkcyB0byBzdGFydCBhdCAyLlxuICAgIHZhciBhY2N1bXVsYXRvciA9IDE7XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPD0gbjsgaSsrKSB7XG4gICAgICAgIC8vIGZvciBlYWNoIG51bWJlciB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBudW1iZXIgYG5gLCBtdWx0aXBseVxuICAgICAgICAvLyB0aGUgYWNjdW11bGF0b3IgbXkgdGhhdCBudW1iZXIuXG4gICAgICAgIGFjY3VtdWxhdG9yICo9IGk7XG4gICAgfVxuICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBDb21wdXRlIHRoZSBbZ2FtbWEgZnVuY3Rpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhbW1hX2Z1bmN0aW9uKSBvZiBhIHZhbHVlIHVzaW5nIE5lbWVzJyBhcHByb3hpbWF0aW9uLlxuICogVGhlIGdhbW1hIG9mIG4gaXMgZXF1aXZhbGVudCB0byAobi0xKSEsIGJ1dCB1bmxpa2UgdGhlIGZhY3RvcmlhbCBmdW5jdGlvbiwgZ2FtbWEgaXMgZGVmaW5lZCBmb3IgYWxsIHJlYWwgbiBleGNlcHQgemVybyBcbiAqIGFuZCBuZWdhdGl2ZSBpbnRlZ2VycyAod2hlcmUgTmFOIGlzIHJldHVybmVkKS4gTm90ZSwgdGhlIGdhbW1hIGZ1bmN0aW9uIGlzIGFsc28gd2VsbC1kZWZpbmVkIGZvciBjb21wbGV4IG51bWJlcnMsIFxuICogdGhvdWdoIHRoaXMgaW1wbGVtZW50YXRpb24gY3VycmVudGx5IGRvZXMgbm90IGhhbmRsZSBjb21wbGV4IG51bWJlcnMgYXMgaW5wdXQgdmFsdWVzLlxuICogTmVtZXMnIGFwcHJveGltYXRpb24gaXMgZGVmaW5lZCBbaGVyZV0oaHR0cHM6Ly9hcnhpdi5vcmcvYWJzLzEwMDMuNjAyMCkgYXMgVGhlb3JlbSAyLjIuXG4gKiBOZWdhdGl2ZSB2YWx1ZXMgdXNlIFtFdWxlcidzIHJlZmxlY3Rpb24gZm9ybXVsYV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR2FtbWFfZnVuY3Rpb24jUHJvcGVydGllcykgZm9yIGNvbXB1dGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIEFueSByZWFsIG51bWJlciBleGNlcHQgZm9yIHplcm8gYW5kIG5lZ2F0aXZlIGludGVnZXJzLlxuICogQHJldHVybnMge251bWJlcn0gVGhlIGdhbW1hIG9mIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogZ2FtbWEoMTEuNSk7IC8vIDExODk5NDIzLjA4NDAzNzAzOFxuICogZ2FtbWEoLTExLjUpOyAvLyAyLjI5NTc1ODEwNDgxNjA5ZS04IFxuICogZ2FtbWEoNSk7IC8vIDI0IFxuICovXG5mdW5jdGlvbiBnYW1tYShuIC8qOiBudW1iZXIgKi8gKSAvKjogbnVtYmVyICovIHtcblxuICAgIGlmIChpc0ludGVnZXIobikpIHtcbiAgICAgICAgaWYgKG4gPD0gMCkge1xuICAgICAgICAgICAgLy8gZ2FtbWEgbm90IGRlZmluZWQgZm9yIHplcm8gb3IgbmVnYXRpdmUgaW50ZWdlcnNcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyB1c2UgZmFjdG9yaWFsIGZvciBpbnRlZ2VyIGlucHV0cyBcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3JpYWwobiAtIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVjcmVtZW50IG4sIGJlY2F1c2UgYXBwcm94aW1hdGlvbiBpcyBkZWZpbmVkIGZvciBuIC0gMVxuICAgIG4tLTtcblxuXG4gICAgaWYgKG4gPCAwKSB7XG4gICAgICAgIC8vIFVzZSBFdWxlcidzIHJlZmxlY3Rpb24gZm9ybXVsYSBmb3IgbmVnYXRpdmUgaW5wdXRzXG4gICAgICAgIC8vIHNlZTogIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dhbW1hX2Z1bmN0aW9uI1Byb3BlcnRpZXNcbiAgICAgICAgcmV0dXJuIE1hdGguUEkgLyAoTWF0aC5zaW4oTWF0aC5QSSAqIC1uKSAqIGdhbW1hKC1uKSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOZW1lcycgZXhwYW5zaW9uIGFwcHJveGltYXRpb25cbiAgICAgICAgdmFyIHNlcmllc0NvZWZmaWNpZW50ID0gTWF0aC5wb3coKG4gLyBNYXRoLkUpLCBuKSAqIE1hdGguc3FydCgyICogTWF0aC5QSSAqIChuICsgKDEgLyA2KSkpO1xuXG4gICAgICAgIHZhciBzZXJpZXNEZW5vbSA9IG4gKyAxIC8gNDtcblxuICAgICAgICB2YXIgc2VyaWVzRXhwYW5zaW9uID0gKDEgK1xuICAgICAgICAgICAgKDEgLyAxNDQpIC8gTWF0aC5wb3coc2VyaWVzRGVub20sIDIpIC1cbiAgICAgICAgICAgICgxIC8gMTI5NjApIC8gTWF0aC5wb3coc2VyaWVzRGVub20sIDMpIC1cbiAgICAgICAgICAgICgyNTcgLyAyMDczNjApIC8gTWF0aC5wb3coc2VyaWVzRGVub20sIDQpIC1cbiAgICAgICAgICAgICg1MiAvIDI2MTI3MzYpIC8gTWF0aC5wb3coc2VyaWVzRGVub20sIDUpICtcbiAgICAgICAgICAgICg1NzQxMTczIC8gOTQwNTg0OTYwMCkgLyBNYXRoLnBvdyhzZXJpZXNEZW5vbSwgNikgK1xuICAgICAgICAgICAgKDM3NTI5IC8gMTg4MTE2OTkyMDApIC8gTWF0aC5wb3coc2VyaWVzRGVub20sIDcpKTtcblxuICAgICAgICByZXR1cm4gc2VyaWVzQ29lZmZpY2llbnQgKiBzZXJpZXNFeHBhbnNpb247XG4gICAgfVxuXG59XG5cbmZ1bmN0aW9uIGlzSW50ZWdlcih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmXG4gICAgICAgIGlzRmluaXRlKHZhbHVlKSAmJlxuICAgICAgICBNYXRoLmZsb29yKHZhbHVlKSA9PT0gdmFsdWU7XG59XG5cbi8qIEBmbG93ICovXG5cbi8vIERlZmluZSBzZXJpZXMgY29lZmZpY2llbnRzXG52YXIgQ09FRkZJQ0lFTlRTID0gW1xuICAgIDAuOTk5OTk5OTk5OTk5OTk3MDkxODIsXG4gICAgNTcuMTU2MjM1NjY1ODYyOTIzNTE3LFxuICAgIC01OS41OTc5NjAzNTU0NzU0OTEyNDgsXG4gICAgMTQuMTM2MDk3OTc0NzQxNzQ3MTc0LFxuICAgIC0wLjQ5MTkxMzgxNjA5NzYyMDE5OTc4LFxuICAgIDAuMzM5OTQ2NDk5ODQ4MTE4ODg2OTllLTQsXG4gICAgMC40NjUyMzYyODkyNzA0ODU3NTY2NWUtNCxcbiAgICAtMC45ODM3NDQ3NTMwNDg3OTU2NDY3N2UtNCxcbiAgICAwLjE1ODA4ODcwMzIyNDkxMjQ4ODg0ZS0zLFxuICAgIC0wLjIxMDI2NDQ0MTcyNDEwNDg4MzE5ZS0zLCAwLjIxNzQzOTYxODExNTIxMjY0MzIwZS0zLFxuICAgIC0wLjE2NDMxODEwNjUzNjc2Mzg5MDIyZS0zLFxuICAgIDAuODQ0MTgyMjM5ODM4NTI3NDMyOTNlLTQsXG4gICAgLTAuMjYxOTA4Mzg0MDE1ODE0MDg2NzBlLTQsXG4gICAgMC4zNjg5OTE4MjY1OTUzMTYyMjcwNGUtNVxuXTtcblxudmFyIGcgPSA2MDcgLyAxMjg7XG52YXIgTE9HU1FSVDJQSSA9IE1hdGgubG9nKE1hdGguc3FydCgyICogTWF0aC5QSSkpO1xuXG4vKipcbiAqIENvbXB1dGUgdGhlIGxvZ2FyaXRobSBvZiB0aGUgW2dhbW1hIGZ1bmN0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HYW1tYV9mdW5jdGlvbikgb2YgYSB2YWx1ZSB1c2luZyBMYW5jem9zJyBhcHByb3hpbWF0aW9uLlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhcyBpbnB1dCBhbnkgcmVhbC12YWx1ZSBuIGdyZWF0ZXIgdGhhbiAwLlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgZm9yIHZhbHVlcyBvZiBuIHRvbyBsYXJnZSBmb3IgdGhlIG5vcm1hbCBnYW1tYSBmdW5jdGlvbiAobiA+IDE2NSkuXG4gKiBUaGUgY29kZSBpcyBiYXNlZCBvbiBMYW5jem8ncyBHYW1tYSBhcHByb3hpbWF0aW9uLCBkZWZpbmVkIFtoZXJlXShodHRwOi8vbXkuZml0LmVkdS9+Z2FiZG8vZ2FtbWEudHh0KS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbiBBbnkgcmVhbCBudW1iZXIgZ3JlYXRlciB0aGFuIHplcm8uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBUaGUgbG9nYXJpdGhtIG9mIGdhbW1hIG9mIHRoZSBpbnB1dCB2YWx1ZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogZ2FtbWFsbig1MDApOyAvLyAyNjA1LjExNTg1MDM2MTczMzVcbiAqIGdhbW1hbG4oMi40KTsgLy8gMC4yMTY4NTkzMjI0NDg4NDA0MyBcbiAqL1xuZnVuY3Rpb24gZ2FtbWFsbihuIC8qOiBudW1iZXIgKi8gKSAvKjogbnVtYmVyICovIHtcblxuICAgIC8vIFJldHVybiBpbmZpbml0eSBpZiB2YWx1ZSBub3QgaW4gZG9tYWluXG4gICAgaWYgKG4gPD0gMCkge1xuICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgfVxuICAgIFxuICAgIC8vIERlY3JlbWVudCBuLCBiZWNhdXNlIGFwcHJveGltYXRpb24gaXMgZGVmaW5lZCBmb3IgbiAtIDFcbiAgICBuLS07XG4gICAgXG4gICAgLy8gQ3JlYXRlIHNlcmllcyBhcHByb3hpbWF0aW9uXG4gICAgdmFyIGEgPSBDT0VGRklDSUVOVFNbMF07XG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgIGEgKz0gQ09FRkZJQ0lFTlRTW2ldIC8gKG4gKyBpKTtcbiAgICB9XG4gICAgXG4gICAgdmFyIHRtcCA9IGcgKyAwLjUgKyBuO1xuICAgIFxuICAgIC8vIFJldHVybiBuYXR1cmFsIGxvZ2FyaXRobSBvZiBnYW1tYShuKVxuICAgIHJldHVybiBMT0dTUVJUMlBJICsgTWF0aC5sb2coYSkgLSB0bXAgKyAobiArIDAuNSkgKiBNYXRoLmxvZyh0bXApO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbQmVybm91bGxpIGRpc3RyaWJ1dGlvbl0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CZXJub3VsbGlfZGlzdHJpYnV0aW9uKVxuICogaXMgdGhlIHByb2JhYmlsaXR5IGRpc2NyZXRlXG4gKiBkaXN0cmlidXRpb24gb2YgYSByYW5kb20gdmFyaWFibGUgd2hpY2ggdGFrZXMgdmFsdWUgMSB3aXRoIHN1Y2Nlc3NcbiAqIHByb2JhYmlsaXR5IGBwYCBhbmQgdmFsdWUgMCB3aXRoIGZhaWx1cmVcbiAqIHByb2JhYmlsaXR5IGBxYCA9IDEgLSBgcGAuIEl0IGNhbiBiZSB1c2VkLCBmb3IgZXhhbXBsZSwgdG8gcmVwcmVzZW50IHRoZVxuICogdG9zcyBvZiBhIGNvaW4sIHdoZXJlIFwiMVwiIGlzIGRlZmluZWQgdG8gbWVhbiBcImhlYWRzXCIgYW5kIFwiMFwiIGlzIGRlZmluZWRcbiAqIHRvIG1lYW4gXCJ0YWlsc1wiIChvciB2aWNlIHZlcnNhKS4gSXQgaXNcbiAqIGEgc3BlY2lhbCBjYXNlIG9mIGEgQmlub21pYWwgRGlzdHJpYnV0aW9uXG4gKiB3aGVyZSBgbmAgPSAxLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBwIGlucHV0IHZhbHVlLCBiZXR3ZWVuIDAgYW5kIDEgaW5jbHVzaXZlXG4gKiBAcmV0dXJucyB7bnVtYmVyW119IHZhbHVlcyBvZiBiZXJub3VsbGkgZGlzdHJpYnV0aW9uIGF0IHRoaXMgcG9pbnRcbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBwIGlzIG91dHNpZGUgMCBhbmQgMVxuICogQGV4YW1wbGVcbiAqIGJlcm5vdWxsaURpc3RyaWJ1dGlvbigwLjMpOyAvLyA9PiBbMC43LCAwLjNdXG4gKi9cbmZ1bmN0aW9uIGJlcm5vdWxsaURpc3RyaWJ1dGlvbihwLyo6IG51bWJlciAqLykgLyo6IG51bWJlcltdICovIHtcbiAgICAvLyBDaGVjayB0aGF0IGBwYCBpcyBhIHZhbGlkIHByb2JhYmlsaXR5ICgwIOKJpCBwIOKJpCAxKVxuICAgIGlmIChwIDwgMCB8fCBwID4gMSApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiZXJub3VsbGlEaXN0cmlidXRpb24gcmVxdWlyZXMgcHJvYmFiaWxpdHkgdG8gYmUgYmV0d2VlbiAwIGFuZCAxIGluY2x1c2l2ZScpO1xuICAgIH1cblxuICAgIHJldHVybiBbMSAtIHAsIHBdO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbQmlub21pYWwgRGlzdHJpYnV0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Jpbm9taWFsX2Rpc3RyaWJ1dGlvbikgaXMgdGhlIGRpc2NyZXRlIHByb2JhYmlsaXR5XG4gKiBkaXN0cmlidXRpb24gb2YgdGhlIG51bWJlciBvZiBzdWNjZXNzZXMgaW4gYSBzZXF1ZW5jZSBvZiBuIGluZGVwZW5kZW50IHllcy9ubyBleHBlcmltZW50cywgZWFjaCBvZiB3aGljaCB5aWVsZHNcbiAqIHN1Y2Nlc3Mgd2l0aCBwcm9iYWJpbGl0eSBgcHJvYmFiaWxpdHlgLiBTdWNoIGEgc3VjY2Vzcy9mYWlsdXJlIGV4cGVyaW1lbnQgaXMgYWxzbyBjYWxsZWQgYSBCZXJub3VsbGkgZXhwZXJpbWVudCBvclxuICogQmVybm91bGxpIHRyaWFsOyB3aGVuIHRyaWFscyA9IDEsIHRoZSBCaW5vbWlhbCBEaXN0cmlidXRpb24gaXMgYSBCZXJub3VsbGkgRGlzdHJpYnV0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB0cmlhbHMgbnVtYmVyIG9mIHRyaWFscyB0byBzaW11bGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHByb2JhYmlsaXR5XG4gKiBAcmV0dXJucyB7bnVtYmVyW119IG91dHB1dFxuICovXG5mdW5jdGlvbiBiaW5vbWlhbERpc3RyaWJ1dGlvbihcbiAgICB0cmlhbHMvKjogbnVtYmVyICovLFxuICAgIHByb2JhYmlsaXR5Lyo6IG51bWJlciAqLykvKjogP251bWJlcltdICovIHtcbiAgICAvLyBDaGVjayB0aGF0IGBwYCBpcyBhIHZhbGlkIHByb2JhYmlsaXR5ICgwIOKJpCBwIOKJpCAxKSxcbiAgICAvLyB0aGF0IGBuYCBpcyBhbiBpbnRlZ2VyLCBzdHJpY3RseSBwb3NpdGl2ZS5cbiAgICBpZiAocHJvYmFiaWxpdHkgPCAwIHx8IHByb2JhYmlsaXR5ID4gMSB8fFxuICAgICAgICB0cmlhbHMgPD0gMCB8fCB0cmlhbHMgJSAxICE9PSAwKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gV2UgaW5pdGlhbGl6ZSBgeGAsIHRoZSByYW5kb20gdmFyaWFibGUsIGFuZCBgYWNjdW11bGF0b3JgLCBhbiBhY2N1bXVsYXRvclxuICAgIC8vIGZvciB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gZnVuY3Rpb24gdG8gMC4gYGRpc3RyaWJ1dGlvbl9mdW5jdGlvbnNgXG4gICAgLy8gaXMgdGhlIG9iamVjdCB3ZSdsbCByZXR1cm4gd2l0aCB0aGUgYHByb2JhYmlsaXR5X29mX3hgIGFuZCB0aGVcbiAgICAvLyBgY3VtdWxhdGl2ZVByb2JhYmlsaXR5X29mX3hgLCBhcyB3ZWxsIGFzIHRoZSBjYWxjdWxhdGVkIG1lYW4gJlxuICAgIC8vIHZhcmlhbmNlLiBXZSBpdGVyYXRlIHVudGlsIHRoZSBgY3VtdWxhdGl2ZVByb2JhYmlsaXR5X29mX3hgIGlzXG4gICAgLy8gd2l0aGluIGBlcHNpbG9uYCBvZiAxLjAuXG4gICAgdmFyIHggPSAwLFxuICAgICAgICBjdW11bGF0aXZlUHJvYmFiaWxpdHkgPSAwLFxuICAgICAgICBjZWxscyA9IFtdLFxuICAgICAgICBiaW5vbWlhbENvZWZmaWNpZW50ID0gMTtcblxuICAgIC8vIFRoaXMgYWxnb3JpdGhtIGl0ZXJhdGVzIHRocm91Z2ggZWFjaCBwb3RlbnRpYWwgb3V0Y29tZSxcbiAgICAvLyB1bnRpbCB0aGUgYGN1bXVsYXRpdmVQcm9iYWJpbGl0eWAgaXMgdmVyeSBjbG9zZSB0byAxLCBhdFxuICAgIC8vIHdoaWNoIHBvaW50IHdlJ3ZlIGRlZmluZWQgdGhlIHZhc3QgbWFqb3JpdHkgb2Ygb3V0Y29tZXNcbiAgICBkbyB7XG4gICAgICAgIC8vIGEgW3Byb2JhYmlsaXR5IG1hc3MgZnVuY3Rpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1Byb2JhYmlsaXR5X21hc3NfZnVuY3Rpb24pXG4gICAgICAgIGNlbGxzW3hdID0gYmlub21pYWxDb2VmZmljaWVudCAqXG4gICAgICAgICAgICBNYXRoLnBvdyhwcm9iYWJpbGl0eSwgeCkgKiBNYXRoLnBvdygxIC0gcHJvYmFiaWxpdHksIHRyaWFscyAtIHgpO1xuICAgICAgICBjdW11bGF0aXZlUHJvYmFiaWxpdHkgKz0gY2VsbHNbeF07XG4gICAgICAgIHgrKztcbiAgICAgICAgYmlub21pYWxDb2VmZmljaWVudCA9IGJpbm9taWFsQ29lZmZpY2llbnQgKiAodHJpYWxzIC0geCArIDEpIC8geDtcbiAgICAvLyB3aGVuIHRoZSBjdW11bGF0aXZlUHJvYmFiaWxpdHkgaXMgbmVhcmx5IDEsIHdlJ3ZlIGNhbGN1bGF0ZWRcbiAgICAvLyB0aGUgdXNlZnVsIHJhbmdlIG9mIHRoaXMgZGlzdHJpYnV0aW9uXG4gICAgfSB3aGlsZSAoY3VtdWxhdGl2ZVByb2JhYmlsaXR5IDwgMSAtIGVwc2lsb24pO1xuXG4gICAgcmV0dXJuIGNlbGxzO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbUG9pc3NvbiBEaXN0cmlidXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUG9pc3Nvbl9kaXN0cmlidXRpb24pXG4gKiBpcyBhIGRpc2NyZXRlIHByb2JhYmlsaXR5IGRpc3RyaWJ1dGlvbiB0aGF0IGV4cHJlc3NlcyB0aGUgcHJvYmFiaWxpdHlcbiAqIG9mIGEgZ2l2ZW4gbnVtYmVyIG9mIGV2ZW50cyBvY2N1cnJpbmcgaW4gYSBmaXhlZCBpbnRlcnZhbCBvZiB0aW1lXG4gKiBhbmQvb3Igc3BhY2UgaWYgdGhlc2UgZXZlbnRzIG9jY3VyIHdpdGggYSBrbm93biBhdmVyYWdlIHJhdGUgYW5kXG4gKiBpbmRlcGVuZGVudGx5IG9mIHRoZSB0aW1lIHNpbmNlIHRoZSBsYXN0IGV2ZW50LlxuICpcbiAqIFRoZSBQb2lzc29uIERpc3RyaWJ1dGlvbiBpcyBjaGFyYWN0ZXJpemVkIGJ5IHRoZSBzdHJpY3RseSBwb3NpdGl2ZVxuICogbWVhbiBhcnJpdmFsIG9yIG9jY3VycmVuY2UgcmF0ZSwgYM67YC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gbGFtYmRhIGxvY2F0aW9uIHBvaXNzb24gZGlzdHJpYnV0aW9uXG4gKiBAcmV0dXJucyB7bnVtYmVyW119IHZhbHVlcyBvZiBwb2lzc29uIGRpc3RyaWJ1dGlvbiBhdCB0aGF0IHBvaW50XG4gKi9cbmZ1bmN0aW9uIHBvaXNzb25EaXN0cmlidXRpb24obGFtYmRhLyo6IG51bWJlciAqLykgLyo6ID9udW1iZXJbXSAqLyB7XG4gICAgLy8gQ2hlY2sgdGhhdCBsYW1iZGEgaXMgc3RyaWN0bHkgcG9zaXRpdmVcbiAgICBpZiAobGFtYmRhIDw9IDApIHsgcmV0dXJuIHVuZGVmaW5lZDsgfVxuXG4gICAgLy8gb3VyIGN1cnJlbnQgcGxhY2UgaW4gdGhlIGRpc3RyaWJ1dGlvblxuICAgIHZhciB4ID0gMCxcbiAgICAgICAgLy8gYW5kIHdlIGtlZXAgdHJhY2sgb2YgdGhlIGN1cnJlbnQgY3VtdWxhdGl2ZSBwcm9iYWJpbGl0eSwgaW5cbiAgICAgICAgLy8gb3JkZXIgdG8ga25vdyB3aGVuIHRvIHN0b3AgY2FsY3VsYXRpbmcgY2hhbmNlcy5cbiAgICAgICAgY3VtdWxhdGl2ZVByb2JhYmlsaXR5ID0gMCxcbiAgICAgICAgLy8gdGhlIGNhbGN1bGF0ZWQgY2VsbHMgdG8gYmUgcmV0dXJuZWRcbiAgICAgICAgY2VsbHMgPSBbXSxcbiAgICAgICAgZmFjdG9yaWFsWCA9IDE7XG5cbiAgICAvLyBUaGlzIGFsZ29yaXRobSBpdGVyYXRlcyB0aHJvdWdoIGVhY2ggcG90ZW50aWFsIG91dGNvbWUsXG4gICAgLy8gdW50aWwgdGhlIGBjdW11bGF0aXZlUHJvYmFiaWxpdHlgIGlzIHZlcnkgY2xvc2UgdG8gMSwgYXRcbiAgICAvLyB3aGljaCBwb2ludCB3ZSd2ZSBkZWZpbmVkIHRoZSB2YXN0IG1ham9yaXR5IG9mIG91dGNvbWVzXG4gICAgZG8ge1xuICAgICAgICAvLyBhIFtwcm9iYWJpbGl0eSBtYXNzIGZ1bmN0aW9uXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qcm9iYWJpbGl0eV9tYXNzX2Z1bmN0aW9uKVxuICAgICAgICBjZWxsc1t4XSA9IChNYXRoLmV4cCgtbGFtYmRhKSAqIE1hdGgucG93KGxhbWJkYSwgeCkpIC8gZmFjdG9yaWFsWDtcbiAgICAgICAgY3VtdWxhdGl2ZVByb2JhYmlsaXR5ICs9IGNlbGxzW3hdO1xuICAgICAgICB4Kys7XG4gICAgICAgIGZhY3RvcmlhbFggKj0geDtcbiAgICAvLyB3aGVuIHRoZSBjdW11bGF0aXZlUHJvYmFiaWxpdHkgaXMgbmVhcmx5IDEsIHdlJ3ZlIGNhbGN1bGF0ZWRcbiAgICAvLyB0aGUgdXNlZnVsIHJhbmdlIG9mIHRoaXMgZGlzdHJpYnV0aW9uXG4gICAgfSB3aGlsZSAoY3VtdWxhdGl2ZVByb2JhYmlsaXR5IDwgMSAtIGVwc2lsb24pO1xuXG4gICAgcmV0dXJuIGNlbGxzO1xufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqICoqUGVyY2VudGFnZSBQb2ludHMgb2YgdGhlIM+HMiAoQ2hpLVNxdWFyZWQpIERpc3RyaWJ1dGlvbioqXG4gKlxuICogVGhlIFvPhzIgKENoaS1TcXVhcmVkKSBEaXN0cmlidXRpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2hpLXNxdWFyZWRfZGlzdHJpYnV0aW9uKSBpcyB1c2VkIGluIHRoZSBjb21tb25cbiAqIGNoaS1zcXVhcmVkIHRlc3RzIGZvciBnb29kbmVzcyBvZiBmaXQgb2YgYW4gb2JzZXJ2ZWQgZGlzdHJpYnV0aW9uIHRvIGEgdGhlb3JldGljYWwgb25lLCB0aGUgaW5kZXBlbmRlbmNlIG9mIHR3b1xuICogY3JpdGVyaWEgb2YgY2xhc3NpZmljYXRpb24gb2YgcXVhbGl0YXRpdmUgZGF0YSwgYW5kIGluIGNvbmZpZGVuY2UgaW50ZXJ2YWwgZXN0aW1hdGlvbiBmb3IgYSBwb3B1bGF0aW9uIHN0YW5kYXJkXG4gKiBkZXZpYXRpb24gb2YgYSBub3JtYWwgZGlzdHJpYnV0aW9uIGZyb20gYSBzYW1wbGUgc3RhbmRhcmQgZGV2aWF0aW9uLlxuICpcbiAqIFZhbHVlcyBmcm9tIEFwcGVuZGl4IDEsIFRhYmxlIElJSSBvZiBXaWxsaWFtIFcuIEhpbmVzICYgRG91Z2xhcyBDLiBNb250Z29tZXJ5LCBcIlByb2JhYmlsaXR5IGFuZCBTdGF0aXN0aWNzIGluXG4gKiBFbmdpbmVlcmluZyBhbmQgTWFuYWdlbWVudCBTY2llbmNlXCIsIFdpbGV5ICgxOTgwKS5cbiAqL1xudmFyIGNoaVNxdWFyZWREaXN0cmlidXRpb25UYWJsZSA9IHtcbiAgICAnMSc6IHtcbiAgICAgICAgJzAuOTk1JzogMCxcbiAgICAgICAgJzAuOTknOiAwLFxuICAgICAgICAnMC45NzUnOiAwLFxuICAgICAgICAnMC45NSc6IDAsXG4gICAgICAgICcwLjknOiAwLjAyLFxuICAgICAgICAnMC41JzogMC40NSxcbiAgICAgICAgJzAuMSc6IDIuNzEsXG4gICAgICAgICcwLjA1JzogMy44NCxcbiAgICAgICAgJzAuMDI1JzogNS4wMixcbiAgICAgICAgJzAuMDEnOiA2LjYzLFxuICAgICAgICAnMC4wMDUnOiA3Ljg4XG4gICAgfSxcbiAgICAnMic6IHtcbiAgICAgICAgJzAuOTk1JzogMC4wMSxcbiAgICAgICAgJzAuOTknOiAwLjAyLFxuICAgICAgICAnMC45NzUnOiAwLjA1LFxuICAgICAgICAnMC45NSc6IDAuMSxcbiAgICAgICAgJzAuOSc6IDAuMjEsXG4gICAgICAgICcwLjUnOiAxLjM5LFxuICAgICAgICAnMC4xJzogNC42MSxcbiAgICAgICAgJzAuMDUnOiA1Ljk5LFxuICAgICAgICAnMC4wMjUnOiA3LjM4LFxuICAgICAgICAnMC4wMSc6IDkuMjEsXG4gICAgICAgICcwLjAwNSc6IDEwLjZcbiAgICB9LFxuICAgICczJzoge1xuICAgICAgICAnMC45OTUnOiAwLjA3LFxuICAgICAgICAnMC45OSc6IDAuMTEsXG4gICAgICAgICcwLjk3NSc6IDAuMjIsXG4gICAgICAgICcwLjk1JzogMC4zNSxcbiAgICAgICAgJzAuOSc6IDAuNTgsXG4gICAgICAgICcwLjUnOiAyLjM3LFxuICAgICAgICAnMC4xJzogNi4yNSxcbiAgICAgICAgJzAuMDUnOiA3LjgxLFxuICAgICAgICAnMC4wMjUnOiA5LjM1LFxuICAgICAgICAnMC4wMSc6IDExLjM0LFxuICAgICAgICAnMC4wMDUnOiAxMi44NFxuICAgIH0sXG4gICAgJzQnOiB7XG4gICAgICAgICcwLjk5NSc6IDAuMjEsXG4gICAgICAgICcwLjk5JzogMC4zLFxuICAgICAgICAnMC45NzUnOiAwLjQ4LFxuICAgICAgICAnMC45NSc6IDAuNzEsXG4gICAgICAgICcwLjknOiAxLjA2LFxuICAgICAgICAnMC41JzogMy4zNixcbiAgICAgICAgJzAuMSc6IDcuNzgsXG4gICAgICAgICcwLjA1JzogOS40OSxcbiAgICAgICAgJzAuMDI1JzogMTEuMTQsXG4gICAgICAgICcwLjAxJzogMTMuMjgsXG4gICAgICAgICcwLjAwNSc6IDE0Ljg2XG4gICAgfSxcbiAgICAnNSc6IHtcbiAgICAgICAgJzAuOTk1JzogMC40MSxcbiAgICAgICAgJzAuOTknOiAwLjU1LFxuICAgICAgICAnMC45NzUnOiAwLjgzLFxuICAgICAgICAnMC45NSc6IDEuMTUsXG4gICAgICAgICcwLjknOiAxLjYxLFxuICAgICAgICAnMC41JzogNC4zNSxcbiAgICAgICAgJzAuMSc6IDkuMjQsXG4gICAgICAgICcwLjA1JzogMTEuMDcsXG4gICAgICAgICcwLjAyNSc6IDEyLjgzLFxuICAgICAgICAnMC4wMSc6IDE1LjA5LFxuICAgICAgICAnMC4wMDUnOiAxNi43NVxuICAgIH0sXG4gICAgJzYnOiB7XG4gICAgICAgICcwLjk5NSc6IDAuNjgsXG4gICAgICAgICcwLjk5JzogMC44NyxcbiAgICAgICAgJzAuOTc1JzogMS4yNCxcbiAgICAgICAgJzAuOTUnOiAxLjY0LFxuICAgICAgICAnMC45JzogMi4yLFxuICAgICAgICAnMC41JzogNS4zNSxcbiAgICAgICAgJzAuMSc6IDEwLjY1LFxuICAgICAgICAnMC4wNSc6IDEyLjU5LFxuICAgICAgICAnMC4wMjUnOiAxNC40NSxcbiAgICAgICAgJzAuMDEnOiAxNi44MSxcbiAgICAgICAgJzAuMDA1JzogMTguNTVcbiAgICB9LFxuICAgICc3Jzoge1xuICAgICAgICAnMC45OTUnOiAwLjk5LFxuICAgICAgICAnMC45OSc6IDEuMjUsXG4gICAgICAgICcwLjk3NSc6IDEuNjksXG4gICAgICAgICcwLjk1JzogMi4xNyxcbiAgICAgICAgJzAuOSc6IDIuODMsXG4gICAgICAgICcwLjUnOiA2LjM1LFxuICAgICAgICAnMC4xJzogMTIuMDIsXG4gICAgICAgICcwLjA1JzogMTQuMDcsXG4gICAgICAgICcwLjAyNSc6IDE2LjAxLFxuICAgICAgICAnMC4wMSc6IDE4LjQ4LFxuICAgICAgICAnMC4wMDUnOiAyMC4yOFxuICAgIH0sXG4gICAgJzgnOiB7XG4gICAgICAgICcwLjk5NSc6IDEuMzQsXG4gICAgICAgICcwLjk5JzogMS42NSxcbiAgICAgICAgJzAuOTc1JzogMi4xOCxcbiAgICAgICAgJzAuOTUnOiAyLjczLFxuICAgICAgICAnMC45JzogMy40OSxcbiAgICAgICAgJzAuNSc6IDcuMzQsXG4gICAgICAgICcwLjEnOiAxMy4zNixcbiAgICAgICAgJzAuMDUnOiAxNS41MSxcbiAgICAgICAgJzAuMDI1JzogMTcuNTMsXG4gICAgICAgICcwLjAxJzogMjAuMDksXG4gICAgICAgICcwLjAwNSc6IDIxLjk2XG4gICAgfSxcbiAgICAnOSc6IHtcbiAgICAgICAgJzAuOTk1JzogMS43MyxcbiAgICAgICAgJzAuOTknOiAyLjA5LFxuICAgICAgICAnMC45NzUnOiAyLjcsXG4gICAgICAgICcwLjk1JzogMy4zMyxcbiAgICAgICAgJzAuOSc6IDQuMTcsXG4gICAgICAgICcwLjUnOiA4LjM0LFxuICAgICAgICAnMC4xJzogMTQuNjgsXG4gICAgICAgICcwLjA1JzogMTYuOTIsXG4gICAgICAgICcwLjAyNSc6IDE5LjAyLFxuICAgICAgICAnMC4wMSc6IDIxLjY3LFxuICAgICAgICAnMC4wMDUnOiAyMy41OVxuICAgIH0sXG4gICAgJzEwJzoge1xuICAgICAgICAnMC45OTUnOiAyLjE2LFxuICAgICAgICAnMC45OSc6IDIuNTYsXG4gICAgICAgICcwLjk3NSc6IDMuMjUsXG4gICAgICAgICcwLjk1JzogMy45NCxcbiAgICAgICAgJzAuOSc6IDQuODcsXG4gICAgICAgICcwLjUnOiA5LjM0LFxuICAgICAgICAnMC4xJzogMTUuOTksXG4gICAgICAgICcwLjA1JzogMTguMzEsXG4gICAgICAgICcwLjAyNSc6IDIwLjQ4LFxuICAgICAgICAnMC4wMSc6IDIzLjIxLFxuICAgICAgICAnMC4wMDUnOiAyNS4xOVxuICAgIH0sXG4gICAgJzExJzoge1xuICAgICAgICAnMC45OTUnOiAyLjYsXG4gICAgICAgICcwLjk5JzogMy4wNSxcbiAgICAgICAgJzAuOTc1JzogMy44MixcbiAgICAgICAgJzAuOTUnOiA0LjU3LFxuICAgICAgICAnMC45JzogNS41OCxcbiAgICAgICAgJzAuNSc6IDEwLjM0LFxuICAgICAgICAnMC4xJzogMTcuMjgsXG4gICAgICAgICcwLjA1JzogMTkuNjgsXG4gICAgICAgICcwLjAyNSc6IDIxLjkyLFxuICAgICAgICAnMC4wMSc6IDI0LjcyLFxuICAgICAgICAnMC4wMDUnOiAyNi43NlxuICAgIH0sXG4gICAgJzEyJzoge1xuICAgICAgICAnMC45OTUnOiAzLjA3LFxuICAgICAgICAnMC45OSc6IDMuNTcsXG4gICAgICAgICcwLjk3NSc6IDQuNCxcbiAgICAgICAgJzAuOTUnOiA1LjIzLFxuICAgICAgICAnMC45JzogNi4zLFxuICAgICAgICAnMC41JzogMTEuMzQsXG4gICAgICAgICcwLjEnOiAxOC41NSxcbiAgICAgICAgJzAuMDUnOiAyMS4wMyxcbiAgICAgICAgJzAuMDI1JzogMjMuMzQsXG4gICAgICAgICcwLjAxJzogMjYuMjIsXG4gICAgICAgICcwLjAwNSc6IDI4LjNcbiAgICB9LFxuICAgICcxMyc6IHtcbiAgICAgICAgJzAuOTk1JzogMy41NyxcbiAgICAgICAgJzAuOTknOiA0LjExLFxuICAgICAgICAnMC45NzUnOiA1LjAxLFxuICAgICAgICAnMC45NSc6IDUuODksXG4gICAgICAgICcwLjknOiA3LjA0LFxuICAgICAgICAnMC41JzogMTIuMzQsXG4gICAgICAgICcwLjEnOiAxOS44MSxcbiAgICAgICAgJzAuMDUnOiAyMi4zNixcbiAgICAgICAgJzAuMDI1JzogMjQuNzQsXG4gICAgICAgICcwLjAxJzogMjcuNjksXG4gICAgICAgICcwLjAwNSc6IDI5LjgyXG4gICAgfSxcbiAgICAnMTQnOiB7XG4gICAgICAgICcwLjk5NSc6IDQuMDcsXG4gICAgICAgICcwLjk5JzogNC42NixcbiAgICAgICAgJzAuOTc1JzogNS42MyxcbiAgICAgICAgJzAuOTUnOiA2LjU3LFxuICAgICAgICAnMC45JzogNy43OSxcbiAgICAgICAgJzAuNSc6IDEzLjM0LFxuICAgICAgICAnMC4xJzogMjEuMDYsXG4gICAgICAgICcwLjA1JzogMjMuNjgsXG4gICAgICAgICcwLjAyNSc6IDI2LjEyLFxuICAgICAgICAnMC4wMSc6IDI5LjE0LFxuICAgICAgICAnMC4wMDUnOiAzMS4zMlxuICAgIH0sXG4gICAgJzE1Jzoge1xuICAgICAgICAnMC45OTUnOiA0LjYsXG4gICAgICAgICcwLjk5JzogNS4yMyxcbiAgICAgICAgJzAuOTc1JzogNi4yNyxcbiAgICAgICAgJzAuOTUnOiA3LjI2LFxuICAgICAgICAnMC45JzogOC41NSxcbiAgICAgICAgJzAuNSc6IDE0LjM0LFxuICAgICAgICAnMC4xJzogMjIuMzEsXG4gICAgICAgICcwLjA1JzogMjUsXG4gICAgICAgICcwLjAyNSc6IDI3LjQ5LFxuICAgICAgICAnMC4wMSc6IDMwLjU4LFxuICAgICAgICAnMC4wMDUnOiAzMi44XG4gICAgfSxcbiAgICAnMTYnOiB7XG4gICAgICAgICcwLjk5NSc6IDUuMTQsXG4gICAgICAgICcwLjk5JzogNS44MSxcbiAgICAgICAgJzAuOTc1JzogNi45MSxcbiAgICAgICAgJzAuOTUnOiA3Ljk2LFxuICAgICAgICAnMC45JzogOS4zMSxcbiAgICAgICAgJzAuNSc6IDE1LjM0LFxuICAgICAgICAnMC4xJzogMjMuNTQsXG4gICAgICAgICcwLjA1JzogMjYuMyxcbiAgICAgICAgJzAuMDI1JzogMjguODUsXG4gICAgICAgICcwLjAxJzogMzIsXG4gICAgICAgICcwLjAwNSc6IDM0LjI3XG4gICAgfSxcbiAgICAnMTcnOiB7XG4gICAgICAgICcwLjk5NSc6IDUuNyxcbiAgICAgICAgJzAuOTknOiA2LjQxLFxuICAgICAgICAnMC45NzUnOiA3LjU2LFxuICAgICAgICAnMC45NSc6IDguNjcsXG4gICAgICAgICcwLjknOiAxMC4wOSxcbiAgICAgICAgJzAuNSc6IDE2LjM0LFxuICAgICAgICAnMC4xJzogMjQuNzcsXG4gICAgICAgICcwLjA1JzogMjcuNTksXG4gICAgICAgICcwLjAyNSc6IDMwLjE5LFxuICAgICAgICAnMC4wMSc6IDMzLjQxLFxuICAgICAgICAnMC4wMDUnOiAzNS43MlxuICAgIH0sXG4gICAgJzE4Jzoge1xuICAgICAgICAnMC45OTUnOiA2LjI2LFxuICAgICAgICAnMC45OSc6IDcuMDEsXG4gICAgICAgICcwLjk3NSc6IDguMjMsXG4gICAgICAgICcwLjk1JzogOS4zOSxcbiAgICAgICAgJzAuOSc6IDEwLjg3LFxuICAgICAgICAnMC41JzogMTcuMzQsXG4gICAgICAgICcwLjEnOiAyNS45OSxcbiAgICAgICAgJzAuMDUnOiAyOC44NyxcbiAgICAgICAgJzAuMDI1JzogMzEuNTMsXG4gICAgICAgICcwLjAxJzogMzQuODEsXG4gICAgICAgICcwLjAwNSc6IDM3LjE2XG4gICAgfSxcbiAgICAnMTknOiB7XG4gICAgICAgICcwLjk5NSc6IDYuODQsXG4gICAgICAgICcwLjk5JzogNy42MyxcbiAgICAgICAgJzAuOTc1JzogOC45MSxcbiAgICAgICAgJzAuOTUnOiAxMC4xMixcbiAgICAgICAgJzAuOSc6IDExLjY1LFxuICAgICAgICAnMC41JzogMTguMzQsXG4gICAgICAgICcwLjEnOiAyNy4yLFxuICAgICAgICAnMC4wNSc6IDMwLjE0LFxuICAgICAgICAnMC4wMjUnOiAzMi44NSxcbiAgICAgICAgJzAuMDEnOiAzNi4xOSxcbiAgICAgICAgJzAuMDA1JzogMzguNThcbiAgICB9LFxuICAgICcyMCc6IHtcbiAgICAgICAgJzAuOTk1JzogNy40MyxcbiAgICAgICAgJzAuOTknOiA4LjI2LFxuICAgICAgICAnMC45NzUnOiA5LjU5LFxuICAgICAgICAnMC45NSc6IDEwLjg1LFxuICAgICAgICAnMC45JzogMTIuNDQsXG4gICAgICAgICcwLjUnOiAxOS4zNCxcbiAgICAgICAgJzAuMSc6IDI4LjQxLFxuICAgICAgICAnMC4wNSc6IDMxLjQxLFxuICAgICAgICAnMC4wMjUnOiAzNC4xNyxcbiAgICAgICAgJzAuMDEnOiAzNy41NyxcbiAgICAgICAgJzAuMDA1JzogNDBcbiAgICB9LFxuICAgICcyMSc6IHtcbiAgICAgICAgJzAuOTk1JzogOC4wMyxcbiAgICAgICAgJzAuOTknOiA4LjksXG4gICAgICAgICcwLjk3NSc6IDEwLjI4LFxuICAgICAgICAnMC45NSc6IDExLjU5LFxuICAgICAgICAnMC45JzogMTMuMjQsXG4gICAgICAgICcwLjUnOiAyMC4zNCxcbiAgICAgICAgJzAuMSc6IDI5LjYyLFxuICAgICAgICAnMC4wNSc6IDMyLjY3LFxuICAgICAgICAnMC4wMjUnOiAzNS40OCxcbiAgICAgICAgJzAuMDEnOiAzOC45MyxcbiAgICAgICAgJzAuMDA1JzogNDEuNFxuICAgIH0sXG4gICAgJzIyJzoge1xuICAgICAgICAnMC45OTUnOiA4LjY0LFxuICAgICAgICAnMC45OSc6IDkuNTQsXG4gICAgICAgICcwLjk3NSc6IDEwLjk4LFxuICAgICAgICAnMC45NSc6IDEyLjM0LFxuICAgICAgICAnMC45JzogMTQuMDQsXG4gICAgICAgICcwLjUnOiAyMS4zNCxcbiAgICAgICAgJzAuMSc6IDMwLjgxLFxuICAgICAgICAnMC4wNSc6IDMzLjkyLFxuICAgICAgICAnMC4wMjUnOiAzNi43OCxcbiAgICAgICAgJzAuMDEnOiA0MC4yOSxcbiAgICAgICAgJzAuMDA1JzogNDIuOFxuICAgIH0sXG4gICAgJzIzJzoge1xuICAgICAgICAnMC45OTUnOiA5LjI2LFxuICAgICAgICAnMC45OSc6IDEwLjIsXG4gICAgICAgICcwLjk3NSc6IDExLjY5LFxuICAgICAgICAnMC45NSc6IDEzLjA5LFxuICAgICAgICAnMC45JzogMTQuODUsXG4gICAgICAgICcwLjUnOiAyMi4zNCxcbiAgICAgICAgJzAuMSc6IDMyLjAxLFxuICAgICAgICAnMC4wNSc6IDM1LjE3LFxuICAgICAgICAnMC4wMjUnOiAzOC4wOCxcbiAgICAgICAgJzAuMDEnOiA0MS42NCxcbiAgICAgICAgJzAuMDA1JzogNDQuMThcbiAgICB9LFxuICAgICcyNCc6IHtcbiAgICAgICAgJzAuOTk1JzogOS44OSxcbiAgICAgICAgJzAuOTknOiAxMC44NixcbiAgICAgICAgJzAuOTc1JzogMTIuNCxcbiAgICAgICAgJzAuOTUnOiAxMy44NSxcbiAgICAgICAgJzAuOSc6IDE1LjY2LFxuICAgICAgICAnMC41JzogMjMuMzQsXG4gICAgICAgICcwLjEnOiAzMy4yLFxuICAgICAgICAnMC4wNSc6IDM2LjQyLFxuICAgICAgICAnMC4wMjUnOiAzOS4zNixcbiAgICAgICAgJzAuMDEnOiA0Mi45OCxcbiAgICAgICAgJzAuMDA1JzogNDUuNTZcbiAgICB9LFxuICAgICcyNSc6IHtcbiAgICAgICAgJzAuOTk1JzogMTAuNTIsXG4gICAgICAgICcwLjk5JzogMTEuNTIsXG4gICAgICAgICcwLjk3NSc6IDEzLjEyLFxuICAgICAgICAnMC45NSc6IDE0LjYxLFxuICAgICAgICAnMC45JzogMTYuNDcsXG4gICAgICAgICcwLjUnOiAyNC4zNCxcbiAgICAgICAgJzAuMSc6IDM0LjI4LFxuICAgICAgICAnMC4wNSc6IDM3LjY1LFxuICAgICAgICAnMC4wMjUnOiA0MC42NSxcbiAgICAgICAgJzAuMDEnOiA0NC4zMSxcbiAgICAgICAgJzAuMDA1JzogNDYuOTNcbiAgICB9LFxuICAgICcyNic6IHtcbiAgICAgICAgJzAuOTk1JzogMTEuMTYsXG4gICAgICAgICcwLjk5JzogMTIuMixcbiAgICAgICAgJzAuOTc1JzogMTMuODQsXG4gICAgICAgICcwLjk1JzogMTUuMzgsXG4gICAgICAgICcwLjknOiAxNy4yOSxcbiAgICAgICAgJzAuNSc6IDI1LjM0LFxuICAgICAgICAnMC4xJzogMzUuNTYsXG4gICAgICAgICcwLjA1JzogMzguODksXG4gICAgICAgICcwLjAyNSc6IDQxLjkyLFxuICAgICAgICAnMC4wMSc6IDQ1LjY0LFxuICAgICAgICAnMC4wMDUnOiA0OC4yOVxuICAgIH0sXG4gICAgJzI3Jzoge1xuICAgICAgICAnMC45OTUnOiAxMS44MSxcbiAgICAgICAgJzAuOTknOiAxMi44OCxcbiAgICAgICAgJzAuOTc1JzogMTQuNTcsXG4gICAgICAgICcwLjk1JzogMTYuMTUsXG4gICAgICAgICcwLjknOiAxOC4xMSxcbiAgICAgICAgJzAuNSc6IDI2LjM0LFxuICAgICAgICAnMC4xJzogMzYuNzQsXG4gICAgICAgICcwLjA1JzogNDAuMTEsXG4gICAgICAgICcwLjAyNSc6IDQzLjE5LFxuICAgICAgICAnMC4wMSc6IDQ2Ljk2LFxuICAgICAgICAnMC4wMDUnOiA0OS42NVxuICAgIH0sXG4gICAgJzI4Jzoge1xuICAgICAgICAnMC45OTUnOiAxMi40NixcbiAgICAgICAgJzAuOTknOiAxMy41NyxcbiAgICAgICAgJzAuOTc1JzogMTUuMzEsXG4gICAgICAgICcwLjk1JzogMTYuOTMsXG4gICAgICAgICcwLjknOiAxOC45NCxcbiAgICAgICAgJzAuNSc6IDI3LjM0LFxuICAgICAgICAnMC4xJzogMzcuOTIsXG4gICAgICAgICcwLjA1JzogNDEuMzQsXG4gICAgICAgICcwLjAyNSc6IDQ0LjQ2LFxuICAgICAgICAnMC4wMSc6IDQ4LjI4LFxuICAgICAgICAnMC4wMDUnOiA1MC45OVxuICAgIH0sXG4gICAgJzI5Jzoge1xuICAgICAgICAnMC45OTUnOiAxMy4xMixcbiAgICAgICAgJzAuOTknOiAxNC4yNixcbiAgICAgICAgJzAuOTc1JzogMTYuMDUsXG4gICAgICAgICcwLjk1JzogMTcuNzEsXG4gICAgICAgICcwLjknOiAxOS43NyxcbiAgICAgICAgJzAuNSc6IDI4LjM0LFxuICAgICAgICAnMC4xJzogMzkuMDksXG4gICAgICAgICcwLjA1JzogNDIuNTYsXG4gICAgICAgICcwLjAyNSc6IDQ1LjcyLFxuICAgICAgICAnMC4wMSc6IDQ5LjU5LFxuICAgICAgICAnMC4wMDUnOiA1Mi4zNFxuICAgIH0sXG4gICAgJzMwJzoge1xuICAgICAgICAnMC45OTUnOiAxMy43OSxcbiAgICAgICAgJzAuOTknOiAxNC45NSxcbiAgICAgICAgJzAuOTc1JzogMTYuNzksXG4gICAgICAgICcwLjk1JzogMTguNDksXG4gICAgICAgICcwLjknOiAyMC42LFxuICAgICAgICAnMC41JzogMjkuMzQsXG4gICAgICAgICcwLjEnOiA0MC4yNixcbiAgICAgICAgJzAuMDUnOiA0My43NyxcbiAgICAgICAgJzAuMDI1JzogNDYuOTgsXG4gICAgICAgICcwLjAxJzogNTAuODksXG4gICAgICAgICcwLjAwNSc6IDUzLjY3XG4gICAgfSxcbiAgICAnNDAnOiB7XG4gICAgICAgICcwLjk5NSc6IDIwLjcxLFxuICAgICAgICAnMC45OSc6IDIyLjE2LFxuICAgICAgICAnMC45NzUnOiAyNC40MyxcbiAgICAgICAgJzAuOTUnOiAyNi41MSxcbiAgICAgICAgJzAuOSc6IDI5LjA1LFxuICAgICAgICAnMC41JzogMzkuMzQsXG4gICAgICAgICcwLjEnOiA1MS44MSxcbiAgICAgICAgJzAuMDUnOiA1NS43NixcbiAgICAgICAgJzAuMDI1JzogNTkuMzQsXG4gICAgICAgICcwLjAxJzogNjMuNjksXG4gICAgICAgICcwLjAwNSc6IDY2Ljc3XG4gICAgfSxcbiAgICAnNTAnOiB7XG4gICAgICAgICcwLjk5NSc6IDI3Ljk5LFxuICAgICAgICAnMC45OSc6IDI5LjcxLFxuICAgICAgICAnMC45NzUnOiAzMi4zNixcbiAgICAgICAgJzAuOTUnOiAzNC43NixcbiAgICAgICAgJzAuOSc6IDM3LjY5LFxuICAgICAgICAnMC41JzogNDkuMzMsXG4gICAgICAgICcwLjEnOiA2My4xNyxcbiAgICAgICAgJzAuMDUnOiA2Ny41LFxuICAgICAgICAnMC4wMjUnOiA3MS40MixcbiAgICAgICAgJzAuMDEnOiA3Ni4xNSxcbiAgICAgICAgJzAuMDA1JzogNzkuNDlcbiAgICB9LFxuICAgICc2MCc6IHtcbiAgICAgICAgJzAuOTk1JzogMzUuNTMsXG4gICAgICAgICcwLjk5JzogMzcuNDgsXG4gICAgICAgICcwLjk3NSc6IDQwLjQ4LFxuICAgICAgICAnMC45NSc6IDQzLjE5LFxuICAgICAgICAnMC45JzogNDYuNDYsXG4gICAgICAgICcwLjUnOiA1OS4zMyxcbiAgICAgICAgJzAuMSc6IDc0LjQsXG4gICAgICAgICcwLjA1JzogNzkuMDgsXG4gICAgICAgICcwLjAyNSc6IDgzLjMsXG4gICAgICAgICcwLjAxJzogODguMzgsXG4gICAgICAgICcwLjAwNSc6IDkxLjk1XG4gICAgfSxcbiAgICAnNzAnOiB7XG4gICAgICAgICcwLjk5NSc6IDQzLjI4LFxuICAgICAgICAnMC45OSc6IDQ1LjQ0LFxuICAgICAgICAnMC45NzUnOiA0OC43NixcbiAgICAgICAgJzAuOTUnOiA1MS43NCxcbiAgICAgICAgJzAuOSc6IDU1LjMzLFxuICAgICAgICAnMC41JzogNjkuMzMsXG4gICAgICAgICcwLjEnOiA4NS41MyxcbiAgICAgICAgJzAuMDUnOiA5MC41MyxcbiAgICAgICAgJzAuMDI1JzogOTUuMDIsXG4gICAgICAgICcwLjAxJzogMTAwLjQyLFxuICAgICAgICAnMC4wMDUnOiAxMDQuMjJcbiAgICB9LFxuICAgICc4MCc6IHtcbiAgICAgICAgJzAuOTk1JzogNTEuMTcsXG4gICAgICAgICcwLjk5JzogNTMuNTQsXG4gICAgICAgICcwLjk3NSc6IDU3LjE1LFxuICAgICAgICAnMC45NSc6IDYwLjM5LFxuICAgICAgICAnMC45JzogNjQuMjgsXG4gICAgICAgICcwLjUnOiA3OS4zMyxcbiAgICAgICAgJzAuMSc6IDk2LjU4LFxuICAgICAgICAnMC4wNSc6IDEwMS44OCxcbiAgICAgICAgJzAuMDI1JzogMTA2LjYzLFxuICAgICAgICAnMC4wMSc6IDExMi4zMyxcbiAgICAgICAgJzAuMDA1JzogMTE2LjMyXG4gICAgfSxcbiAgICAnOTAnOiB7XG4gICAgICAgICcwLjk5NSc6IDU5LjIsXG4gICAgICAgICcwLjk5JzogNjEuNzUsXG4gICAgICAgICcwLjk3NSc6IDY1LjY1LFxuICAgICAgICAnMC45NSc6IDY5LjEzLFxuICAgICAgICAnMC45JzogNzMuMjksXG4gICAgICAgICcwLjUnOiA4OS4zMyxcbiAgICAgICAgJzAuMSc6IDEwNy41NyxcbiAgICAgICAgJzAuMDUnOiAxMTMuMTQsXG4gICAgICAgICcwLjAyNSc6IDExOC4xNCxcbiAgICAgICAgJzAuMDEnOiAxMjQuMTIsXG4gICAgICAgICcwLjAwNSc6IDEyOC4zXG4gICAgfSxcbiAgICAnMTAwJzoge1xuICAgICAgICAnMC45OTUnOiA2Ny4zMyxcbiAgICAgICAgJzAuOTknOiA3MC4wNixcbiAgICAgICAgJzAuOTc1JzogNzQuMjIsXG4gICAgICAgICcwLjk1JzogNzcuOTMsXG4gICAgICAgICcwLjknOiA4Mi4zNixcbiAgICAgICAgJzAuNSc6IDk5LjMzLFxuICAgICAgICAnMC4xJzogMTE4LjUsXG4gICAgICAgICcwLjA1JzogMTI0LjM0LFxuICAgICAgICAnMC4wMjUnOiAxMjkuNTYsXG4gICAgICAgICcwLjAxJzogMTM1LjgxLFxuICAgICAgICAnMC4wMDUnOiAxNDAuMTdcbiAgICB9XG59O1xuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFRoZSBbz4cyIChDaGktU3F1YXJlZCkgR29vZG5lc3Mtb2YtRml0IFRlc3RdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR29vZG5lc3Nfb2ZfZml0I1BlYXJzb24uMjdzX2NoaS1zcXVhcmVkX3Rlc3QpXG4gKiB1c2VzIGEgbWVhc3VyZSBvZiBnb29kbmVzcyBvZiBmaXQgd2hpY2ggaXMgdGhlIHN1bSBvZiBkaWZmZXJlbmNlcyBiZXR3ZWVuIG9ic2VydmVkIGFuZCBleHBlY3RlZCBvdXRjb21lIGZyZXF1ZW5jaWVzXG4gKiAodGhhdCBpcywgY291bnRzIG9mIG9ic2VydmF0aW9ucyksIGVhY2ggc3F1YXJlZCBhbmQgZGl2aWRlZCBieSB0aGUgbnVtYmVyIG9mIG9ic2VydmF0aW9ucyBleHBlY3RlZCBnaXZlbiB0aGVcbiAqIGh5cG90aGVzaXplZCBkaXN0cmlidXRpb24uIFRoZSByZXN1bHRpbmcgz4cyIHN0YXRpc3RpYywgYGNoaVNxdWFyZWRgLCBjYW4gYmUgY29tcGFyZWQgdG8gdGhlIGNoaS1zcXVhcmVkIGRpc3RyaWJ1dGlvblxuICogdG8gZGV0ZXJtaW5lIHRoZSBnb29kbmVzcyBvZiBmaXQuIEluIG9yZGVyIHRvIGRldGVybWluZSB0aGUgZGVncmVlcyBvZiBmcmVlZG9tIG9mIHRoZSBjaGktc3F1YXJlZCBkaXN0cmlidXRpb24sIG9uZVxuICogdGFrZXMgdGhlIHRvdGFsIG51bWJlciBvZiBvYnNlcnZlZCBmcmVxdWVuY2llcyBhbmQgc3VidHJhY3RzIHRoZSBudW1iZXIgb2YgZXN0aW1hdGVkIHBhcmFtZXRlcnMuIFRoZSB0ZXN0IHN0YXRpc3RpY1xuICogZm9sbG93cywgYXBwcm94aW1hdGVseSwgYSBjaGktc3F1YXJlIGRpc3RyaWJ1dGlvbiB3aXRoIChrIOKIkiBjKSBkZWdyZWVzIG9mIGZyZWVkb20gd2hlcmUgYGtgIGlzIHRoZSBudW1iZXIgb2Ygbm9uLWVtcHR5XG4gKiBjZWxscyBhbmQgYGNgIGlzIHRoZSBudW1iZXIgb2YgZXN0aW1hdGVkIHBhcmFtZXRlcnMgZm9yIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBkYXRhXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXN0cmlidXRpb25UeXBlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcG9pbnQgaW4gYSBkaXN0cmlidXRpb246XG4gKiBmb3IgaW5zdGFuY2UsIGJpbm9taWFsLCBiZXJub3VsbGksIG9yIHBvaXNzb25cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaWduaWZpY2FuY2VcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGNoaSBzcXVhcmVkIGdvb2RuZXNzIG9mIGZpdFxuICogQGV4YW1wbGVcbiAqIC8vIERhdGEgZnJvbSBQb2lzc29uIGdvb2RuZXNzLW9mLWZpdCBleGFtcGxlIDEwLTE5IGluIFdpbGxpYW0gVy4gSGluZXMgJiBEb3VnbGFzIEMuIE1vbnRnb21lcnksXG4gKiAvLyBcIlByb2JhYmlsaXR5IGFuZCBTdGF0aXN0aWNzIGluIEVuZ2luZWVyaW5nIGFuZCBNYW5hZ2VtZW50IFNjaWVuY2VcIiwgV2lsZXkgKDE5ODApLlxuICogdmFyIGRhdGExMDE5ID0gW1xuICogICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsXG4gKiAgICAgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCxcbiAqICAgICAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLCAxLFxuICogICAgIDIsIDIsIDIsIDIsIDIsIDIsIDIsIDIsIDIsXG4gKiAgICAgMywgMywgMywgM1xuICogXTtcbiAqIHNzLmNoaVNxdWFyZWRHb29kbmVzc09mRml0KGRhdGExMDE5LCBzcy5wb2lzc29uRGlzdHJpYnV0aW9uLCAwLjA1KTsgLy89IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGNoaVNxdWFyZWRHb29kbmVzc09mRml0KFxuICAgIGRhdGEvKjogQXJyYXk8bnVtYmVyPiAqLyxcbiAgICBkaXN0cmlidXRpb25UeXBlLyo6IEZ1bmN0aW9uICovLFxuICAgIHNpZ25pZmljYW5jZS8qOiBudW1iZXIgKi8pLyo6IGJvb2xlYW4gKi8ge1xuICAgIC8vIEVzdGltYXRlIGZyb20gdGhlIHNhbXBsZSBkYXRhLCBhIHdlaWdodGVkIG1lYW4uXG4gICAgdmFyIGlucHV0TWVhbiA9IG1lYW4oZGF0YSksXG4gICAgICAgIC8vIENhbGN1bGF0ZWQgdmFsdWUgb2YgdGhlIM+HMiBzdGF0aXN0aWMuXG4gICAgICAgIGNoaVNxdWFyZWQgPSAwLFxuICAgICAgICAvLyBEZWdyZWVzIG9mIGZyZWVkb20sIGNhbGN1bGF0ZWQgYXMgKG51bWJlciBvZiBjbGFzcyBpbnRlcnZhbHMgLVxuICAgICAgICAvLyBudW1iZXIgb2YgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbiBwYXJhbWV0ZXJzIGVzdGltYXRlZCAtIDEpXG4gICAgICAgIGRlZ3JlZXNPZkZyZWVkb20sXG4gICAgICAgIC8vIE51bWJlciBvZiBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uIHBhcmFtZXRlcnMgZXN0aW1hdGVkLCBleHBlY3RlZCB0byBiZSBzdXBwbGllZCBpbiB0aGUgZGlzdHJpYnV0aW9uIHRlc3QuXG4gICAgICAgIC8vIExvc2Ugb25lIGRlZ3JlZSBvZiBmcmVlZG9tIGZvciBlc3RpbWF0aW5nIGBsYW1iZGFgIGZyb20gdGhlIHNhbXBsZSBkYXRhLlxuICAgICAgICBjID0gMSxcbiAgICAgICAgLy8gVGhlIGh5cG90aGVzaXplZCBkaXN0cmlidXRpb24uXG4gICAgICAgIC8vIEdlbmVyYXRlIHRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgICAgICBoeXBvdGhlc2l6ZWREaXN0cmlidXRpb24gPSBkaXN0cmlidXRpb25UeXBlKGlucHV0TWVhbiksXG4gICAgICAgIG9ic2VydmVkRnJlcXVlbmNpZXMgPSBbXSxcbiAgICAgICAgZXhwZWN0ZWRGcmVxdWVuY2llcyA9IFtdLFxuICAgICAgICBrO1xuXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IGhvbGRpbmcgYSBoaXN0b2dyYW0gZnJvbSB0aGUgc2FtcGxlIGRhdGEsIG9mXG4gICAgLy8gdGhlIGZvcm0gYHsgdmFsdWU6IG51bWJlck9mT2N1cnJlbmNlcyB9YFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAob2JzZXJ2ZWRGcmVxdWVuY2llc1tkYXRhW2ldXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYnNlcnZlZEZyZXF1ZW5jaWVzW2RhdGFbaV1dID0gMDtcbiAgICAgICAgfVxuICAgICAgICBvYnNlcnZlZEZyZXF1ZW5jaWVzW2RhdGFbaV1dKys7XG4gICAgfVxuXG4gICAgLy8gVGhlIGhpc3RvZ3JhbSB3ZSBjcmVhdGVkIG1pZ2h0IGJlIHNwYXJzZSAtIHRoZXJlIG1pZ2h0IGJlIGdhcHNcbiAgICAvLyBiZXR3ZWVuIHZhbHVlcy4gU28gd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBoaXN0b2dyYW0sIG1ha2luZ1xuICAgIC8vIHN1cmUgdGhhdCBpbnN0ZWFkIG9mIHVuZGVmaW5lZCwgZ2FwcyBoYXZlIDAgdmFsdWVzLlxuICAgIGZvciAoaSA9IDA7IGkgPCBvYnNlcnZlZEZyZXF1ZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChvYnNlcnZlZEZyZXF1ZW5jaWVzW2ldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9ic2VydmVkRnJlcXVlbmNpZXNbaV0gPSAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IGhvbGRpbmcgYSBoaXN0b2dyYW0gb2YgZXhwZWN0ZWQgZGF0YSBnaXZlbiB0aGVcbiAgICAvLyBzYW1wbGUgc2l6ZSBhbmQgaHlwb3RoZXNpemVkIGRpc3RyaWJ1dGlvbi5cbiAgICBmb3IgKGsgaW4gaHlwb3RoZXNpemVkRGlzdHJpYnV0aW9uKSB7XG4gICAgICAgIGlmIChrIGluIG9ic2VydmVkRnJlcXVlbmNpZXMpIHtcbiAgICAgICAgICAgIGV4cGVjdGVkRnJlcXVlbmNpZXNbK2tdID0gaHlwb3RoZXNpemVkRGlzdHJpYnV0aW9uW2tdICogZGF0YS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXb3JraW5nIGJhY2t3YXJkIHRocm91Z2ggdGhlIGV4cGVjdGVkIGZyZXF1ZW5jaWVzLCBjb2xsYXBzZSBjbGFzc2VzXG4gICAgLy8gaWYgbGVzcyB0aGFuIHRocmVlIG9ic2VydmF0aW9ucyBhcmUgZXhwZWN0ZWQgZm9yIGEgY2xhc3MuXG4gICAgLy8gVGhpcyB0cmFuc2Zvcm1hdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSBvYnNlcnZlZCBmcmVxdWVuY2llcyBhcyB3ZWxsLlxuICAgIGZvciAoayA9IGV4cGVjdGVkRnJlcXVlbmNpZXMubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcbiAgICAgICAgaWYgKGV4cGVjdGVkRnJlcXVlbmNpZXNba10gPCAzKSB7XG4gICAgICAgICAgICBleHBlY3RlZEZyZXF1ZW5jaWVzW2sgLSAxXSArPSBleHBlY3RlZEZyZXF1ZW5jaWVzW2tdO1xuICAgICAgICAgICAgZXhwZWN0ZWRGcmVxdWVuY2llcy5wb3AoKTtcblxuICAgICAgICAgICAgb2JzZXJ2ZWRGcmVxdWVuY2llc1trIC0gMV0gKz0gb2JzZXJ2ZWRGcmVxdWVuY2llc1trXTtcbiAgICAgICAgICAgIG9ic2VydmVkRnJlcXVlbmNpZXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJdGVyYXRlIHRocm91Z2ggdGhlIHNxdWFyZWQgZGlmZmVyZW5jZXMgYmV0d2VlbiBvYnNlcnZlZCAmIGV4cGVjdGVkXG4gICAgLy8gZnJlcXVlbmNpZXMsIGFjY3VtdWxhdGluZyB0aGUgYGNoaVNxdWFyZWRgIHN0YXRpc3RpYy5cbiAgICBmb3IgKGsgPSAwOyBrIDwgb2JzZXJ2ZWRGcmVxdWVuY2llcy5sZW5ndGg7IGsrKykge1xuICAgICAgICBjaGlTcXVhcmVkICs9IE1hdGgucG93KFxuICAgICAgICAgICAgb2JzZXJ2ZWRGcmVxdWVuY2llc1trXSAtIGV4cGVjdGVkRnJlcXVlbmNpZXNba10sIDIpIC9cbiAgICAgICAgICAgIGV4cGVjdGVkRnJlcXVlbmNpZXNba107XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGRlZ3JlZXMgb2YgZnJlZWRvbSBmb3IgdGhpcyB0ZXN0IGFuZCBsb29rIGl0IHVwIGluIHRoZVxuICAgIC8vIGBjaGlTcXVhcmVkRGlzdHJpYnV0aW9uVGFibGVgIGluIG9yZGVyIHRvXG4gICAgLy8gYWNjZXB0IG9yIHJlamVjdCB0aGUgZ29vZG5lc3Mtb2YtZml0IG9mIHRoZSBoeXBvdGhlc2l6ZWQgZGlzdHJpYnV0aW9uLlxuICAgIGRlZ3JlZXNPZkZyZWVkb20gPSBvYnNlcnZlZEZyZXF1ZW5jaWVzLmxlbmd0aCAtIGMgLSAxO1xuICAgIHJldHVybiBjaGlTcXVhcmVkRGlzdHJpYnV0aW9uVGFibGVbZGVncmVlc09mRnJlZWRvbV1bc2lnbmlmaWNhbmNlXSA8IGNoaVNxdWFyZWQ7XG59XG5cbi8qIEBmbG93ICovXG5cbnZhciBTUVJUXzJQSSA9IE1hdGguc3FydCgyICogTWF0aC5QSSk7XG5cbi8qKlxuICogW1dlbGwta25vd24ga2VybmVsc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvS2VybmVsXyhzdGF0aXN0aWNzKSNLZXJuZWxfZnVuY3Rpb25zX2luX2NvbW1vbl91c2UpXG4gKiBAcHJpdmF0ZVxuICovXG52YXIga2VybmVscyAvKjoge1tzdHJpbmddOiAobnVtYmVyKSA9PiBudW1iZXJ9ICovID0ge1xuICAgIC8qKlxuICAgICAqIFRoZSBnYXVzc2lhbiBrZXJuZWwuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBnYXVzc2lhbjogZnVuY3Rpb24gKHUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZXhwKC0wLjUgKiB1ICogdSkgLyBTUVJUXzJQSTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFdlbGwga25vd24gYmFuZHdpZHRoIHNlbGVjdGlvbiBtZXRob2RzXG4gKiBAcHJpdmF0ZVxuICovXG52YXIgYmFuZHdpZHRoTWV0aG9kcyAvKjoge1tzdHJpbmddOiAoQXJyYXk8bnVtYmVyPikgPT4gbnVtYmVyfSAqLyA9IHtcbiAgICAvKipcbiAgICAgKiBUaGUgW1wibm9ybWFsIHJlZmVyZW5jZSBkaXN0cmlidXRpb25cIlxuICAgICAqIHJ1bGUtb2YtdGh1bWJdKGh0dHBzOi8vc3RhdC5ldGh6LmNoL1ItbWFudWFsL1ItZGV2ZWwvbGlicmFyeS9NQVNTL2h0bWwvYmFuZHdpZHRoLm5yZC5odG1sKSxcbiAgICAgKiBhIGNvbW1vbmx5IHVzZWQgdmVyc2lvbiBvZiBbU2lsdmVybWFuJ3NcbiAgICAgKiBydWxlLW9mLXRodW1iXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9LZXJuZWxfZGVuc2l0eV9lc3RpbWF0aW9uI0FfcnVsZS1vZi10aHVtYl9iYW5kd2lkdGhfZXN0aW1hdG9yKS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG5yZDogZnVuY3Rpb24gKHggLyo6IEFycmF5PG51bWJlcj4gKi8pIHtcbiAgICAgICAgdmFyIHMgPSBzYW1wbGVTdGFuZGFyZERldmlhdGlvbih4KTtcbiAgICAgICAgdmFyIGlxciA9IGludGVycXVhcnRpbGVSYW5nZSh4KTtcbiAgICAgICAgaWYgKHR5cGVvZiBpcXIgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBzID0gTWF0aC5taW4ocywgaXFyIC8gMS4zNCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDEuMDYgKiBzICogTWF0aC5wb3coeC5sZW5ndGgsIC0wLjIpO1xuICAgIH1cbn07XG5cbi8qKlxuICogW0tlcm5lbCBkZW5zaXR5IGVzdGltYXRpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0tlcm5lbF9kZW5zaXR5X2VzdGltYXRpb24pXG4gKiBpcyBhIHVzZWZ1bCB0b29sIGZvciwgYW1vbmcgb3RoZXIgdGhpbmdzLCBlc3RpbWF0aW5nIHRoZSBzaGFwZSBvZiB0aGVcbiAqIHVuZGVybHlpbmcgcHJvYmFiaWxpdHkgZGlzdHJpYnV0aW9uIGZyb20gYSBzYW1wbGUuXG4gKlxuICogQG5hbWUga2VybmVsRGVuc2l0eUVzdGltYXRpb25cbiAqIEBwYXJhbSBYIHNhbXBsZSB2YWx1ZXNcbiAqIEBwYXJhbSBrZXJuZWwgVGhlIGtlcm5lbCBmdW5jdGlvbiB0byB1c2UuIElmIGEgZnVuY3Rpb24gaXMgcHJvdmlkZWQsIGl0IHNob3VsZCByZXR1cm4gbm9uLW5lZ2F0aXZlIHZhbHVlcyBhbmQgaW50ZWdyYXRlIHRvIDEuIERlZmF1bHRzIHRvICdnYXVzc2lhbicuXG4gKiBAcGFyYW0gYmFuZHdpZHRoTWV0aG9kIFRoZSBcImJhbmR3aWR0aCBzZWxlY3Rpb25cIiBtZXRob2QgdG8gdXNlLCBvciBhIGZpeGVkIGJhbmR3aWR0aCB2YWx1ZS4gRGVmYXVsdHMgdG8gXCJucmRcIiwgdGhlIGNvbW1vbmx5LXVzZWQgW1wibm9ybWFsIHJlZmVyZW5jZSBkaXN0cmlidXRpb25cIiBydWxlLW9mLXRodW1iXShodHRwczovL3N0YXQuZXRoei5jaC9SLW1hbnVhbC9SLWRldmVsL2xpYnJhcnkvTUFTUy9odG1sL2JhbmR3aWR0aC5ucmQuaHRtbCkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEFuIGVzdGltYXRlZCBbcHJvYmFiaWxpdHkgZGVuc2l0eSBmdW5jdGlvbl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJvYmFiaWxpdHlfZGVuc2l0eV9mdW5jdGlvbikgZm9yIHRoZSBnaXZlbiBzYW1wbGUuIFRoZSByZXR1cm5lZCBmdW5jdGlvbiBydW5zIGluIGBPKFgubGVuZ3RoKWAuXG4gKi9cbmZ1bmN0aW9uIGtlcm5lbERlbnNpdHlFc3RpbWF0aW9uKFxuICAgIFggLyo6IEFycmF5PG51bWJlcj4gKi8sXG4gICAga2VybmVsIC8qOiAkS2V5czx0eXBlb2Yga2VybmVscz4gfCAoKG51bWJlcikgPT4gbnVtYmVyKSB8IHZvaWQqLyxcbiAgICBiYW5kd2lkdGhNZXRob2QgLyo6ICRLZXlzPHR5cGVvZiBiYW5kd2lkdGhNZXRob2RzPiB8IG51bWJlciB8IHZvaWQqL1xuKSB7XG4gICAgdmFyIGtlcm5lbEZuLyo6IChudW1iZXIpID0+IG51bWJlciAqLztcbiAgICBpZiAoa2VybmVsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2VybmVsRm4gPSBrZXJuZWxzLmdhdXNzaWFuO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGtlcm5lbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKCFrZXJuZWxzW2tlcm5lbF0pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBrZXJuZWwgXCInICsga2VybmVsICsgJ1wiJyk7XG4gICAgICAgIH1cbiAgICAgICAga2VybmVsRm4gPSBrZXJuZWxzW2tlcm5lbF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAga2VybmVsRm4gPSBrZXJuZWw7XG4gICAgfVxuXG4gICAgdmFyIGJhbmR3aWR0aDtcbiAgICBpZiAodHlwZW9mIGJhbmR3aWR0aE1ldGhvZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYmFuZHdpZHRoID0gYmFuZHdpZHRoTWV0aG9kcy5ucmQoWCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYmFuZHdpZHRoTWV0aG9kID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoIWJhbmR3aWR0aE1ldGhvZHNbYmFuZHdpZHRoTWV0aG9kXSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGJhbmR3aWR0aCBtZXRob2QgXCInICsgYmFuZHdpZHRoTWV0aG9kICsgJ1wiJyk7XG4gICAgICAgIH1cbiAgICAgICAgYmFuZHdpZHRoID0gYmFuZHdpZHRoTWV0aG9kc1tiYW5kd2lkdGhNZXRob2RdKFgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJhbmR3aWR0aCA9IGJhbmR3aWR0aE1ldGhvZDtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHggLyo6IG51bWJlciovKSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIHN1bSA9IDA7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBYLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBzdW0gKz0ga2VybmVsRm4oKHggLSBYW2ldKSAvIGJhbmR3aWR0aCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1bSAvIGJhbmR3aWR0aCAvIFgubGVuZ3RoO1xuICAgIH1cbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBUaGUgW1otU2NvcmUsIG9yIFN0YW5kYXJkIFNjb3JlXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N0YW5kYXJkX3Njb3JlKS5cbiAqXG4gKiBUaGUgc3RhbmRhcmQgc2NvcmUgaXMgdGhlIG51bWJlciBvZiBzdGFuZGFyZCBkZXZpYXRpb25zIGFuIG9ic2VydmF0aW9uXG4gKiBvciBkYXR1bSBpcyBhYm92ZSBvciBiZWxvdyB0aGUgbWVhbi4gVGh1cywgYSBwb3NpdGl2ZSBzdGFuZGFyZCBzY29yZVxuICogcmVwcmVzZW50cyBhIGRhdHVtIGFib3ZlIHRoZSBtZWFuLCB3aGlsZSBhIG5lZ2F0aXZlIHN0YW5kYXJkIHNjb3JlXG4gKiByZXByZXNlbnRzIGEgZGF0dW0gYmVsb3cgdGhlIG1lYW4uIEl0IGlzIGEgZGltZW5zaW9ubGVzcyBxdWFudGl0eVxuICogb2J0YWluZWQgYnkgc3VidHJhY3RpbmcgdGhlIHBvcHVsYXRpb24gbWVhbiBmcm9tIGFuIGluZGl2aWR1YWwgcmF3XG4gKiBzY29yZSBhbmQgdGhlbiBkaXZpZGluZyB0aGUgZGlmZmVyZW5jZSBieSB0aGUgcG9wdWxhdGlvbiBzdGFuZGFyZFxuICogZGV2aWF0aW9uLlxuICpcbiAqIFRoZSB6LXNjb3JlIGlzIG9ubHkgZGVmaW5lZCBpZiBvbmUga25vd3MgdGhlIHBvcHVsYXRpb24gcGFyYW1ldGVycztcbiAqIGlmIG9uZSBvbmx5IGhhcyBhIHNhbXBsZSBzZXQsIHRoZW4gdGhlIGFuYWxvZ291cyBjb21wdXRhdGlvbiB3aXRoXG4gKiBzYW1wbGUgbWVhbiBhbmQgc2FtcGxlIHN0YW5kYXJkIGRldmlhdGlvbiB5aWVsZHMgdGhlXG4gKiBTdHVkZW50J3MgdC1zdGF0aXN0aWMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBtZWFuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhbmRhcmREZXZpYXRpb25cbiAqIEByZXR1cm4ge251bWJlcn0geiBzY29yZVxuICogQGV4YW1wbGVcbiAqIHpTY29yZSg3OCwgODAsIDUpOyAvLyA9PiAtMC40XG4gKi9cbmZ1bmN0aW9uIHpTY29yZSh4Lyo6bnVtYmVyKi8sIG1lYW4vKjpudW1iZXIqLywgc3RhbmRhcmREZXZpYXRpb24vKjpudW1iZXIqLykvKjpudW1iZXIqLyB7XG4gICAgcmV0dXJuICh4IC0gbWVhbikgLyBzdGFuZGFyZERldmlhdGlvbjtcbn1cblxuLyogQGZsb3cgKi9cblxudmFyIFNRUlRfMlBJJDEgPSBNYXRoLnNxcnQoMiAqIE1hdGguUEkpO1xuXG5mdW5jdGlvbiBjdW11bGF0aXZlRGlzdHJpYnV0aW9uKHopIHtcbiAgICB2YXIgc3VtID0geixcbiAgICAgICAgdG1wID0gejtcblxuICAgIC8vIDE1IGl0ZXJhdGlvbnMgYXJlIGVub3VnaCBmb3IgNC1kaWdpdCBwcmVjaXNpb25cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDE1OyBpKyspIHtcbiAgICAgICAgdG1wICo9IHogKiB6IC8gKDIgKiBpICsgMSk7XG4gICAgICAgIHN1bSArPSB0bXA7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnJvdW5kKCgwLjUgKyAoc3VtIC8gU1FSVF8yUEkkMSkgKiBNYXRoLmV4cCgteiAqIHogLyAyKSkgKiAxZTQpIC8gMWU0O1xufVxuXG4vKipcbiAqIEEgc3RhbmRhcmQgbm9ybWFsIHRhYmxlLCBhbHNvIGNhbGxlZCB0aGUgdW5pdCBub3JtYWwgdGFibGUgb3IgWiB0YWJsZSxcbiAqIGlzIGEgbWF0aGVtYXRpY2FsIHRhYmxlIGZvciB0aGUgdmFsdWVzIG9mIM6mIChwaGkpLCB3aGljaCBhcmUgdGhlIHZhbHVlcyBvZlxuICogdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIGZ1bmN0aW9uIG9mIHRoZSBub3JtYWwgZGlzdHJpYnV0aW9uLlxuICogSXQgaXMgdXNlZCB0byBmaW5kIHRoZSBwcm9iYWJpbGl0eSB0aGF0IGEgc3RhdGlzdGljIGlzIG9ic2VydmVkIGJlbG93LFxuICogYWJvdmUsIG9yIGJldHdlZW4gdmFsdWVzIG9uIHRoZSBzdGFuZGFyZCBub3JtYWwgZGlzdHJpYnV0aW9uLCBhbmQgYnlcbiAqIGV4dGVuc2lvbiwgYW55IG5vcm1hbCBkaXN0cmlidXRpb24uXG4gKlxuICogVGhlIHByb2JhYmlsaXRpZXMgYXJlIGNhbGN1bGF0ZWQgdXNpbmcgdGhlXG4gKiBbQ3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gZnVuY3Rpb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL05vcm1hbF9kaXN0cmlidXRpb24jQ3VtdWxhdGl2ZV9kaXN0cmlidXRpb25fZnVuY3Rpb24pLlxuICogVGhlIHRhYmxlIHVzZWQgaXMgdGhlIGN1bXVsYXRpdmUsIGFuZCBub3QgY3VtdWxhdGl2ZSBmcm9tIDAgdG8gbWVhblxuICogKGV2ZW4gdGhvdWdoIHRoZSBsYXR0ZXIgaGFzIDUgZGlnaXRzIHByZWNpc2lvbiwgaW5zdGVhZCBvZiA0KS5cbiAqL1xudmFyIHN0YW5kYXJkTm9ybWFsVGFibGUvKjogQXJyYXk8bnVtYmVyPiAqLyA9IFtdO1xuXG5mb3IgKHZhciB6ID0gMDsgeiA8PSAzLjA5OyB6ICs9IDAuMDEpIHtcbiAgICBzdGFuZGFyZE5vcm1hbFRhYmxlLnB1c2goY3VtdWxhdGl2ZURpc3RyaWJ1dGlvbih6KSk7XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogKipbQ3VtdWxhdGl2ZSBTdGFuZGFyZCBOb3JtYWwgUHJvYmFiaWxpdHldKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3RhbmRhcmRfbm9ybWFsX3RhYmxlKSoqXG4gKlxuICogU2luY2UgcHJvYmFiaWxpdHkgdGFibGVzIGNhbm5vdCBiZVxuICogcHJpbnRlZCBmb3IgZXZlcnkgbm9ybWFsIGRpc3RyaWJ1dGlvbiwgYXMgdGhlcmUgYXJlIGFuIGluZmluaXRlIHZhcmlldHlcbiAqIG9mIG5vcm1hbCBkaXN0cmlidXRpb25zLCBpdCBpcyBjb21tb24gcHJhY3RpY2UgdG8gY29udmVydCBhIG5vcm1hbCB0byBhXG4gKiBzdGFuZGFyZCBub3JtYWwgYW5kIHRoZW4gdXNlIHRoZSBzdGFuZGFyZCBub3JtYWwgdGFibGUgdG8gZmluZCBwcm9iYWJpbGl0aWVzLlxuICpcbiAqIFlvdSBjYW4gdXNlIGAuNSArIC41ICogZXJyb3JGdW5jdGlvbih4IC8gTWF0aC5zcXJ0KDIpKWAgdG8gY2FsY3VsYXRlIHRoZSBwcm9iYWJpbGl0eVxuICogaW5zdGVhZCBvZiBsb29raW5nIGl0IHVwIGluIGEgdGFibGUuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHpcbiAqIEByZXR1cm5zIHtudW1iZXJ9IGN1bXVsYXRpdmUgc3RhbmRhcmQgbm9ybWFsIHByb2JhYmlsaXR5XG4gKi9cbmZ1bmN0aW9uIGN1bXVsYXRpdmVTdGROb3JtYWxQcm9iYWJpbGl0eSh6IC8qOm51bWJlciAqLykvKjpudW1iZXIgKi8ge1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGlzIHZhbHVlLlxuICAgIHZhciBhYnNaID0gTWF0aC5hYnMoeiksXG4gICAgICAgIC8vIEVhY2ggcm93IGJlZ2lucyB3aXRoIGEgZGlmZmVyZW50XG4gICAgICAgIC8vIHNpZ25pZmljYW50IGRpZ2l0OiAwLjUsIDAuNiwgMC43LCBhbmQgc28gb24uIEVhY2ggdmFsdWUgaW4gdGhlIHRhYmxlXG4gICAgICAgIC8vIGNvcnJlc3BvbmRzIHRvIGEgcmFuZ2Ugb2YgMC4wMSBpbiB0aGUgaW5wdXQgdmFsdWVzLCBzbyB0aGUgdmFsdWUgaXNcbiAgICAgICAgLy8gbXVsdGlwbGllZCBieSAxMDAuXG4gICAgICAgIGluZGV4ID0gTWF0aC5taW4oTWF0aC5yb3VuZChhYnNaICogMTAwKSwgc3RhbmRhcmROb3JtYWxUYWJsZS5sZW5ndGggLSAxKTtcblxuICAgIC8vIFRoZSBpbmRleCB3ZSBjYWxjdWxhdGUgbXVzdCBiZSBpbiB0aGUgdGFibGUgYXMgYSBwb3NpdGl2ZSB2YWx1ZSxcbiAgICAvLyBidXQgd2Ugc3RpbGwgcGF5IGF0dGVudGlvbiB0byB3aGV0aGVyIHRoZSBpbnB1dCBpcyBwb3NpdGl2ZVxuICAgIC8vIG9yIG5lZ2F0aXZlLCBhbmQgZmxpcCB0aGUgb3V0cHV0IHZhbHVlIGFzIGEgbGFzdCBzdGVwLlxuICAgIGlmICh6ID49IDApIHtcbiAgICAgICAgcmV0dXJuIHN0YW5kYXJkTm9ybWFsVGFibGVbaW5kZXhdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGR1ZSB0byBmbG9hdGluZy1wb2ludCBhcml0aG1ldGljLCB2YWx1ZXMgaW4gdGhlIHRhYmxlIHdpdGhcbiAgICAgICAgLy8gNCBzaWduaWZpY2FudCBmaWd1cmVzIGNhbiBuZXZlcnRoZWxlc3MgZW5kIHVwIGFzIHJlcGVhdGluZ1xuICAgICAgICAvLyBmcmFjdGlvbnMgd2hlbiB0aGV5J3JlIGNvbXB1dGVkIGhlcmUuXG4gICAgICAgIHJldHVybiArKDEgLSBzdGFuZGFyZE5vcm1hbFRhYmxlW2luZGV4XSkudG9GaXhlZCg0KTtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogKipbR2F1c3NpYW4gZXJyb3IgZnVuY3Rpb25dKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXJyb3JfZnVuY3Rpb24pKipcbiAqXG4gKiBUaGUgYGVycm9yRnVuY3Rpb24oeC8oc2QgKiBNYXRoLnNxcnQoMikpKWAgaXMgdGhlIHByb2JhYmlsaXR5IHRoYXQgYSB2YWx1ZSBpbiBhXG4gKiBub3JtYWwgZGlzdHJpYnV0aW9uIHdpdGggc3RhbmRhcmQgZGV2aWF0aW9uIHNkIGlzIHdpdGhpbiB4IG9mIHRoZSBtZWFuLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIG51bWVyaWNhbCBhcHByb3hpbWF0aW9uIHRvIHRoZSBleGFjdCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBpbnB1dFxuICogQHJldHVybiB7bnVtYmVyfSBlcnJvciBlc3RpbWF0aW9uXG4gKiBAZXhhbXBsZVxuICogZXJyb3JGdW5jdGlvbigxKS50b0ZpeGVkKDIpOyAvLyA9PiAnMC44NCdcbiAqL1xuZnVuY3Rpb24gZXJyb3JGdW5jdGlvbih4Lyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcbiAgICB2YXIgdCA9IDEgLyAoMSArIDAuNSAqIE1hdGguYWJzKHgpKTtcbiAgICB2YXIgdGF1ID0gdCAqIE1hdGguZXhwKC1NYXRoLnBvdyh4LCAyKSAtXG4gICAgICAgIDEuMjY1NTEyMjMgK1xuICAgICAgICAxLjAwMDAyMzY4ICogdCArXG4gICAgICAgIDAuMzc0MDkxOTYgKiBNYXRoLnBvdyh0LCAyKSArXG4gICAgICAgIDAuMDk2Nzg0MTggKiBNYXRoLnBvdyh0LCAzKSAtXG4gICAgICAgIDAuMTg2Mjg4MDYgKiBNYXRoLnBvdyh0LCA0KSArXG4gICAgICAgIDAuMjc4ODY4MDcgKiBNYXRoLnBvdyh0LCA1KSAtXG4gICAgICAgIDEuMTM1MjAzOTggKiBNYXRoLnBvdyh0LCA2KSArXG4gICAgICAgIDEuNDg4NTE1ODcgKiBNYXRoLnBvdyh0LCA3KSAtXG4gICAgICAgIDAuODIyMTUyMjMgKiBNYXRoLnBvdyh0LCA4KSArXG4gICAgICAgIDAuMTcwODcyNzcgKiBNYXRoLnBvdyh0LCA5KSk7XG4gICAgaWYgKHggPj0gMCkge1xuICAgICAgICByZXR1cm4gMSAtIHRhdTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGF1IC0gMTtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIEludmVyc2UgW0dhdXNzaWFuIGVycm9yIGZ1bmN0aW9uXShodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Vycm9yX2Z1bmN0aW9uKVxuICogcmV0dXJucyBhIG51bWVyaWNhbCBhcHByb3hpbWF0aW9uIHRvIHRoZSB2YWx1ZSB0aGF0IHdvdWxkIGhhdmUgY2F1c2VkXG4gKiBgZXJyb3JGdW5jdGlvbigpYCB0byByZXR1cm4geC5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCB2YWx1ZSBvZiBlcnJvciBmdW5jdGlvblxuICogQHJldHVybnMge251bWJlcn0gZXN0aW1hdGVkIGludmVydGVkIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGludmVyc2VFcnJvckZ1bmN0aW9uKHgvKjogbnVtYmVyICovKS8qOiBudW1iZXIgKi8ge1xuICAgIHZhciBhID0gKDggKiAoTWF0aC5QSSAtIDMpKSAvICgzICogTWF0aC5QSSAqICg0IC0gTWF0aC5QSSkpO1xuXG4gICAgdmFyIGludiA9IE1hdGguc3FydChNYXRoLnNxcnQoXG4gICAgICAgIE1hdGgucG93KDIgLyAoTWF0aC5QSSAqIGEpICsgTWF0aC5sb2coMSAtIHggKiB4KSAvIDIsIDIpIC1cbiAgICAgICAgTWF0aC5sb2coMSAtIHggKiB4KSAvIGEpIC1cbiAgICAgICAgKDIgLyAoTWF0aC5QSSAqIGEpICsgTWF0aC5sb2coMSAtIHggKiB4KSAvIDIpKTtcblxuICAgIGlmICh4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGludjtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gLWludjtcbiAgICB9XG59XG5cbi8qIEBmbG93ICovXG5cbi8qKlxuICogVGhlIFtQcm9iaXRdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUHJvYml0KVxuICogaXMgdGhlIGludmVyc2Ugb2YgY3VtdWxhdGl2ZVN0ZE5vcm1hbFByb2JhYmlsaXR5KCksXG4gKiBhbmQgaXMgYWxzbyBrbm93biBhcyB0aGUgbm9ybWFsIHF1YW50aWxlIGZ1bmN0aW9uLlxuICpcbiAqIEl0IHJldHVybnMgdGhlIG51bWJlciBvZiBzdGFuZGFyZCBkZXZpYXRpb25zIGZyb20gdGhlIG1lYW5cbiAqIHdoZXJlIHRoZSBwJ3RoIHF1YW50aWxlIG9mIHZhbHVlcyBjYW4gYmUgZm91bmQgaW4gYSBub3JtYWwgZGlzdHJpYnV0aW9uLlxuICogU28sIGZvciBleGFtcGxlLCBwcm9iaXQoMC41ICsgMC42ODI3LzIpIOKJiCAxIGJlY2F1c2UgNjguMjclIG9mIHZhbHVlcyBhcmVcbiAqIG5vcm1hbGx5IGZvdW5kIHdpdGhpbiAxIHN0YW5kYXJkIGRldmlhdGlvbiBhYm92ZSBvciBiZWxvdyB0aGUgbWVhbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gcFxuICogQHJldHVybnMge251bWJlcn0gcHJvYml0XG4gKi9cbmZ1bmN0aW9uIHByb2JpdChwIC8qOiBudW1iZXIgKi8pLyo6IG51bWJlciAqLyB7XG4gICAgaWYgKHAgPT09IDApIHtcbiAgICAgICAgcCA9IGVwc2lsb247XG4gICAgfSBlbHNlIGlmIChwID49IDEpIHtcbiAgICAgICAgcCA9IDEgLSBlcHNpbG9uO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5zcXJ0KDIpICogaW52ZXJzZUVycm9yRnVuY3Rpb24oMiAqIHAgLSAxKTtcbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBDb25kdWN0cyBhIFtwZXJtdXRhdGlvbiB0ZXN0XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SZXNhbXBsaW5nXyhzdGF0aXN0aWNzKSNQZXJtdXRhdGlvbl90ZXN0cylcbiAqIHRvIGRldGVybWluZSBpZiB0d28gZGF0YSBzZXRzIGFyZSAqc2lnbmlmaWNhbnRseSogZGlmZmVyZW50IGZyb20gZWFjaCBvdGhlciwgdXNpbmdcbiAqIHRoZSBkaWZmZXJlbmNlIG9mIG1lYW5zIGJldHdlZW4gdGhlIGdyb3VwcyBhcyB0aGUgdGVzdCBzdGF0aXN0aWMuIFxuICogVGhlIGZ1bmN0aW9uIGFsbG93cyBmb3IgdGhlIGZvbGxvd2luZyBoeXBvdGhlc2VzOlxuICogLSB0d29fdGFpbCA9IE51bGwgaHlwb3RoZXNpczogdGhlIHR3byBkaXN0cmlidXRpb25zIGFyZSBlcXVhbC5cbiAqIC0gZ3JlYXRlciA9IE51bGwgaHlwb3RoZXNpczogb2JzZXJ2YXRpb25zIGZyb20gc2FtcGxlWCB0ZW5kIHRvIGJlIHNtYWxsZXIgdGhhbiB0aG9zZSBmcm9tIHNhbXBsZVkuXG4gKiAtIGxlc3MgPSBOdWxsIGh5cG90aGVzaXM6IG9ic2VydmF0aW9ucyBmcm9tIHNhbXBsZVggdGVuZCB0byBiZSBncmVhdGVyIHRoYW4gdGhvc2UgZnJvbSBzYW1wbGVZLlxuICogW0xlYXJuIG1vcmUgYWJvdXQgb25lLXRhaWwgdnMgdHdvLXRhaWwgdGVzdHMuXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9PbmUtX2FuZF90d28tdGFpbGVkX3Rlc3RzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2FtcGxlWCBmaXJzdCBkYXRhc2V0IChlLmcuIHRyZWF0bWVudCBkYXRhKVxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzYW1wbGVZIHNlY29uZCBkYXRhc2V0IChlLmcuIGNvbnRyb2wgZGF0YSlcbiAqIEBwYXJhbSB7c3RyaW5nfSBhbHRlcm5hdGl2ZSBhbHRlcm5hdGl2ZSBoeXBvdGhlc2lzLCBlaXRoZXIgJ3R3b19zaWRlZCcgKGRlZmF1bHQpLCAnZ3JlYXRlcicsIG9yICdsZXNzJ1xuICogQHBhcmFtIHtudW1iZXJ9IGsgbnVtYmVyIG9mIHZhbHVlcyBpbiBwZXJtdXRhdGlvbiBkaXN0cmlidXRpb24uIFxuICogQHJldHVybnMge251bWJlcn0gcC12YWx1ZSBUaGUgcHJvYmFiaWxpdHkgb2Ygb2JzZXJ2aW5nIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gZ3JvdXBzIChhcyBvciBtb3JlIGV4dHJlbWUgdGhhbiB3aGF0IHdlIGRpZCksIGFzc3VtaW5nIHRoZSBudWxsIGh5cG90aGVzaXMuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBjb250cm9sID0gWzIsIDUsIDMsIDYsIDcsIDIsIDVdO1xuICogdmFyIHRyZWF0bWVudCA9IFsyMCwgNSwgMTMsIDEyLCA3LCAyLCAyXTtcbiAqIHBlcm11dGF0aW9uVGVzdChjb250cm9sLCB0cmVhdG1lbnQpOyAvLyB+MC4xMzI0IFxuICovXG5mdW5jdGlvbiBwZXJtdXRhdGlvblRlc3QoXG4gICAgc2FtcGxlWC8qOiBBcnJheTxudW1iZXI+ICovLFxuICAgIHNhbXBsZVkvKjogQXJyYXk8bnVtYmVyPiAqLyxcbiAgICBhbHRlcm5hdGl2ZS8qOiBzdHJpbmcgKi8sXG4gICAgay8qOiBudW1iZXIgKi8pLyo6ID9udW1iZXIgKi8ge1xuICAgIC8vIFNldCBkZWZhdWx0IGFyZ3VtZW50c1xuICAgIGlmIChrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgayA9IDEwMDAwO1xuICAgIH1cbiAgICBpZiAoYWx0ZXJuYXRpdmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBhbHRlcm5hdGl2ZSA9ICd0d29fc2lkZSc7XG4gICAgfVxuICAgIGlmIChhbHRlcm5hdGl2ZSAhPT0gJ3R3b19zaWRlJyAmJiBhbHRlcm5hdGl2ZSAhPT0gJ2dyZWF0ZXInICYmIGFsdGVybmF0aXZlICE9PSAnbGVzcycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgYWx0ZXJuYXRpdmVgIG11c3QgYmUgZWl0aGVyIFxcJ3R3b19zaWRlXFwnLCBcXCdncmVhdGVyXFwnLCBvciBcXCdsZXNzXFwnJyk7XG4gICAgfVxuXG4gICAgLy8gaW5pdCBwVmFsdWVcbiAgICB2YXIgcFZhbHVlO1xuXG4gICAgLy8gZ2V0IG1lYW5zIGZvciBlYWNoIHNhbXBsZVxuICAgIHZhciBtZWFuWCA9IG1lYW4oc2FtcGxlWCk7XG4gICAgdmFyIG1lYW5ZID0gbWVhbihzYW1wbGVZKTtcblxuICAgIC8vIGNhbGN1bGF0ZSBpbml0aWFsIHRlc3Qgc3RhdGlzdGljLiBUaGlzIHdpbGwgYmUgb3VyIHBvaW50IG9mIGNvbXBhcmlzb24gd2l0aFxuICAgIC8vIHRoZSBnZW5lcmF0ZWQgdGVzdCBzdGF0aXN0aWNzLlxuICAgIHZhciB0ZXN0U3RhdGlzdGljID0gbWVhblggLSBtZWFuWTtcblxuICAgIC8vIGNyZWF0ZSB0ZXN0LXN0YXRpc3RpYyBkaXN0cmlidXRpb25cbiAgICB2YXIgdGVzdFN0YXREc24gPSBuZXcgQXJyYXkoayk7XG4gICAgXG4gICAgLy8gY29tYmluZSBkYXRzZXRzIHNvIHdlIGNhbiBlYXNpbHkgc2h1ZmZsZSBsYXRlclxuICAgIHZhciBhbGxEYXRhID0gc2FtcGxlWC5jb25jYXQoc2FtcGxlWSk7XG4gICAgdmFyIG1pZEluZGV4ID0gTWF0aC5mbG9vcihhbGxEYXRhLmxlbmd0aCAvIDIpO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgazsgaSsrKSB7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiBzaHVmZmxlIGRhdGEgYXNzaWdubWVudHNcbiAgICAgICAgc2h1ZmZsZUluUGxhY2UoYWxsRGF0YSk7XG4gICAgICAgIHZhciBwZXJtTGVmdCA9IGFsbERhdGEuc2xpY2UoMCwgbWlkSW5kZXgpO1xuICAgICAgICB2YXIgcGVybVJpZ2h0ID0gYWxsRGF0YS5zbGljZShtaWRJbmRleCwgYWxsRGF0YS5sZW5ndGgpO1xuXG4gICAgICAgIC8vIDIucmUtY2FsY3VsYXRlIHRlc3Qgc3RhdGlzdGljXG4gICAgICAgIHZhciBwZXJtVGVzdFN0YXRpc3RpYyA9IG1lYW4ocGVybUxlZnQpIC0gbWVhbihwZXJtUmlnaHQpO1xuXG4gICAgICAgIC8vIDMuIHN0b3JlIHRlc3Qgc3RhdGlzdGljIHRvIGJ1aWxkIHRlc3Qgc3RhdGlzdGljIGRpc3RyaWJ1dGlvblxuICAgICAgICB0ZXN0U3RhdERzbltpXSA9IHBlcm1UZXN0U3RhdGlzdGljO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBwLXZhbHVlIGRlcGVuZGluZyBvbiBhbHRlcm5hdGl2ZVxuICAgIC8vIEZvciB0aGlzIHRlc3QsIHdlIGNhbGN1bGF0ZSB0aGUgcGVyY2VudGFnZSBvZiAnZXh0cmVtZScgdGVzdCBzdGF0aXN0aWNzIChzdWJqZWN0IHRvIG91ciBoeXBvdGhlc2lzKVxuICAgIC8vIG1vcmUgaW5mbyBvbiBwZXJtdXRhdGlvbiB0ZXN0IHAtdmFsdWUgY2FsY3VsYXRpb25zOiBodHRwczovL29ubGluZWNvdXJzZXMuc2NpZW5jZS5wc3UuZWR1L3N0YXQ0NjQvbm9kZS8zNVxuICAgIHZhciBudW1FeHRyZW1lVFN0YXRzID0gMDtcbiAgICBpZiAoYWx0ZXJuYXRpdmUgPT09ICd0d29fc2lkZScpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8PSBrOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh0ZXN0U3RhdERzbltpXSkgPj0gTWF0aC5hYnModGVzdFN0YXRpc3RpYykpIHtcbiAgICAgICAgICAgICAgICBudW1FeHRyZW1lVFN0YXRzICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFsdGVybmF0aXZlID09PSAnZ3JlYXRlcicpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8PSBrOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0ZXN0U3RhdERzbltpXSA+PSB0ZXN0U3RhdGlzdGljKSB7XG4gICAgICAgICAgICAgICAgbnVtRXh0cmVtZVRTdGF0cyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHsgLy8gYWx0ZXJuYXRpdmUgPT09ICdsZXNzJ1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDw9IGs7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRlc3RTdGF0RHNuW2ldIDw9IHRlc3RTdGF0aXN0aWMpIHtcbiAgICAgICAgICAgICAgICBudW1FeHRyZW1lVFN0YXRzICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwVmFsdWUgPSBudW1FeHRyZW1lVFN0YXRzIC8gaztcbiAgICAgICAgICAgIFxuICAgIHJldHVybiBwVmFsdWU7XG4gICAgICAgIFxufVxuXG4vKiBAZmxvdyAqL1xuXG4vKipcbiAqIFtTaWduXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaWduX2Z1bmN0aW9uKSBpcyBhIGZ1bmN0aW9uXG4gKiB0aGF0IGV4dHJhY3RzIHRoZSBzaWduIG9mIGEgcmVhbCBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBpbnB1dCB2YWx1ZVxuICogQHJldHVybnMge251bWJlcn0gc2lnbiB2YWx1ZSBlaXRoZXIgMSwgMCBvciAtMVxuICogQHRocm93cyB7VHlwZUVycm9yfSBpZiB0aGUgaW5wdXQgYXJndW1lbnQgeCBpcyBub3QgYSBudW1iZXJcbiAqIEBwcml2YXRlXG4gKlxuICogQGV4YW1wbGVcbiAqIHNpZ24oMik7IC8vID0+IDFcbiAqL1xuZnVuY3Rpb24gc2lnbih4Lyo6IG51bWJlciAqLykvKjogbnVtYmVyICovIHtcbiAgICBpZiAodHlwZW9mIHggPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICh4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2UgaWYgKHggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ25vdCBhIG51bWJlcicpO1xuICAgIH1cbn1cblxuLyogQGZsb3cgKi9cblxuLyoqXG4gKiBbQmlzZWN0aW9uIG1ldGhvZF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmlzZWN0aW9uX21ldGhvZCkgaXMgYSByb290LWZpbmRpbmdcbiAqIG1ldGhvZCB0aGF0IHJlcGVhdGVkbHkgYmlzZWN0cyBhbiBpbnRlcnZhbCB0byBmaW5kIHRoZSByb290LlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIG51bWVyaWNhbCBhcHByb3hpbWF0aW9uIHRvIHRoZSBleGFjdCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIGlucHV0IGZ1bmN0aW9uXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnQgLSBzdGFydCBvZiBpbnRlcnZhbFxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCAtIGVuZCBvZiBpbnRlcnZhbFxuICogQHBhcmFtIHtudW1iZXJ9IG1heEl0ZXJhdGlvbnMgLSB0aGUgbWF4aW11bSBudW1iZXIgb2YgaXRlcmF0aW9uc1xuICogQHBhcmFtIHtudW1iZXJ9IGVycm9yVG9sZXJhbmNlIC0gdGhlIGVycm9yIHRvbGVyYW5jZVxuICogQHJldHVybnMge251bWJlcn0gZXN0aW1hdGVkIHJvb3QgdmFsdWVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gQXJndW1lbnQgZnVuYyBtdXN0IGJlIGEgZnVuY3Rpb25cbiAqXG4gKiBAZXhhbXBsZVxuICogYmlzZWN0KE1hdGguY29zLDAsNCwxMDAsMC4wMDMpOyAvLyA9PiAxLjU3MjI2NTYyNVxuICovXG5mdW5jdGlvbiBiaXNlY3QoXG4gICAgZnVuYy8qOiAoeDogYW55KSA9PiBudW1iZXIgKi8sXG4gICAgc3RhcnQvKjogbnVtYmVyICovLFxuICAgIGVuZC8qOiBudW1iZXIgKi8sXG4gICAgbWF4SXRlcmF0aW9ucy8qOiBudW1iZXIgKi8sXG4gICAgZXJyb3JUb2xlcmFuY2UvKjogbnVtYmVyICovKS8qOm51bWJlciovIHtcblxuICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcignZnVuYyBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4SXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIHZhciBvdXRwdXQgPSAoc3RhcnQgKyBlbmQpIC8gMjtcblxuICAgICAgICBpZiAoZnVuYyhvdXRwdXQpID09PSAwIHx8IE1hdGguYWJzKChlbmQgLSBzdGFydCkgLyAyKSA8IGVycm9yVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNpZ24oZnVuYyhvdXRwdXQpKSA9PT0gc2lnbihmdW5jKHN0YXJ0KSkpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gb3V0cHV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5kID0gb3V0cHV0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdtYXhpbXVtIG51bWJlciBvZiBpdGVyYXRpb25zIGV4Y2VlZGVkJyk7XG59XG5cbi8qIEBmbG93ICovXG5cbmV4cG9ydCB7IGxpbmVhclJlZ3Jlc3Npb24sIGxpbmVhclJlZ3Jlc3Npb25MaW5lLCBzdGFuZGFyZERldmlhdGlvbiwgclNxdWFyZWQsIG1vZGUsIG1vZGVGYXN0LCBtb2RlU29ydGVkLCBtaW4sIG1heCwgZXh0ZW50LCBtaW5Tb3J0ZWQsIG1heFNvcnRlZCwgZXh0ZW50U29ydGVkLCBzdW0sIHN1bVNpbXBsZSwgcHJvZHVjdCwgcXVhbnRpbGUsIHF1YW50aWxlU29ydGVkLCBxdWFudGlsZVJhbmssIHF1YW50aWxlUmFua1NvcnRlZCwgaW50ZXJxdWFydGlsZVJhbmdlLCBpbnRlcnF1YXJ0aWxlUmFuZ2UgYXMgaXFyLCBtZWRpYW5BYnNvbHV0ZURldmlhdGlvbiwgbWVkaWFuQWJzb2x1dGVEZXZpYXRpb24gYXMgbWFkLCBjaHVuaywgc2FtcGxlV2l0aFJlcGxhY2VtZW50LCBzaHVmZmxlLCBzaHVmZmxlSW5QbGFjZSwgc2FtcGxlLCBja21lYW5zLCB1bmlxdWVDb3VudFNvcnRlZCwgc3VtTnRoUG93ZXJEZXZpYXRpb25zLCBlcXVhbEludGVydmFsQnJlYWtzLCBzYW1wbGVDb3ZhcmlhbmNlLCBzYW1wbGVDb3JyZWxhdGlvbiwgc2FtcGxlVmFyaWFuY2UsIHNhbXBsZVN0YW5kYXJkRGV2aWF0aW9uLCBzYW1wbGVTa2V3bmVzcywgc2FtcGxlS3VydG9zaXMsIHBlcm11dGF0aW9uc0hlYXAsIGNvbWJpbmF0aW9ucywgY29tYmluYXRpb25zUmVwbGFjZW1lbnQsIGFkZFRvTWVhbiwgY29tYmluZU1lYW5zLCBjb21iaW5lVmFyaWFuY2VzLCBnZW9tZXRyaWNNZWFuLCBoYXJtb25pY01lYW4sIG1lYW4gYXMgYXZlcmFnZSwgbWVhbiwgbWVkaWFuLCBtZWRpYW5Tb3J0ZWQsIHN1YnRyYWN0RnJvbU1lYW4sIHJvb3RNZWFuU3F1YXJlLCByb290TWVhblNxdWFyZSBhcyBybXMsIHZhcmlhbmNlLCB0VGVzdCwgdFRlc3RUd29TYW1wbGUsIEJheWVzaWFuQ2xhc3NpZmllciwgQmF5ZXNpYW5DbGFzc2lmaWVyIGFzIGJheWVzaWFuLCBQZXJjZXB0cm9uTW9kZWwsIFBlcmNlcHRyb25Nb2RlbCBhcyBwZXJjZXB0cm9uLCBlcHNpbG9uLCBmYWN0b3JpYWwsIGdhbW1hLCBnYW1tYWxuLCBiZXJub3VsbGlEaXN0cmlidXRpb24sIGJpbm9taWFsRGlzdHJpYnV0aW9uLCBwb2lzc29uRGlzdHJpYnV0aW9uLCBjaGlTcXVhcmVkRGlzdHJpYnV0aW9uVGFibGUsIGNoaVNxdWFyZWRHb29kbmVzc09mRml0LCBrZXJuZWxEZW5zaXR5RXN0aW1hdGlvbiwga2VybmVsRGVuc2l0eUVzdGltYXRpb24gYXMga2RlLCB6U2NvcmUsIGN1bXVsYXRpdmVTdGROb3JtYWxQcm9iYWJpbGl0eSwgc3RhbmRhcmROb3JtYWxUYWJsZSwgZXJyb3JGdW5jdGlvbiwgZXJyb3JGdW5jdGlvbiBhcyBlcmYsIGludmVyc2VFcnJvckZ1bmN0aW9uLCBwcm9iaXQsIHBlcm11dGF0aW9uVGVzdCwgYmlzZWN0LCBxdWlja3NlbGVjdCwgc2lnbiwgbnVtZXJpY1NvcnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpbXBsZS1zdGF0aXN0aWNzLm1qcy5tYXBcbiIsImltcG9ydCB7bWF4fSBmcm9tICdzaW1wbGUtc3RhdGlzdGljcyc7XG5pbXBvcnQge2VxdWFsUG9pbnRzfSBmcm9tIFwiLi9rcnVza2FsLW1zdFwiO1xuXG5leHBvcnQgY2xhc3MgQ2x1bXB5IHtcbiAgICBjb25zdHJ1Y3Rvcih0cmVlKSB7XG4gICAgICAgIC8vQ2xvbmUgdGhlIHRyZWUgdG8gYXZvaWQgbW9kaWZ5aW5nIGl0XG4gICAgICAgIHRoaXMudHJlZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodHJlZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2x1bXB5IHNjb3JlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBzY29yZSgpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbWF4KHRoaXMudHJlZS5saW5rcy5tYXAobGluaz0+MS1tYXhMZW5ndGgocnVudEdyYXBoKGxpbmspKS9saW5rLndlaWdodCkpO1xuICAgICAgICBmdW5jdGlvbiBydW50R3JhcGgobGluayl7XG4gICAgICAgICAgICBsZXQgZ3JlYXRlckxpbmtzID0gc2VsZi50cmVlLmxpbmtzLmZpbHRlcihsPT5sLndlaWdodCA+PSBsaW5rLndlaWdodCk7XG4gICAgICAgICAgICBsZXQgc291cmNlQ29ubmVjdGVkTm9kZXMgPSBbbGluay5zb3VyY2VdO1xuICAgICAgICAgICAgbGV0IHNvdXJjZUNvbm5lY3RlZExpbmtzID0gW107XG4gICAgICAgICAgICBsZXQgdGFyZ2V0Q29ubmVjdGVkTm9kZXMgPSBbbGluay50YXJnZXRdO1xuICAgICAgICAgICAgbGV0IHRhcmdldENvbm5lY3RlZExpbmtzID0gW107XG4gICAgICAgICAgICBncmVhdGVyTGlua3MuZm9yRWFjaChsaW5rPT57XG4gICAgICAgICAgICAgICAgLy9FaXRoZXIgc291cmNlIG9yIHRhcmdldCBpbiB0aGUgc291cmNlQ29ubmVjdGVkTm9kZXMgdGhlbiBpdCBpcyBjb25uZWN0ZWRcbiAgICAgICAgICAgICAgICBpZihwb2ludEV4aXN0cyhzb3VyY2VDb25uZWN0ZWROb2RlcywgbGluay5zb3VyY2UpKXtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlQ29ubmVjdGVkTm9kZXMucHVzaChsaW5rLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvbm5lY3RlZExpbmtzLnB1c2gobGluayk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYocG9pbnRFeGlzdHMoc291cmNlQ29ubmVjdGVkTm9kZXMsIGxpbmsudGFyZ2V0KSl7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZUNvbm5lY3RlZE5vZGVzLnB1c2gobGluay5zb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VDb25uZWN0ZWRMaW5rcy5wdXNoKGxpbmspO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmKHBvaW50RXhpc3RzKHRhcmdldENvbm5lY3RlZE5vZGVzLCBsaW5rLnNvdXJjZSkpe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb25uZWN0ZWROb2Rlcy5wdXNoKGxpbmsudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29ubmVjdGVkTGlua3MucHVzaChsaW5rKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihwb2ludEV4aXN0cyh0YXJnZXRDb25uZWN0ZWROb2RlcywgbGluay50YXJnZXQpKXtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q29ubmVjdGVkTm9kZXMucHVzaChsaW5rLnNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENvbm5lY3RlZExpbmtzLnB1c2gobGluayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlQ29ubmVjdGVkTGlua3MubGVuZ3RoIDwgdGFyZ2V0Q29ubmVjdGVkTGlua3MubGVuZ3RoP3NvdXJjZUNvbm5lY3RlZExpbmtzOnRhcmdldENvbm5lY3RlZExpbmtzO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1heExlbmd0aChydW50R3JhcGgpe1xuICAgICAgICAgICAgcmV0dXJuIG1heChydW50R3JhcGgubWFwKGw9Pmwud2VpZ2h0KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcG9pbnRFeGlzdHMocG9pbnRzLCBwb2ludCl7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHBvaW50MSA9IHBvaW50c1tpXTtcbiAgICAgICAgaWYgKGVxdWFsUG9pbnRzKHBvaW50MSwgcG9pbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59IiwiaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge3F1YW50aWxlfSBmcm9tICdzaW1wbGUtc3RhdGlzdGljcyc7XG5pbXBvcnQge3BvaW50RXhpc3RzfSBmcm9tIFwiLi9jbHVtcHlcIjtcbmltcG9ydCB7bWFrZU5vZGV9IGZyb20gXCIuL2tydXNrYWwtbXN0XCI7XG5cblxuZXhwb3J0IGNsYXNzIE91dGx5aW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0cmVlKSB7XG4gICAgICAgIC8vQ2xvbmUgdGhlIHRyZWUgdG8gYXZvaWQgbW9kaWZ5aW5nIGl0XG4gICAgICAgIHRoaXMudHJlZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodHJlZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgb3V0bHlpbmcgc2NvcmVcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNjb3JlKCkge1xuICAgICAgICBsZXQgdHJlZSA9IHRoaXMudHJlZSxcbiAgICAgICAgICAgIHRvdGFsTGVuZ3RocyA9IDAsXG4gICAgICAgICAgICB0b3RhbE91dGx5aW5nTGVuZ3RocyA9IDAsXG4gICAgICAgICAgICBhbGxMZW5ndGhzID0gdHJlZS5saW5rcy5tYXAobCA9PiBsLndlaWdodCksXG4gICAgICAgICAgICBxMSA9IHF1YW50aWxlKGFsbExlbmd0aHMsIDAuMjUpLFxuICAgICAgICAgICAgcTMgPSBxdWFudGlsZShhbGxMZW5ndGhzLCAwLjc1KSxcbiAgICAgICAgICAgIGlxciA9IHEzIC0gcTE7XG4gICAgICAgIGxldCB1cHBlckJvdW5kID0gcTMrMS41KmlxcjtcbiAgICAgICAgdHJlZS5saW5rcy5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgICAgdG90YWxMZW5ndGhzICs9IGwud2VpZ2h0O1xuICAgICAgICAgICAgaWYgKGwud2VpZ2h0ID4gdXBwZXJCb3VuZCkge1xuICAgICAgICAgICAgICAgIHRvdGFsT3V0bHlpbmdMZW5ndGhzICs9IGwud2VpZ2h0O1xuICAgICAgICAgICAgICAgIGwuaXNPdXRseWluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG90YWxPdXRseWluZ0xlbmd0aHMgLyB0b3RhbExlbmd0aHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBvdXRseWluZyBsaW5rc1xuICAgICAqL1xuICAgIGxpbmtzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmVlLmxpbmtzLmZpbHRlcihsID0+IGwuaXNPdXRseWluZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIG91dGx5aW5nIGxpbmtzIGFuZCBub2RlcyBhbmQgcmV0dXJuIGEgbmV3IHRyZWUgd2l0aG91dCBvdXRseWluZyBwb2ludHMvZWRnZXNcbiAgICAgKi9cbiAgICByZW1vdmVPdXRseWluZygpIHtcbiAgICAgICAgdmFyIG5ld1RyZWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMudHJlZSkpO1xuICAgICAgICAvL1JlbW92ZSBvdXRseWluZyBsaW5rc1xuICAgICAgICBuZXdUcmVlLmxpbmtzID0gbmV3VHJlZS5saW5rcy5maWx0ZXIobCA9PiAhbC5pc091dGx5aW5nKTtcbiAgICAgICAgLy9SZW1vdmUgb3V0bHlpbmcgbm9kZXMgKG5vZGVzIGFyZSBub3QgaW4gYW55IG5vbmUtb3V0bHlpbmcgbGlua3NcbiAgICAgICAgbGV0IGFsbE5vZGVzV2l0aExpbmtzID0gW107XG4gICAgICAgIG5ld1RyZWUubGlua3MuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICAgIGFsbE5vZGVzV2l0aExpbmtzLnB1c2gobC5zb3VyY2UpO1xuICAgICAgICAgICAgYWxsTm9kZXNXaXRoTGlua3MucHVzaChsLnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhbGxOb2Rlc1dpdGhMaW5rcyA9IF8udW5pcShhbGxOb2Rlc1dpdGhMaW5rcywgZmFsc2UsIGQgPT4gZC5qb2luKCcsJykpO1xuICAgICAgICBuZXdUcmVlLm5vZGVzID0gYWxsTm9kZXNXaXRoTGlua3MubWFwKG49PntcbiAgICAgICAgICAgIHJldHVybiBtYWtlTm9kZShuKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXdUcmVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG91dGx5aW5nIHBvaW50cyAoaW4gZm9ybSBvZiBwb2ludHMsIG5vdCBub2RlIG9iamVjdCkuXG4gICAgICogQHJldHVybnMge0FycmF5fVxuICAgICAqL1xuICAgIHBvaW50cygpe1xuICAgICAgICBsZXQgbmV3VHJlZSA9IHRoaXMucmVtb3ZlT3V0bHlpbmcoKTtcbiAgICAgICAgbGV0IG5ld05vZGVzID0gbmV3VHJlZS5ub2RlcztcbiAgICAgICAgbGV0IG9sZE5vZGVzID0gdGhpcy50cmVlLm5vZGVzO1xuICAgICAgICBsZXQgb3BzID0gW107XG4gICAgICAgIG9sZE5vZGVzLmZvckVhY2gobj0+e1xuICAgICAgICAgICAgLy8uaWQgc2luY2Ugd2UgYXJlIGFjY2Vzc2luZyB0byBwb2ludHMgYW5kIHRoZSBub2RlIGlzIGluIGZvcm0gb2Yge2lkOiB0aGVQb2ludH1cbiAgICAgICAgICAgIGlmKCFwb2ludEV4aXN0cyhuZXdOb2Rlcy5tYXAobj0+bi5pZCksIG4uaWQpKXtcbiAgICAgICAgICAgICAgICBvcHMucHVzaChuLmlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvcHM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtxdWFudGlsZX0gZnJvbSAnc2ltcGxlLXN0YXRpc3RpY3MnO1xuXG5leHBvcnQgY2xhc3MgU2tld2VkIHtcbiAgICBjb25zdHJ1Y3Rvcih0cmVlKSB7XG4gICAgICAgIC8vQ2xvbmUgdGhlIHRyZWUgdG8gYXZvaWQgbW9kaWZ5aW5nIGl0XG4gICAgICAgIHRoaXMudHJlZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodHJlZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgc2tld2VkIHNjb3JlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBzY29yZSgpIHtcbiAgICAgICAgbGV0IGFsbExlbmd0aHMgPSB0aGlzLnRyZWUubGlua3MubWFwKGw9Pmwud2VpZ2h0KSxcbiAgICAgICAgcTkwID0gcXVhbnRpbGUoYWxsTGVuZ3RocywgLjkpLFxuICAgICAgICBxNTAgPSBxdWFudGlsZShhbGxMZW5ndGhzLCAuNSksXG4gICAgICAgIHExMCA9IHF1YW50aWxlKGFsbExlbmd0aHMsIC4xKTtcbiAgICAgICAgaWYocTkwIT1xMTApe1xuICAgICAgICAgICAgcmV0dXJuIChxOTAtcTUwKS8ocTkwLXExMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgIH1cbn1cbiIsImltcG9ydCB7cXVhbnRpbGV9IGZyb20gJ3NpbXBsZS1zdGF0aXN0aWNzJztcblxuZXhwb3J0IGNsYXNzIFNwYXJzZSB7XG4gICAgY29uc3RydWN0b3IodHJlZSkge1xuICAgICAgICAvL0Nsb25lIHRoZSB0cmVlIHRvIGF2b2lkIG1vZGlmeWluZyBpdFxuICAgICAgICB0aGlzLnRyZWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRyZWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNwYXJzZSBzY29yZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2NvcmUoKSB7XG4gICAgICAgIGxldCBhbGxMZW5ndGhzID0gdGhpcy50cmVlLmxpbmtzLm1hcChsPT5sLndlaWdodCksXG4gICAgICAgICAgICBxOTAgPSBxdWFudGlsZShhbGxMZW5ndGhzLCAuOSk7XG4gICAgICAgIHJldHVybiBxOTA7XG4gICAgfVxufVxuIiwiaW1wb3J0IHtkaXN0YW5jZSwgZ2V0QWxsVjJDb3JuZXJzRnJvbVRyZWV9IGZyb20gXCIuL2tydXNrYWwtbXN0XCI7XG5cbmV4cG9ydCBjbGFzcyBTdHJpYXRlZCB7XG4gICAgY29uc3RydWN0b3IodHJlZSkge1xuICAgICAgICAvL0Nsb25lIHRoZSB0cmVlIHRvIGF2b2lkIG1vZGlmeWluZyBpdFxuICAgICAgICB0aGlzLnRyZWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRyZWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHN0cmlhdGVkIHNjb3JlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBzY29yZSgpIHtcbiAgICAgICAgLy9Mb29wIHRocm91Z2ggdGhlIG5vZGVzLlxuICAgICAgICBsZXQgdmVydGljZXNDb3VudCA9IHRoaXMudHJlZS5ub2Rlcy5sZW5ndGg7XG4gICAgICAgIGxldCBhbGxPYnR1c2VWMkNvcm5lcnNDb3VudCA9IHRoaXMuZ2V0QWxsT2J0dXNlVjJDb3JuZXJzKCkubGVuZ3RoO1xuICAgICAgICByZXR1cm4gYWxsT2J0dXNlVjJDb3JuZXJzQ291bnQgLyB2ZXJ0aWNlc0NvdW50O1xuICAgIH1cblxuICAgIGdldEFsbE9idHVzZVYyQ29ybmVycygpIHtcbiAgICAgICAgbGV0IGFsbFYyQ29ybmVycyA9IHRoaXMuZ2V0QWxsVjJDb3JuZXJzKCk7XG4gICAgICAgIGxldCBhbGxPYnR1c2VWMkNvcm5lcnMgPSBbXTtcbiAgICAgICAgYWxsVjJDb3JuZXJzLmZvckVhY2goY29ybmVyID0+IHtcbiAgICAgICAgICAgIGxldCBjcyA9IGNvc2luZShjb3JuZXJbMF0sIGNvcm5lclsxXSwgY29ybmVyWzJdKTtcbiAgICAgICAgICAgIGlmIChjcyA8IC0uNzUpIHtcbiAgICAgICAgICAgICAgICBhbGxPYnR1c2VWMkNvcm5lcnMucHVzaChjb3JuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFsbE9idHVzZVYyQ29ybmVycztcblxuICAgICAgICBmdW5jdGlvbiBjb3NpbmUocDEsIHAyLCBwMykge1xuICAgICAgICAgICAgbGV0IHAxMiA9IGRpc3RhbmNlKHAxLCBwMiksXG4gICAgICAgICAgICAgICAgcDEzID0gZGlzdGFuY2UocDEsIHAzKSxcbiAgICAgICAgICAgICAgICBwMjMgPSBkaXN0YW5jZShwMiwgcDMpO1xuICAgICAgICAgICAgcmV0dXJuICgoTWF0aC5wb3cocDEyLCAyKSkgKyAoTWF0aC5wb3cocDEzLCAyKSkgLSAoTWF0aC5wb3cocDIzLCAyKSkpIC8gKDIgKiBwMTIgKiBwMTMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIGNvcm5lcnMgKHRocmVlIHZlcnRpY2VzKSBvZiB2ZXJ0aWNlcyBvZiBkZWdyZWUgdHdvIGluIHRoZSBmb3IgbWF0IG9mXG4gICAgICogcG9pbnQxLCBwb2ludDIsIHBvaW50MyA9PiBwb2ludDEgaXMgdGhlIHRoZSB2ZXJ0ZXggd2l0aCBkZWdyZWUgdHdvICh0d28gZWRnZXMgY29ubmVjdGVkIHRvIGl0IGFyZSBbcG9pbnQxLCBwb2ludDJdIGFuZCBbcG9pbnQxLCBwb2ludDNdIChvcmRlciBvZiB0aGUgcG9pbnRzIGluIGVhY2ggZWRnZSBpcyBub3QgaW1wb3J0YW50KSkuXG4gICAgICovXG4gICAgZ2V0QWxsVjJDb3JuZXJzKCkge1xuICAgICAgICByZXR1cm4gZ2V0QWxsVjJDb3JuZXJzRnJvbVRyZWUodGhpcy50cmVlKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgXyBmcm9tIFwidW5kZXJzY29yZVwiO1xuXG5leHBvcnQgY2xhc3MgQ29uY2F2ZUh1bGx7XG4gICAgY29uc3RydWN0b3IoZGlzdGFuY2Upe1xuICAgICAgICBpZighZGlzdGFuY2Upe1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVEaXN0YW5jZSA9IHRoaXMuc3RkZXZEaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKHR5cGVvZiBkaXN0YW5jZSA9PT0gXCJmdW5jdGlvblwiKXtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgfWVsc2UgaWYodHlwZW9mIGRpc3RhbmNlID09PSBcIm51bWJlclwiKXtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UgPSBmdW5jdGlvbiAoKSB7cmV0dXJuIGRpc3RhbmNlO307XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYWRkaW5nID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZW5lcmF0ZSB0aGUgY29uY2F2ZSBodWxsLlxuICAgICAqIEBwYXJhbSBkZWxhdW5heSBpcyBpbmZvcm0gb2YgY29vcmRpbmF0ZXMgb2YgdHJpYW5ndWxhdGVkIHRyaWFuZ2xlcyAoMyBwb2ludHMgcGVyIHRyaWFuZ2xlKVxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBjb25jYXZlSHVsbChkZWxhdW5heSkge1xuXG4gICAgICAgIGxldCBsb25nRWRnZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoZGVsYXVuYXkpO1xuXG4gICAgICAgIGxldCBtZXNoID0gZGVsYXVuYXkuZmlsdGVyKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICByZXR1cm4gZGlzdGFuY2UoZFswXSwgZFsxXSkgPCBsb25nRWRnZSAmJiBkaXN0YW5jZShkWzBdLCBkWzJdKSA8IGxvbmdFZGdlICYmIGRpc3RhbmNlKGRbMV0sIGRbMl0pIDwgbG9uZ0VkZ2VcbiAgICAgICAgfSlcblxuICAgICAgICB2YXIgY291bnRzID0ge30sXG4gICAgICAgICAgICBlZGdlcyA9IHt9LFxuICAgICAgICAgICAgcixcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAvLyBUcmF2ZXJzZSB0aGUgZWRnZXMgb2YgYWxsIHRyaWFuZ2xlcyBhbmQgZGlzY2FyZCBhbnkgZWRnZXMgdGhhdCBhcHBlYXIgdHdpY2UuXG4gICAgICAgIG1lc2guZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVkZ2UgPSBbdHJpYW5nbGVbaV0sIHRyaWFuZ2xlWyhpICsgMSkgJSAzXV0uc29ydChhc2NlbmRpbmdDb29yZHMpLm1hcChTdHJpbmcpO1xuICAgICAgICAgICAgICAgIChlZGdlc1tlZGdlWzBdXSA9IChlZGdlc1tlZGdlWzBdXSB8fCBbXSkpLnB1c2goZWRnZVsxXSk7XG4gICAgICAgICAgICAgICAgKGVkZ2VzW2VkZ2VbMV1dID0gKGVkZ2VzW2VkZ2VbMV1dIHx8IFtdKSkucHVzaChlZGdlWzBdKTtcbiAgICAgICAgICAgICAgICB2YXIgayA9IGVkZ2Uuam9pbihcIjpcIik7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50c1trXSkgZGVsZXRlIGNvdW50c1trXTtcbiAgICAgICAgICAgICAgICBlbHNlIGNvdW50c1trXSA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgICAgICB2YXIgayA9IG51bGw7XG4gICAgICAgICAgICAvLyBQaWNrIGFuIGFyYml0cmFyeSBzdGFydGluZyBwb2ludCBvbiBhIGJvdW5kYXJ5LlxuICAgICAgICAgICAgZm9yIChrIGluIGNvdW50cykgYnJlYWs7XG4gICAgICAgICAgICBpZiAoayA9PSBudWxsKSBicmVhaztcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHIgPSBrLnNwbGl0KFwiOlwiKS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZC5zcGxpdChcIixcIikubWFwKE51bWJlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBkZWxldGUgY291bnRzW2tdO1xuICAgICAgICAgICAgdmFyIHEgPSByWzFdO1xuICAgICAgICAgICAgd2hpbGUgKHFbMF0gIT09IHJbMF1bMF0gfHwgcVsxXSAhPT0gclswXVsxXSkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gcSxcbiAgICAgICAgICAgICAgICAgICAgcXMgPSBlZGdlc1twLmpvaW4oXCIsXCIpXSxcbiAgICAgICAgICAgICAgICAgICAgbiA9IHFzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBxID0gcXNbaV0uc3BsaXQoXCIsXCIpLm1hcChOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWRnZSA9IFtwLCBxXS5zb3J0KGFzY2VuZGluZ0Nvb3Jkcykuam9pbihcIjpcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudHNbZWRnZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjb3VudHNbZWRnZV07XG4gICAgICAgICAgICAgICAgICAgICAgICByLnB1c2gocSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnBhZGRpbmcgIT09IDApIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHBhZChyZXN1bHQsIHRoaXMucGFkZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgLy9UT0RPOiBNYXkgbmVlZCB0byByZWNvbnNpZGVyIHRoaXMgY2FzZVxuICAgICAgICAvL0lmIGl0IHJldHVybnMgaW4gbW9yZSB0aGFuIG9uZSBzZXQgb2YgZGF0YSA9PiB3ZSBjb21iaW5lIHRoZW0gYW5kIHJldHVybiB0aGUgdW5pcXVlIHJlc3VsdC5cbiAgICAgICAgcmVzdWx0ID0gXy5mbGF0dGVuKHJlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIHJlc3VsdCA9IF8udW5pcShyZXN1bHQsIGZhbHNlLCBkID0+IGQuam9pbignLCcpKTtcbiAgICAgICAgcmV0dXJuIHNvcnRWZXJ0aWNpZXMocmVzdWx0KTtcbiAgICAgICAgZnVuY3Rpb24gc29ydFZlcnRpY2llcyhwb2ludHMpIHtcbiAgICAgICAgICAgIGxldCBjZW50ZXIgPSBmaW5kQ2VudHJvaWQocG9pbnRzKTtcbiAgICAgICAgICAgIHBvaW50cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGExID0gKHRvRGVncmVlcyhNYXRoLmF0YW4yKGFbMF0gLSBjZW50ZXJbMF0sIGFbMV0gLSBjZW50ZXJbMV0pKSArIDM2MCkgJSAzNjA7XG4gICAgICAgICAgICAgICAgbGV0IGEyID0gKHRvRGVncmVlcyhNYXRoLmF0YW4yKGJbMF0gLSBjZW50ZXJbMF0sIGJbMV0gLSBjZW50ZXJbMV0pKSArIDM2MCkgJSAzNjA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoYTEgLSBhMik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgICAgICAgICBmdW5jdGlvbiB0b0RlZ3JlZXMgKGFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFuZ2xlICogKDE4MCAvIE1hdGguUEkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZENlbnRyb2lkKHBvaW50cykge1xuICAgICAgICAgICAgICAgIGxldCB4ID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgeSA9IDA7XG4gICAgICAgICAgICAgICAgcG9pbnRzLmZvckVhY2gocD0+e1xuICAgICAgICAgICAgICAgICAgICB4ICs9IHBbMF07XG4gICAgICAgICAgICAgICAgICAgIHkgKz0gcFsxXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsZXQgY2VudGVyID0gW107XG4gICAgICAgICAgICAgICAgY2VudGVyLnB1c2goeCAvIHBvaW50cy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGNlbnRlci5wdXNoKHkgLyBwb2ludHMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRpc3RhbmNlKGEsIGIpIHtcbiAgICAgICAgICAgIHZhciBkeCA9IGFbMF0gLSBiWzBdLFxuICAgICAgICAgICAgICAgIGR5ID0gYVsxXSAtIGJbMV07XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KChkeCAqIGR4KSArIChkeSAqIGR5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYWQoYm91bmRzLCBhbW91bnQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgICAgIGJvdW5kcy5mb3JFYWNoKGZ1bmN0aW9uIChib3VuZCkge1xuICAgICAgICAgICAgICAgIHZhciBwYWRkZWQgPSBbXTtcblxuICAgICAgICAgICAgICAgIHZhciBhcmVhID0gMDtcbiAgICAgICAgICAgICAgICBib3VuZC5mb3JFYWNoKGZ1bmN0aW9uIChwLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9mb3J1bXMuZXNyaS5jb20vVGhyZWFkLmFzcD9jPTImZj0xNzE4JnQ9MTc0Mjc3XG4gICAgICAgICAgICAgICAgICAgIC8vIEFyZWEgPSBBcmVhICsgKFgyIC0gWDEpICogKFkyICsgWTEpIC8gMlxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbTEgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0xID0gYm91bmQubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcG0gPSBib3VuZFtpbTFdO1xuICAgICAgICAgICAgICAgICAgICBhcmVhICs9IChwWzBdIC0gcG1bMF0pICogKHBbMV0gKyBwbVsxXSkgLyAyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhciBoYW5kZWRuZXNzID0gMTtcbiAgICAgICAgICAgICAgICBpZiAoYXJlYSA+IDApIGhhbmRlZG5lc3MgPSAtMVxuICAgICAgICAgICAgICAgIGJvdW5kLmZvckVhY2goZnVuY3Rpb24gKHAsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXZlcmFnZSB0aGUgdGFuZ2VudCBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbTEgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0xID0gYm91bmQubGVuZ3RoIC0gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL3ZhciB0cCA9IGdldFRhbmdlbnQocCwgYm91bmRbaXAxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bSA9IGdldFRhbmdlbnQocCwgYm91bmRbaW0xXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGF2ZyA9IHsgeDogKHRwLnggKyB0bS54KS8yLCB5OiAodHAueSArIHRtLnkpLzIgfTtcbiAgICAgICAgICAgICAgICAgICAgLy92YXIgbm9ybWFsID0gcm90YXRlMmQoYXZnLCA5MCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub3JtYWwgPSByb3RhdGUyZCh0bSwgOTAgKiBoYW5kZWRuZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGVkLnB1c2goW3BbMF0gKyBub3JtYWwueCAqIGFtb3VudCwgcFsxXSArIG5vcm1hbC55ICogYW1vdW50XSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHBhZGRlZClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRUYW5nZW50KGEsIGIpIHtcbiAgICAgICAgICAgIHZhciB2ZWN0b3IgPSB7eDogYlswXSAtIGFbMF0sIHk6IGJbMV0gLSBhWzFdfVxuICAgICAgICAgICAgdmFyIG1hZ25pdHVkZSA9IE1hdGguc3FydCh2ZWN0b3IueCAqIHZlY3Rvci54ICsgdmVjdG9yLnkgKiB2ZWN0b3IueSk7XG4gICAgICAgICAgICB2ZWN0b3IueCAvPSBtYWduaXR1ZGU7XG4gICAgICAgICAgICB2ZWN0b3IueSAvPSBtYWduaXR1ZGU7XG4gICAgICAgICAgICByZXR1cm4gdmVjdG9yXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByb3RhdGUyZCh2ZWN0b3IsIGFuZ2xlKSB7XG4gICAgICAgICAgICAvL3JvdGF0ZSBhIHZlY3RvclxuICAgICAgICAgICAgYW5nbGUgKj0gTWF0aC5QSSAvIDE4MDsgLy9jb252ZXJ0IHRvIHJhZGlhbnNcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgeDogdmVjdG9yLnggKiBNYXRoLmNvcyhhbmdsZSkgLSB2ZWN0b3IueSAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICB5OiB2ZWN0b3IueCAqIE1hdGguc2luKGFuZ2xlKSArIHZlY3Rvci55ICogTWF0aC5jb3MoYW5nbGUpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhc2NlbmRpbmdDb29yZHMoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGFbMF0gPT09IGJbMF0gPyBiWzFdIC0gYVsxXSA6IGJbMF0gLSBhWzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0ZGV2RGlzdGFuY2UoZGVsYXVuYXkpIHtcbiAgICAgICAgdmFyIHNpZGVzID0gW107XG4gICAgICAgIGRlbGF1bmF5LmZvckVhY2goZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHNpZGVzLnB1c2goZGlzdGFuY2UoZFswXSwgZFsxXSkpO1xuICAgICAgICAgICAgc2lkZXMucHVzaChkaXN0YW5jZShkWzBdLCBkWzJdKSk7XG4gICAgICAgICAgICBzaWRlcy5wdXNoKGRpc3RhbmNlKGRbMV0sIGRbMl0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGRldiA9IGQzLmRldmlhdGlvbihzaWRlcyk7XG4gICAgICAgIHZhciBtZWFuID0gZDMubWVhbihzaWRlcyk7XG5cbiAgICAgICAgcmV0dXJuIG1lYW4gKyBkZXY7XG4gICAgfVxuICAgIHE5MERpc3RhbmNlKGRlbGF1bmF5KXtcblxuICAgIH1cbn1cblxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocG9seWdvbikge1xuICB2YXIgaSA9IC0xLFxuICAgICAgbiA9IHBvbHlnb24ubGVuZ3RoLFxuICAgICAgYSxcbiAgICAgIGIgPSBwb2x5Z29uW24gLSAxXSxcbiAgICAgIGFyZWEgPSAwO1xuXG4gIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgYSA9IGI7XG4gICAgYiA9IHBvbHlnb25baV07XG4gICAgYXJlYSArPSBhWzFdICogYlswXSAtIGFbMF0gKiBiWzFdO1xuICB9XG5cbiAgcmV0dXJuIGFyZWEgLyAyO1xufVxuIiwiLy8gUmV0dXJucyB0aGUgMkQgY3Jvc3MgcHJvZHVjdCBvZiBBQiBhbmQgQUMgdmVjdG9ycywgaS5lLiwgdGhlIHotY29tcG9uZW50IG9mXG4vLyB0aGUgM0QgY3Jvc3MgcHJvZHVjdCBpbiBhIHF1YWRyYW50IEkgQ2FydGVzaWFuIGNvb3JkaW5hdGUgc3lzdGVtICgreCBpc1xuLy8gcmlnaHQsICt5IGlzIHVwKS4gUmV0dXJucyBhIHBvc2l0aXZlIHZhbHVlIGlmIEFCQyBpcyBjb3VudGVyLWNsb2Nrd2lzZSxcbi8vIG5lZ2F0aXZlIGlmIGNsb2Nrd2lzZSwgYW5kIHplcm8gaWYgdGhlIHBvaW50cyBhcmUgY29sbGluZWFyLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYykge1xuICByZXR1cm4gKGJbMF0gLSBhWzBdKSAqIChjWzFdIC0gYVsxXSkgLSAoYlsxXSAtIGFbMV0pICogKGNbMF0gLSBhWzBdKTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHBvbHlnb24pIHtcbiAgdmFyIGkgPSAtMSxcbiAgICAgIG4gPSBwb2x5Z29uLmxlbmd0aCxcbiAgICAgIGIgPSBwb2x5Z29uW24gLSAxXSxcbiAgICAgIHhhLFxuICAgICAgeWEsXG4gICAgICB4YiA9IGJbMF0sXG4gICAgICB5YiA9IGJbMV0sXG4gICAgICBwZXJpbWV0ZXIgPSAwO1xuXG4gIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgeGEgPSB4YjtcbiAgICB5YSA9IHliO1xuICAgIGIgPSBwb2x5Z29uW2ldO1xuICAgIHhiID0gYlswXTtcbiAgICB5YiA9IGJbMV07XG4gICAgeGEgLT0geGI7XG4gICAgeWEgLT0geWI7XG4gICAgcGVyaW1ldGVyICs9IE1hdGguc3FydCh4YSAqIHhhICsgeWEgKiB5YSk7XG4gIH1cblxuICByZXR1cm4gcGVyaW1ldGVyO1xufVxuIiwiaW1wb3J0IHtEZWxhdW5hdG9yfSBmcm9tIFwiLi9kZWxhdW5hdG9yXCI7XG5pbXBvcnQge0NvbmNhdmVIdWxsfSBmcm9tIFwiLi9jb25jYXZlSHVsbFwiO1xuaW1wb3J0IHtxdWFudGlsZX0gZnJvbSAnc2ltcGxlLXN0YXRpc3RpY3MnO1xuaW1wb3J0ICogYXMgcG9seWdvbiBmcm9tICdkMy1wb2x5Z29uJztcbmV4cG9ydCBjbGFzcyBDb252ZXgge1xuICAgIGNvbnN0cnVjdG9yKHRyZWUpIHtcbiAgICAgICAgLy9DbG9uZSB0aGUgdHJlZSB0byBhdm9pZCBtb2RpZnlpbmcgaXRcbiAgICAgICAgdGhpcy50cmVlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0cmVlKSk7XG4gICAgICAgIHRoaXMuZGVsYXVuYXkgPSBEZWxhdW5hdG9yLmZyb20odGhpcy50cmVlLm5vZGVzLm1hcChkID0+IGQuaWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNvbnZleCBzY29yZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2NvcmUoKSB7XG4gICAgICAgIHJldHVybiBwb2x5Z29uLnBvbHlnb25BcmVhKHRoaXMuY29uY2F2ZUh1bGwoKSkvcG9seWdvbi5wb2x5Z29uQXJlYSh0aGlzLmNvbnZleEh1bGwoKSk7XG4gICAgfVxuICAgIGNvbmNhdmVIdWxsKCkge1xuICAgICAgICAvL1VzZSBxOTAgYXMgdGhlIGN1dG9mZiBkaXN0YW5jZS5cbiAgICAgICAgbGV0IGFsbExlbmd0aHMgPSB0aGlzLnRyZWUubGlua3MubWFwKGwgPT4gbC53ZWlnaHQpLFxuICAgICAgICAgICAgcTkwID0gcXVhbnRpbGUoYWxsTGVuZ3RocywgMC45KSxcbiAgICAgICAgICAgIGNvbmNhdmVIdWxsID0gbmV3IENvbmNhdmVIdWxsKHE5MCkuY29uY2F2ZUh1bGwodGhpcy5kZWxhdW5heS50cmlhbmdsZUNvb3JkaW5hdGVzKCkpO1xuICAgICAgICByZXR1cm4gY29uY2F2ZUh1bGw7XG4gICAgfVxuXG4gICAgY29udmV4SHVsbCgpIHtcbiAgICAgICAgbGV0IGh1bGwgPSB0aGlzLmRlbGF1bmF5Lmh1bGw7XG4gICAgICAgIGxldCBjb252ZXhIdWxsID0gW107XG4gICAgICAgIGxldCBlID0gaHVsbDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY29udmV4SHVsbC5wdXNoKFtlLngsIGUueV0pO1xuICAgICAgICAgICAgZSA9IGUubmV4dDtcbiAgICAgICAgfSB3aGlsZSAoZSAhPSBodWxsKTtcbiAgICAgICAgcmV0dXJuIGNvbnZleEh1bGw7XG4gICAgfVxufVxuIiwiaW1wb3J0ICogYXMgcG9seWdvbiBmcm9tICdkMy1wb2x5Z29uJztcbmV4cG9ydCBjbGFzcyBTa2lubnkge1xuICAgIGNvbnN0cnVjdG9yKGFscGhhSHVsbCkge1xuICAgICAgICAvL0Nsb25lIGl0IGluIG9yZGVyIHRvIGF2b2lkIG1vZGlmeWluZyBpdC5cbiAgICAgICAgdGhpcy5hbHBoYUh1bGwgPSBhbHBoYUh1bGwuc2xpY2UoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgc2tpbm55IHNjb3JlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBzY29yZSgpIHtcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLnNxcnQoNCpNYXRoLlBJKnBvbHlnb24ucG9seWdvbkFyZWEodGhpcy5hbHBoYUh1bGwpKS9wb2x5Z29uLnBvbHlnb25MZW5ndGgodGhpcy5hbHBoYUh1bGwpO1xuICAgIH1cbn1cbiIsImltcG9ydCB7Z2V0QWxsVjJDb3JuZXJzRnJvbVRyZWUsIGdldEFsbFYxc0Zyb21UcmVlfSBmcm9tIFwiLi9rcnVza2FsLW1zdFwiO1xuXG5leHBvcnQgY2xhc3MgU3RyaW5neSB7XG4gICAgY29uc3RydWN0b3IodHJlZSkge1xuICAgICAgICAvL0Nsb25lIHRoZSB0cmVlIHRvIGF2b2lkIG1vZGlmeWluZyBpdFxuICAgICAgICB0aGlzLnRyZWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRyZWUpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHN0cmlhdGVkIHNjb3JlXG4gICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAgKi9cbiAgICBzY29yZSgpIHtcbiAgICAgICAgLy9Mb29wIHRocm91Z2ggdGhlIG5vZGVzLlxuICAgICAgICBsZXQgdmVydGljZXNDb3VudCA9IHRoaXMudHJlZS5ub2Rlcy5sZW5ndGg7XG4gICAgICAgIGxldCB2MkNvdW50ID0gdGhpcy5nZXRBbGxWMkNvcm5lcnMoKS5sZW5ndGg7XG4gICAgICAgIGxldCB2MUNvdW50ID0gdGhpcy5nZXRBbGxWMXMoKS5sZW5ndGg7XG4gICAgICAgIHJldHVybiB2MkNvdW50Lyh2ZXJ0aWNlc0NvdW50LXYxQ291bnQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyBjb3JuZXJzICh0aHJlZSB2ZXJ0aWNlcykgb2YgdmVydGljZXMgb2YgZGVncmVlIHR3byBpbiB0aGUgZm9yIG1hdCBvZlxuICAgICAqIHBvaW50MSwgcG9pbnQyLCBwb2ludDMgPT4gcG9pbnQxIGlzIHRoZSB0aGUgdmVydGV4IHdpdGggZGVncmVlIHR3byAodHdvIGVkZ2VzIGNvbm5lY3RlZCB0byBpdCBhcmUgW3BvaW50MSwgcG9pbnQyXSBhbmQgW3BvaW50MSwgcG9pbnQzXSAob3JkZXIgb2YgdGhlIHBvaW50cyBpbiBlYWNoIGVkZ2UgaXMgbm90IGltcG9ydGFudCkpLlxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRBbGxWMkNvcm5lcnMoKXtcbiAgICAgICAgcmV0dXJuIGdldEFsbFYyQ29ybmVyc0Zyb21UcmVlKHRoaXMudHJlZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiByZXR1cm5zXG4gICAgICogQHJldHVybnMge0FycmF5fVxuICAgICAqL1xuICAgIGdldEFsbFYxcygpe1xuICAgICAgICByZXR1cm4gZ2V0QWxsVjFzRnJvbVRyZWUodGhpcy50cmVlKTtcbiAgICB9XG59XG4iLCJleHBvcnQgY2xhc3MgTW9ub3RvbmljIHtcbiAgICBjb25zdHJ1Y3Rvcihwb2ludHMpIHtcbiAgICAgICAgLy9DbG9uZSBpdCBpbiBvcmRlciB0byBhdm9pZCBtb2RpZnlpbmcgaXQuXG4gICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzLnNsaWNlKDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIG1vbm90b25pYyBzY29yZVxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2NvcmUoKSB7XG4gICAgICAgIGxldCB4QXJyID0gW107XG4gICAgICAgIGxldCB5QXJyID0gW107XG4gICAgICAgIHRoaXMucG9pbnRzLmZvckVhY2gocD0+e1xuICAgICAgICAgICAgeEFyci5wdXNoKHBbMF0pO1xuICAgICAgICAgICAgeUFyci5wdXNoKHBbMV0pXG4gICAgICAgIH0pXG4gICAgICAgIGxldCByID0gY29tcHV0ZVNwZWFybWFucyh4QXJyLCB5QXJyKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KHIsIDIpO1xuXG4gICAgICAgIC8qKkFkb3B0ZWQgZnJvbTogaHR0cHM6Ly9ibC5vY2tzLm9yZy9ua3VsbG1hbi9mNjVkNTYxOTg0M2RjMjJlMDYxZDk1NzI0OTEyMTQwOCoqL1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvbXB1dGVTcGVhcm1hbnMoYXJyWCwgYXJyWSkge1xuICAgICAgICAgICAgLy8gc2ltcGxlIGVycm9yIGhhbmRsaW5nIGZvciBpbnB1dCBhcnJheXMgb2Ygbm9uZXF1YWwgbGVuZ3Roc1xuICAgICAgICAgICAgaWYgKGFyclgubGVuZ3RoICE9PSBhcnJZLmxlbmd0aCkgeyByZXR1cm4gbnVsbDsgfVxuXG4gICAgICAgICAgICAvLyBudW1iZXIgb2Ygb2JzZXJ2YXRpb25zXG4gICAgICAgICAgICBsZXQgbiA9IGFyclgubGVuZ3RoO1xuXG4gICAgICAgICAgICAvLyByYW5rIGRhdGFzZXRzXG4gICAgICAgICAgICBsZXQgeFJhbmtlZCA9IHJhbmtBcnJheShhcnJYKSxcbiAgICAgICAgICAgICAgICB5UmFua2VkID0gcmFua0FycmF5KGFyclkpO1xuXG4gICAgICAgICAgICAvLyBzdW0gb2YgZGlzdGFuY2VzIGJldHdlZW4gcmFua3NcbiAgICAgICAgICAgIGxldCBkc3EgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkc3EgKz0gTWF0aC5wb3coeFJhbmtlZFtpXSAtIHlSYW5rZWRbaV0sIDIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBjb21wdXRlIGNvcnJlY3Rpb24gZm9yIHRpZXNcbiAgICAgICAgICAgIGxldCB4VGllcyA9IGNvdW50VGllcyhhcnJYKSxcbiAgICAgICAgICAgICAgICB5VGllcyA9IGNvdW50VGllcyhhcnJZKTtcbiAgICAgICAgICAgIGxldCB4Q29ycmVjdGlvbiA9IDAsXG4gICAgICAgICAgICAgICAgeUNvcnJlY3Rpb24gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdGllTGVuZ3RoIGluIHhUaWVzKSB7XG4gICAgICAgICAgICAgICAgeENvcnJlY3Rpb24gKz0geFRpZXNbdGllTGVuZ3RoXSAqIHRpZUxlbmd0aCAqIChNYXRoLnBvdyh0aWVMZW5ndGgsIDIpIC0gMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHhDb3JyZWN0aW9uIC89IDEyLjA7XG4gICAgICAgICAgICBmb3IgKGxldCB0aWVMZW5ndGggaW4geVRpZXMpIHtcbiAgICAgICAgICAgICAgICB5Q29ycmVjdGlvbiArPSB5VGllc1t0aWVMZW5ndGhdICogdGllTGVuZ3RoICogKE1hdGgucG93KHRpZUxlbmd0aCwgMikgLSAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeUNvcnJlY3Rpb24gLz0gMTIuMDtcblxuICAgICAgICAgICAgLy8gZGVub21pbmF0b3JcbiAgICAgICAgICAgIGxldCBkZW5vbWluYXRvciA9IG4gKiAoTWF0aC5wb3cobiwgMikgLSAxKSAvIDYuMDtcblxuICAgICAgICAgICAgLy8gY29tcHV0ZSByaG9cbiAgICAgICAgICAgIGxldCByaG8gPSBkZW5vbWluYXRvciAtIGRzcSAtIHhDb3JyZWN0aW9uIC0geUNvcnJlY3Rpb247XG4gICAgICAgICAgICByaG8gLz0gTWF0aC5zcXJ0KChkZW5vbWluYXRvciAtIDIgKiB4Q29ycmVjdGlvbikgKiAoZGVub21pbmF0b3IgLSAyICogeUNvcnJlY3Rpb24pKTtcblxuICAgICAgICAgICAgcmV0dXJuIHJobztcbiAgICAgICAgfVxuICAgICAgICAvKiogQ29tcHV0ZXMgdGhlIHJhbmsgYXJyYXkgZm9yIGFyciwgd2hlcmUgZWFjaCBlbnRyeSBpbiBhcnIgaXNcbiAgICAgICAgICogYXNzaWduZWQgYSB2YWx1ZSAxIHRocnUgbiwgd2hlcmUgbiBpcyBhcnIubGVuZ3RoLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaWVkIGVudHJpZXMgaW4gYXJyIGFyZSBlYWNoIGdpdmVuIHRoZSBhdmVyYWdlIHJhbmsgb2YgdGhlIHRpZXMuXG4gICAgICAgICAqIExvd2VyIHJhbmtzIGFyZSBub3QgaW5jcmVhc2VkXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiByYW5rQXJyYXkoYXJyKSB7XG5cbiAgICAgICAgICAgIC8vIHJhbmtpbmcgd2l0aG91dCBhdmVyYWdpbmdcbiAgICAgICAgICAgIGxldCBzb3J0ZWQgPSBhcnIuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiIC0gYSB9KTtcbiAgICAgICAgICAgIGxldCByYW5rcyA9IGFyci5zbGljZSgpLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gc29ydGVkLmluZGV4T2YodikgKyAxIH0pO1xuXG4gICAgICAgICAgICAvLyBjb3VudHMgb2YgZWFjaCByYW5rXG4gICAgICAgICAgICBsZXQgY291bnRzID0ge307XG4gICAgICAgICAgICByYW5rcy5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IGNvdW50c1t4XSA9IChjb3VudHNbeF0gfHwgMCkgKyAxOyB9KTtcblxuICAgICAgICAgICAgLy8gYXZlcmFnZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICByYW5rcyA9IHJhbmtzLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDAuNSAqICgoY291bnRzW3hdIHx8IDApIC0gMSk7IH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmFua3M7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIENvdW50cyB0aGUgbnVtYmVyIG9mIHRpZXMgaW4gYXJyLCBhbmQgcmV0dXJuc1xuICAgICAgICAgKiBhbiBvYmplY3Qgd2l0aFxuICAgICAgICAgKiBhIGtleSBmb3IgZWFjaCB0aWUgbGVuZ3RoIChhbiBlbnRyeSBuIGZvciBlYWNoIG4td2F5IHRpZSkgYW5kXG4gICAgICAgICAqIGEgdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgbnVtYmVyIG9mIGtleS13YXkgKG4td2F5KSB0aWVzXG4gICAgICAgICAqL1xuICAgICAgICAgZnVuY3Rpb24gY291bnRUaWVzKGFycikge1xuICAgICAgICAgICAgbGV0IHRpZXMgPSB7fSxcbiAgICAgICAgICAgICAgICBhcnJTb3J0ZWQgPSBhcnIuc2xpY2UoKS5zb3J0KCksXG4gICAgICAgICAgICAgICAgY3VyclZhbHVlID0gYXJyU29ydGVkWzBdLFxuICAgICAgICAgICAgICAgIHRpZUxlbmd0aCA9IDE7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgYXJyU29ydGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyclNvcnRlZFtpXSA9PT0gY3VyclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZUxlbmd0aCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWVMZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGllc1t0aWVMZW5ndGhdID09PSB1bmRlZmluZWQpIHRpZXNbdGllTGVuZ3RoXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVzW3RpZUxlbmd0aF0rKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyVmFsdWUgPSBhcnJTb3J0ZWRbaV07XG4gICAgICAgICAgICAgICAgICAgIHRpZUxlbmd0aCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpZUxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGllc1t0aWVMZW5ndGhdID09PSB1bmRlZmluZWQpIHRpZXNbdGllTGVuZ3RoXSA9IDA7XG4gICAgICAgICAgICAgICAgdGllc1t0aWVMZW5ndGhdKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGllcztcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7QmlubmVyfSBmcm9tICcuL21vZHVsZXMvYmlubmVyJztcbmltcG9ydCB7RGVsYXVuYXRvcn0gZnJvbSBcIi4vbW9kdWxlcy9kZWxhdW5hdG9yXCI7XG5pbXBvcnQge2NyZWF0ZUdyYXBofSBmcm9tIFwiLi9tb2R1bGVzL2tydXNrYWwtbXN0XCI7XG5pbXBvcnQge21zdH0gZnJvbSBcIi4vbW9kdWxlcy9rcnVza2FsLW1zdFwiO1xuaW1wb3J0IHtPdXRseWluZ30gZnJvbSBcIi4vbW9kdWxlcy9vdXRseWluZ1wiO1xuaW1wb3J0IHtTa2V3ZWR9IGZyb20gXCIuL21vZHVsZXMvc2tld2VkXCI7XG5pbXBvcnQge1NwYXJzZX0gZnJvbSBcIi4vbW9kdWxlcy9zcGFyc2VcIjtcbmltcG9ydCB7Q2x1bXB5fSBmcm9tIFwiLi9tb2R1bGVzL2NsdW1weVwiO1xuaW1wb3J0IHtTdHJpYXRlZH0gZnJvbSBcIi4vbW9kdWxlcy9zdHJpYXRlZFwiO1xuaW1wb3J0IHtDb252ZXh9IGZyb20gXCIuL21vZHVsZXMvY29udmV4XCI7XG5pbXBvcnQge1NraW5ueX0gZnJvbSBcIi4vbW9kdWxlcy9za2lubnlcIjtcbmltcG9ydCB7U3RyaW5neX0gZnJvbSBcIi4vbW9kdWxlcy9zdHJpbmd5XCI7XG5pbXBvcnQge01vbm90b25pY30gZnJvbSBcIi4vbW9kdWxlcy9tb25vdG9uaWNcIjtcblxuKGZ1bmN0aW9uKHdpbmRvdyl7XG4gICAgLyoqXG4gICAgICogaW5pdGlhbGl6ZSBhIHNjYWdub3N0aWMgb2JqZWN0XG4gICAgICogQHBhcmFtIHBvaW50c1xuICAgICAqIEBwYXJhbSB3aWR0aFxuICAgICAqIEBwYXJhbSBoZWlnaHRcbiAgICAgKiBAcGFyYW0gYmlubmluZ1JhZGl1c1xuICAgICAqIEByZXR1cm5zIHsqW11bXX1cbiAgICAgKi9cbiAgICB3aW5kb3cuc2NhZ25vc3RpY3MgPSBmdW5jdGlvbihwb2ludHMsIHdpZHRoLCBoZWlnaHQsIGJpbm5pbmdSYWRpdXMpIHtcbiAgICAgICAgLyoqKioqKlRoaXMgc2VjdGlvbiBpcyBhYm91dCB0aGUgYmlubmVyIGFuZCBiaW5uaW5nIHJlc3VsdHMqKioqKiovXG4gICAgICAgIGxldCBiaW5uZXIgPSBuZXcgQmlubmVyKCkucmFkaXVzKGJpbm5pbmdSYWRpdXMpLmV4dGVudChbWzAsIDBdLCBbd2lkdGgsIGhlaWdodF1dKTtcbiAgICAgICAgLy9DYWxjdWxhdGlvblxuICAgICAgICBsZXQgYmlucyA9IGJpbm5lci5oZXhiaW4ocG9pbnRzKTtcbiAgICAgICAgbGV0IHNpdGVzID0gYmlucy5tYXAoZCA9PiBbZC54LCBkLnldKTsgLy89PnNpdGVzIGFyZSB0aGUgc2V0IG9mIGNlbnRlcnMgb2YgYWxsIGJpbnNcbiAgICAgICAgLy9Bc3NpZ25pbmcgb3V0cHV0IHJlc3VsdHNcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJiaW5uZXJcIiwgYmlubmVyKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJiaW5zXCIsIGJpbnMpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcImJpbm5lZFNpdGVzXCIsIHNpdGVzKTtcblxuICAgICAgICAvKioqKioqVGhpcyBzZWN0aW9uIGlzIGFib3V0IHRoZSB0cmlhbmd1bGF0aW5nIGFuZCB0cmlhbmd1bGF0aW5nIHJlc3VsdHMqKioqKiovXG4gICAgICAgIC8vVHJpYW5ndWxhdGlvbiBjYWxjdWxhdGlvblxuICAgICAgICBsZXQgZGVsYXVuYXkgPSBEZWxhdW5hdG9yLmZyb20oc2l0ZXMpO1xuICAgICAgICBsZXQgdHJpYW5nbGVzID0gZGVsYXVuYXkudHJpYW5nbGVzO1xuICAgICAgICBsZXQgdHJpYW5nbGVDb29yZGluYXRlcyA9IGRlbGF1bmF5LnRyaWFuZ2xlQ29vcmRpbmF0ZXMoKTtcbiAgICAgICAgLy9Bc3NpZ25pbmcgb3V0cHV0IHZhbHVlc1xuICAgICAgICBvdXRwdXRWYWx1ZShcImRlbGF1bmF5XCIsIGRlbGF1bmF5KTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJ0cmlhbmdsZXNcIiwgdHJpYW5nbGVzKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJ0cmlhbmdsZUNvb3JkaW5hdGVzXCIsIHRyaWFuZ2xlQ29vcmRpbmF0ZXMpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIHNwYW5uaW5nIHRyZWUgYW5kIHNwYW5uaW5nIHRyZWUgcmVzdWx0cyoqKioqKi9cbiAgICAgICAgICAgIC8vU3Bhbm5pbmcgdHJlZSBjYWxjdWxhdGlvblxuICAgICAgICBsZXQgZ3JhcGggPSBjcmVhdGVHcmFwaCh0cmlhbmdsZUNvb3JkaW5hdGVzKTtcbiAgICAgICAgbGV0IG1zdHJlZSA9IG1zdChncmFwaCk7XG4gICAgICAgIC8vQXNzaWduaW5nIHRoZSBvdXRwdXQgdmFsdWVzXG4gICAgICAgIG91dHB1dFZhbHVlKFwiZ3JhcGhcIiwgZ3JhcGgpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcIm1zdFwiLCBtc3RyZWUpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIG91dGx5aW5nIHNjb3JlIGFuZCBvdXRseWluZyBzY29yZSByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgb3V0bHlpbmcgPSBuZXcgT3V0bHlpbmcobXN0cmVlKTtcbiAgICAgICAgbGV0IG91dGx5aW5nU2NvcmUgPSBvdXRseWluZy5zY29yZSgpO1xuICAgICAgICBsZXQgb3V0bHlpbmdMaW5rcyA9IG91dGx5aW5nLmxpbmtzKCk7XG4gICAgICAgIGxldCBvdXRseWluZ1BvaW50cyA9IG91dGx5aW5nLnBvaW50cygpO1xuICAgICAgICBsZXQgbm9PdXRseWluZ1RyZWUgPSBvdXRseWluZy5yZW1vdmVPdXRseWluZygpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcIm91dGx5aW5nU2NvcmVcIiwgb3V0bHlpbmdTY29yZSk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwib3V0bHlpbmdMaW5rc1wiLCBvdXRseWluZ0xpbmtzKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJvdXRseWluZ1BvaW50c1wiLCBvdXRseWluZ1BvaW50cyk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwibm9PdXRseWluZ1RyZWVcIiwgbm9PdXRseWluZ1RyZWUpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIHNrZXdlZCBzY29yZSBhbmQgc2tld2VkIHNjb3JlIHJlc3VsdHMqKioqKiovXG4gICAgICAgIGxldCBza2V3ZWQgPSBuZXcgU2tld2VkKG5vT3V0bHlpbmdUcmVlKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJza2V3ZWRTY29yZVwiLCBza2V3ZWQuc2NvcmUoKSk7XG5cbiAgICAgICAgLyoqKioqKlRoaXMgc2VjdGlvbiBpcyBhYm91dCB0aGUgc3BhcnNlIHNjb3JlIGFuZCBzcGFyc2Ugc2NvcmUgcmVzdWx0cyoqKioqKi9cbiAgICAgICAgbGV0IHNwYXJzZSA9IG5ldyBTcGFyc2Uobm9PdXRseWluZ1RyZWUpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcInNwYXJzZVNjb3JlXCIsIHNwYXJzZS5zY29yZSgpKTtcblxuICAgICAgICAvKioqKioqVGhpcyBzZWN0aW9uIGlzIGFib3V0IHRoZSBjbHVtcHkgc2NvcmUgYW5kIGNsdW1weSBzY29yZSByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgY2x1bXB5ID0gbmV3IENsdW1weShub091dGx5aW5nVHJlZSk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwiY2x1bXB5U2NvcmVcIiwgY2x1bXB5LnNjb3JlKCkpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIHN0cmlhdGVkIHNjb3JlIGFuZCBzdHJpYXRlZCBzY29yZSByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgc3RyaWF0ZWQgPSBuZXcgU3RyaWF0ZWQobm9PdXRseWluZ1RyZWUpO1xuICAgICAgICBsZXQgdjJDb3JuZXJzID0gc3RyaWF0ZWQuZ2V0QWxsVjJDb3JuZXJzKCk7XG4gICAgICAgIGxldCBvYnR1c2VWMkNvcm5lcnMgPSBzdHJpYXRlZC5nZXRBbGxPYnR1c2VWMkNvcm5lcnMoKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJzdHJpYXRlZFNjb3JlXCIsIHN0cmlhdGVkLnNjb3JlKCkpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcInYyQ29ybmVyc1wiLCB2MkNvcm5lcnMpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcIm9idHVzZVYyQ29ybmVyc1wiLCBvYnR1c2VWMkNvcm5lcnMpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIGNvbnZleCBodWxsIGFuZCBjb252ZXggaHVsbCByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgY29udmV4ID0gbmV3IENvbnZleChub091dGx5aW5nVHJlZSk7XG4gICAgICAgIGxldCBjb252ZXhIdWxsID0gY29udmV4LmNvbnZleEh1bGwoKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJjb252ZXhIdWxsXCIsIGNvbnZleEh1bGwpO1xuXG4gICAgICAgIC8qKioqKipUaGlzIHNlY3Rpb24gaXMgYWJvdXQgdGhlIGNvbmNhdmUgaHVsbCBhbmQgY29uY2F2ZSBodWxsIHJlc3VsdHMqKioqKiovXG4gICAgICAgIGxldCBjb25jYXZlSHVsbCA9IGNvbnZleC5jb25jYXZlSHVsbCgpO1xuICAgICAgICBvdXRwdXRWYWx1ZShcImNvbmNhdmVIdWxsXCIsIGNvbmNhdmVIdWxsKTtcblxuICAgICAgICAvKioqKioqVGhpcyBzZWN0aW9uIGlzIGFib3V0IHRoZSBjb252ZXggc2NvcmUgYW5kIGNvbnZleCBzY29yZSByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgY29udmV4U2NvcmUgPSBjb252ZXguc2NvcmUoKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJjb252ZXhTY29yZVwiLCBjb252ZXhTY29yZSk7XG5cbiAgICAgICAgLyoqKioqKlRoaXMgc2VjdGlvbiBpcyBhYm91dCB0aGUgc2tpbm55IHNjb3JlIGFuZCBza2lubnkgc2NvcmUgcmVzdWx0cyoqKioqKi9cbiAgICAgICAgbGV0IHNraW5ueSA9IG5ldyBTa2lubnkoY29uY2F2ZUh1bGwpO1xuICAgICAgICBsZXQgc2tpbm55U2NvcmUgPSBza2lubnkuc2NvcmUoKTtcbiAgICAgICAgb3V0cHV0VmFsdWUoXCJza2lubnlTY29yZVwiLCBza2lubnlTY29yZSk7XG5cbiAgICAgICAgLyoqKioqKlRoaXMgc2VjdGlvbiBpcyBhYm91dCB0aGUgc3RyaW5neSBzY29yZSBhbmQgc3RyaW5neSBzY29yZSByZXN1bHRzKioqKioqL1xuICAgICAgICBsZXQgc3RyaW5neSA9IG5ldyBTdHJpbmd5KG5vT3V0bHlpbmdUcmVlKTtcbiAgICAgICAgbGV0IHYxcyA9IHN0cmluZ3kuZ2V0QWxsVjFzKCk7XG4gICAgICAgIGxldCBzdHJpbmd5U2NvcmUgPSBzdHJpbmd5LnNjb3JlKCk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwidjFzXCIsIHYxcyk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwic3RyaW5neVNjb3JlXCIsIHN0cmluZ3lTY29yZSk7XG5cbiAgICAgICAgLyoqKioqKlRoaXMgc2VjdGlvbiBpcyBhYm91dCB0aGUgbW9ub3RvbmljIHNjb3JlIGFuZCBtb25vdG9uaWMgc2NvcmUgcmVzdWx0cyoqKioqKi9cbiAgICAgICAgbGV0IG1vbm90b25pYyA9IG5ldyBNb25vdG9uaWMobm9PdXRseWluZ1RyZWUubm9kZXMubWFwKG49Pm4uaWQpKTtcbiAgICAgICAgbGV0IG1vbm90b25pY1Njb3JlID0gbW9ub3RvbmljLnNjb3JlKCk7XG4gICAgICAgIG91dHB1dFZhbHVlKFwibW9ub3RvbmljU2NvcmVcIiwgbW9ub3RvbmljU2NvcmUpO1xuXG4gICAgICAgIHJldHVybiB3aW5kb3cuc2NhZ25vc3RpY3M7XG4gICAgICAgIGZ1bmN0aW9uIG91dHB1dFZhbHVlKG5hbWUsIHZhbHVlKXtcbiAgICAgICAgICAgIHdpbmRvdy5zY2Fnbm9zdGljc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcblxufSkod2luZG93KTsiXSwibmFtZXMiOlsiZ2xvYmFsIiwiXyIsImRpc3RhbmNlIiwic3dhcCIsImNvbXBhcmUiLCJwb2x5Z29uLnBvbHlnb25BcmVhIiwiaHVsbCIsInBvbHlnb24ucG9seWdvbkxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7O0lBQUE7QUFDQSxJQUFPLFNBQVMsTUFBTSxFQUFFO0lBQ3hCLElBQUksSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNCLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7O0lBRXRFLElBQUksU0FBUyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLFFBQVEsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEIsS0FBSztJQUNMLElBQUksU0FBUyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3RCLFFBQVEsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEIsS0FBSztJQUNMLElBQUksSUFBSSxFQUFFLEdBQUcsQ0FBQztJQUNkLFFBQVEsRUFBRSxHQUFHLENBQUM7SUFDZCxRQUFRLEVBQUUsR0FBRyxDQUFDO0lBQ2QsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNkLFFBQVEsQ0FBQyxHQUFHLE1BQU07SUFDbEIsUUFBUSxDQUFDLEdBQUcsTUFBTTtJQUNsQixRQUFRLENBQUM7SUFDVCxRQUFRLEVBQUU7SUFDVixRQUFRLEVBQUUsQ0FBQzs7SUFFWCxJQUFJLFNBQVMsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUMzQixRQUFRLElBQUksUUFBUSxHQUFHLEVBQUUsRUFBRSxJQUFJLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFB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RyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxFQUFFO0lBQzlFLGdCQUFnQixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDckMsYUFBYTtJQUNiLFNBQVM7SUFDVCxRQUFRLE9BQU8sT0FBTyxDQUFDO0lBQ3ZCLEtBQUssQ0FBQztJQUNOLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxVQUFVO0lBQzFCLFFBQVEsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hELFFBQVEsT0FBTyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsT0FBTyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQy9GLEtBQUssQ0FBQztJQUNOO0lBQ0EsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBQ3hCLFFBQVEsT0FBTyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQztJQUNwRCxNQUFLO0lBQ0wsSUFBSSxJQUFJLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBQ3hCLFFBQVEsT0FBTyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxJQUFJLENBQUMsQ0FBQztJQUNwRCxNQUFLO0lBQ0wsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBQzdCLFFBQVEsT0FBTyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLElBQUksR0FBRyxDQUFDLENBQUM7SUFDL0YsTUFBSztJQUNMLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsRUFBRTtJQUM1QixRQUFRLE9BQU8sU0FBUyxDQUFDLE1BQU0sSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ25HLEtBQUssQ0FBQztJQUNOLElBQUksSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUMsQ0FBQztJQUM3QixRQUFRLE9BQU8sU0FBUyxDQUFDLE1BQU0sSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMzSCxNQUFLOztJQUVMLElBQUksT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFCOztJQ3pHQTtB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RUFBRSxDQUFDLENBQUM7SUFDbkMsUUFBUSxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2QyxRQUFRLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDbkMsUUFBUSxNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQzs7SUFFdkMsUUFBUSxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNsRSxRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUM1QixRQUFRLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQzs7SUFFNUI7SUFDQSxRQUFRLFNBQVMsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFdEU7SUFDQSxRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakQsUUFBUSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztJQUN4QixRQUFRLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDOztJQUV0RTtJQUNBLFFBQVEsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBQ25ELFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQixRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLFFBQVEsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQixRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLFFBQVEsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMxQixRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDOztJQUVoQixRQUFRLE1BQU0sWUFBWSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZDLFFBQVEsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLFdBQVcsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDN0UsUUFBUSxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksVUFBVSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsQ0FBQzs7SUFFNUUsUUFBUSxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQzs7SUFFOUIsUUFBUSxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRWxELFFBQVEsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtJQUNyRCxZQUFZLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixZQUFZLE1BQU0sQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDcEMsWUFBWSxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzs7SUFFeEM7SUFDQSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxFQUFFLFNBQVM7SUFDL0MsWUFBWSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLFlBQVksRUFBRSxHQUFHLENBQUMsQ0FBQzs7SUFFbkI7SUFDQSxZQUFZLElBQUksQ0FBQyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHO0lBQ3ZDLGlCQUFpQixDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUM7SUFDeEMsaUJBQWlCLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxFQUFFLFNBQVM7O0lBRW5EO0lBQ0EsWUFBWSxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNqRCxZQUFZLElBQUksR0FBRyxHQUFHLFFBQVEsQ0FBQztJQUMvQixZQUFZLElBQUksS0FBSyxDQUFDO0lBQ3RCLFlBQVksR0FBRztJQUNmLGdCQUFnQixLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN4QyxnQkFBZ0IsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ2pELGFBQWEsUUFBUSxDQUFDLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPLEtBQUssR0FBRyxLQUFLLFFBQVEsRUFBRTs7SUFFcEUsWUFBWSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ3RCLFlBQVksT0FBTyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDbEUsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQzNCLGdCQUFnQixJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUU7SUFDakMsb0JBQW9CLE1BQU0sSUFBSSxLQUFLLENBQUMsMkNBQTJDLENBQUMsQ0FBQztJQUNqRixpQkFBaUI7SUFDakIsYUFBYTs7SUFFYixZQUFZLE1BQU0sUUFBUSxHQUFHLENBQUMsS0FBSyxLQUFLLENBQUM7O0lBRXpDO0lBQ0EsWUFBWSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7SUFFckUsWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQixZQUFZLENBQUMsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7SUFFekM7SUFDQSxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEMsWUFBWSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQ3BELGdCQUFnQixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0QyxhQUFhOztJQUViO0lBQ0EsWUFBWSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQzNCLFlBQVksT0FBTyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUU7SUFDakUsZ0JBQWdCLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUMzRSxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakQsZ0JBQWdCLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFDLGdCQUFnQixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUMzQixhQUFhOztJQUViLFlBQVksSUFBSSxRQUFRLEVBQUU7SUFDMUI7SUFDQSxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDM0IsZ0JBQWdCLE9BQU8sSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFO0lBQ3JFLG9CQUFvQixDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0Usb0JBQW9CLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzFDLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDakMsb0JBQW9CLElBQUksQ0FBQyxJQUFJLEdBQUcsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzlDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUMvQixpQkFBaUI7SUFDakIsYUFBYTs7SUFFYjtJQUNBLFlBQVksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixZQUFZLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ25DLFNBQVM7O0lBRVQ7SUFDQSxRQUFRLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2xFLFFBQVEsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDbEUsS0FBSzs7SUFFTCxJQUFJLFNBQVMsQ0FBQyxDQUFDLEVBQUU7SUFDakIsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEQsS0FBSzs7SUFFTCxJQUFJLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ25CLFFBQVEsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDaEMsUUFBUSxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNoQztJQUNBO0lBQ0EsUUFBUSxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pELFFBQVEsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUN4RSxLQUFLOztJQUVMLElBQUksU0FBUyxDQUFDLENBQUMsRUFBRTtJQUNqQixRQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsTUFBTSxFQUFFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7SUFFcEQsUUFBUSxNQUFNLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRS9CLFFBQVEsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsUUFBUSxNQUFNLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzs7SUFFN0IsUUFBUSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxRQUFRLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLFFBQVEsTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7O0lBRXBDLFFBQVEsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLFFBQVEsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLFFBQVEsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ2pDLFFBQVEsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDOztJQUVqQyxRQUFRLE1BQU0sT0FBTyxHQUFHLFFBQVE7SUFDaEMsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUM5QyxZQUFZLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzlDLFlBQVksTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDOUMsWUFBWSxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRWhELFFBQVEsSUFBSSxPQUFPLEVBQUU7SUFDckIsWUFBWSxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzlCLFlBQVksU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQzs7SUFFOUIsWUFBWSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN6QyxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pDLFlBQVksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7O0lBRS9CLFlBQVksTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7O0lBRXhDLFlBQVksSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM5QixZQUFZLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0QyxTQUFTOztJQUVULFFBQVEsT0FBTyxFQUFFLENBQUM7SUFDbEIsS0FBSzs7SUFFTCxJQUFJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFO0lBQ2hCLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsUUFBUSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUM1QyxLQUFLOztJQUVMO0lBQ0EsSUFBSSxZQUFZLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUU7SUFDdEMsUUFBUSxNQUFNLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDOztJQUVwQyxRQUFRLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQy9CLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQ25DLFFBQVEsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDOztJQUVuQyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3pCLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdCLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDOztJQUU3QixRQUFRLElBQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxDQUFDOztJQUUvQixRQUFRLE9BQU8sQ0FBQyxDQUFDO0lBQ2pCLEtBQUs7SUFDTCxDQUFDOztJQUVELFNBQVMsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUM5QixJQUFJLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDdkIsSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLElBQUksT0FBTyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDN0IsQ0FBQzs7SUFFRCxTQUFTLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUN0QyxJQUFJLE9BQU8sQ0FBQyxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3pELENBQUM7O0lBRUQsU0FBUyxRQUFRLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtJQUNsRCxJQUFJLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDdkIsSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLElBQUksTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQztJQUN2QixJQUFJLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDdkIsSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxDQUFDO0lBQ3ZCLElBQUksTUFBTSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsQ0FBQzs7SUFFdkIsSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDakMsSUFBSSxNQUFNLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFH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QUFLLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3ZGLFFBQVEsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNqRixRQUFRLElBQUksT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7O0lBRS9FLFFBQVEsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0QixRQUFRLE9BQU8sSUFBSSxFQUFFO0lBQ3JCLFlBQVksR0FBRyxDQUFDLEVBQUUsQ0FBQyxRQUFRLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0lBQ3RFLFlBQVksR0FBRyxDQUFDLEVBQUUsQ0FBQyxRQUFRLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0lBQ3RFLFlBQVksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU07SUFDN0IsWUFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QixTQUFTO0lBQ1QsUUFBUSxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxH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QUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3BELE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztPQUN0QixDQUFDOzs7TUFHRixDQUFDLENBQUMsSUFBSSxHQUFHLFNBQVMsR0FBRyxFQUFFO1FBQ3JCLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMxQixPQUFPLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDO09BQzNELENBQUM7Ozs7TUFJRixDQUFDLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO1FBQ2hELE1BQU0sQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztPQUNsQyxFQUFFLElBQUksQ0FBQyxDQUFDOzs7Ozs7OztNQVFULENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLFNBQVMsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUU7UUFDcEQsSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdEUsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEtBQUssRUFBRSxPQUFPLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4QyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7T0FDM0MsQ0FBQzs7Ozs7TUFLRixDQUFDLENBQUMsT0FBTyxHQUFHLFNBQVMsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUU7UUFDcEMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ3ZGLENBQUM7Ozs7TUFJRixDQUFDLENBQUMsSUFBSSxHQUFHLFNBQVMsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUU7UUFDakMsSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxJQUFJLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdEUsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEtBQUssRUFBRSxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ3JELENBQUM7Ozs7O01BS0YsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLEdBQUcsU0FBUyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRTtRQUNuRCxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztPQUN0RCxDQUFDOzs7TUFHRixDQUFDLENBQUMsT0FBTyxHQUFHLFNBQVMsS0FBSyxFQUFFO1FBQzFCLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7T0FDakMs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
